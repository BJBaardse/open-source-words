frp readme 中文文档 what is frp frp is a fast reverse proxy to help you expose a local server behind a nat or firewall to the internet now it supports tcp udp http and https protocol when requests can be forwarded by domains to backward web services table of contents vim markdown toc gfm what can i do with frp status architecture example usage access your computer in lan by ssh visit your web service in lan by custom domains forward dns query request forward unix domain socket expose a simple http file server expose your service in security p2p mode features configuration file dashboard authentication encryption and compression hot reload frpc configuration get proxy status from client port white list port reuse tcp stream multiplexing support kcp protocol connection pool load balancing rewriting the host header set headers in http request get real ip password protecting your web service custom subdomain names url routing connect frps by http proxy range ports mapping plugin development plan contributing donation alipay wechat pay paypal vim markdown toc what can i do with frp expose any http and https service behind a nat or firewall to the internet by a server with public ip address name based virtual host support expose any tcp or udp service behind a nat or firewall to the internet by a server with public ip address status frp is under development and you can try it with latest release version master branch for releasing stable version when dev branch for developing we may change any protocol and cant promise backward compatible please check the release log when upgrading architecture example usage firstly download the latest programs from release page according to your os and arch put frps and frps ini to your server with public ip put frpc and frpc ini to your server in lan access your computer in lan by ssh modify frps ini ini frps ini common bind port 7000 start frps frps c frps ini modify frpc ini server addr is your frpss server ip ini frpc ini common server addr x x x x server port 7000 ssh type tcp local ip 127 0 0 1 local port 22 remote port 6000 start frpc frpc c frpc ini connect to server in lan by ssh assuming that username is test ssh oport 6000 test x x x x visit your web service in lan by custom domains sometimes we want to expose a local web service behind a nat network to others for testing with your own domain name and unfortunately we cant resolve a domain name to a local ip however we can expose a http or https service using frp modify frps ini configure http port 8080 ini frps ini common bind port 7000 vhost http port 8080 start frps frps c frps ini modify frpc ini and set remote frps servers ip as x x x x the local port is the port of your web service ini frpc ini common server addr x x x x server port 7000 web type http local port 80 custom domains www yourdomain com start frpc frpc c frpc ini resolve a record of www yourdomain com to ip x x x x or cname record to your origin domain now visit your local web service using url http www yourdomain com 8080 forward dns query request modify frps ini ini frps ini common bind port 7000 start frps frps c frps ini modify frpc ini set remote frpss server ip as x x x x forward dns query request to google dns server 8 8 8 8 53 ini frpc ini common server addr x x x x server port 7000 dns type udp local ip 8 8 8 8 local port 53 remote port 6000 start frpc frpc c frpc ini send dns query request by dig dig x x x x p 6000 www google com forward unix domain socket using tcp port to connect unix domain socket like docker daemon configure frps same as above start frpc with configurations ini frpc ini common server addr x x x x server port 7000 unix domain socket type tcp remote port 6000 plugin unix domain socket plugin unix path var run docker sock get docker version by curl command curl http x x x x 6000 version expose a simple http file server a simple way to visit files in the lan configure frps same as above start frpc with configurations ini frpc ini common server addr x x x x server port 7000 test static file type tcp remote port 6000 plugin static file plugin local path tmp file plugin strip prefix static plugin http user abc plugin http passwd abc visit http x x x x 6000 static by your browser set correct user and password so you can see files in tmp file expose your service in security for some services if expose them to the public network directly will be a security risk stcp secret tcp help you create a proxy avoiding any one can access it configure frps same as above start frpc forward ssh port and remote port is useless ini frpc ini common server addr x x x x server port 7000 secret ssh type stcp sk abcdefg local ip 127 0 0 1 local port 22 start another frpc in which you want to connect this ssh server ini frpc ini common server addr x x x x server port 7000 secret ssh visitor type stcp role visitor server name secret ssh sk abcdefg bind addr 127 0 0 1 bind port 6000 connect to server in lan by ssh assuming that username is test ssh oport 6000 test 127 0 0 1 p2p mode xtcp is designed for transmitting a large amount of data directly between two client now it cant penetrate all types of nat devices you can try stcp if xtcp doesnt work configure a udp port for xtcp ini bind udp port 7001 start frpc forward ssh port and remote port is useless ini frpc ini common server addr x x x x server port 7000 p2p ssh type xtcp sk abcdefg local ip 127 0 0 1 local port 22 start another frpc in which you want to connect this ssh server ini frpc ini common server addr x x x x server port 7000 p2p ssh visitor type xtcp role visitor server name p2p ssh sk abcdefg bind addr 127 0 0 1 bind port 6000 connect to server in lan by ssh assuming that username is test ssh oport 6000 test 127 0 0 1 features configuration file you can find features which this document not metioned from full example configuration files frps full configuration file frpc full configuration file dashboard check frps status and proxiess statistics information by dashboard configure a port for dashboard to enable this feature ini common dashboard port 7500 dashboards username and password are both optional，if not set default is admin dashboard user admin dashboard pwd admin then visit http server addr 7500 to see dashboard default username and password are both admin authentication since v0 10 0 you only need to set token in frps ini and frpc ini note that time duration between server of frpc and frps mustnt exceed 15 minutes because timestamp is used for authentication howerver this timeout duration can be modified by setting authentication timeout in frpss configure file its defalut value is 900 means 15 minutes if it is equals 0 then frps will not check authentication timeout encryption and compression defalut value is false you could decide if the proxy will use encryption or compression ini frpc ini ssh type tcp local port 22 remote port 6000 use encryption true use compression true hot reload frpc configuration first you need to set admin port in frpcs configure file to let it provide http api for more features ini frpc ini common admin addr 127 0 0 1 admin port 7400 then run command frpc reload c frpc ini and wait for about 10 seconds to let frpc create or update or delete proxies note that parameters in common section wont be modified except start now get proxy status from client use frpc status c frpc ini to get status of all proxies you need to set admin port in frpcs configure file port white list allow ports in frps ini is used for preventing abuse of ports ini frps ini common allow ports 2000 3000 3001 3003 4000 50000 allow ports consists of a specific port or a range of ports divided by port reuse now vhost http port and vhost https port in frps can use same port with bind port frps will detect connections protocol and handle it correspondingly we would like to try to allow multiple proxies bind a same remote port with different protocols in the future tcp stream multiplexing frp support tcp stream multiplexing since v0 10 0 like http2 multiplexing all user requests to same frpc can use only one tcp connection you can disable this feature by modify frps ini and frpc ini ini frps ini and frpc ini must be same common tcp mux false support kcp protocol frp support kcp protocol since v0 12 0 kcp is a fast and reliable protocol that can achieve the transmission effect of a reduction of the average latency by 30 to 40 and reduction of the maximum delay by a factor of three at the cost of 10 to 20 more bandwidth wasted than tcp using kcp in frp enable kcp protocol in frps ini frps ini common bind port 7000 kcp needs to bind a udp port it can be same with bind port kcp bind port 7000 configure the protocol used in frpc to connect frps ini frpc ini common server addr x x x x specify the kcp bind port in frps server port 7000 protocol kcp connection pool by default frps send message to frpc for create a new connection to backward service when getting an user request if a proxys connection pool is enabled there will be a specified number of connections pre established this feature is fit for a large number of short connections configure the limit of pool count each proxy can use in frps ini ini frps ini common max pool count 5 enable and specify the number of connection pool ini frpc ini common pool count 1 load balancing load balancing is supported by group this feature is available only for type tcp now ini frpc ini test1 type tcp local port 8080 remote port 80 group web group key 123 test2 type tcp local port 8081 remote port 80 group web group key 123 group key is used for authentication proxies in same group will accept connections from port 80 randomly rewriting the host header when forwarding to a local port frp does not modify the tunneled http requests at all they are copied to your server byte for byte as they are received some application servers use the host header for determining which development site to display for this reason frp can rewrite your requests with a modified host header use the host header rewrite switch to rewrite incoming http requests ini frpc ini web type http local port 80 custom domains test yourdomain com host header rewrite dev yourdomain com if host header rewrite is specified the host header will be rewritten to match the hostname portion of the forwarding address set headers in http request you can set headers for proxy which type is http ini frpc ini web type http local port 80 custom domains test yourdomain com host header rewrite dev yourdomain com header x from where frp note that params which have prefix header will be added to http request headers in this example it will set header x from where frp to http request get real ip features for http proxy only you can get users real ip from http request header x forwarded for and x real ip note that now you can only get these two headers in first request of each user connection password protecting your web service anyone who can guess your tunnel url can access your local web server unless you protect it with a password this enforces http basic auth on all requests with the username and password you specify in frpcs configure file it can only be enabled when proxy type is http ini frpc ini web type http local port 80 custom domains test yourdomain com http user abc http passwd abc visit http test yourdomain com and now you need to input username and password custom subdomain names it is convenient to use subdomain configure for http、https type when many people use one frps server together ini frps ini subdomain host frps com resolve frps com to the frps servers ip ini frpc ini web type http local port 80 subdomain test now you can visit your web service by host test frps com note that if subdomain host is not empty custom domains should not be the subdomain of subdomain host url routing frp support forward http requests to different backward web services by url routing locations specify the prefix of url used for routing frps first searches for the most specific prefix location given by literal strings regardless of the listed order ini frpc ini web01 type http local port 80 custom domains web yourdomain com locations web02 type http local port 81 custom domains web yourdomain com locations news about http requests with url prefix newsand about will be forwarded to web02 and others to web01 connect frps by http proxy frpc can connect frps using http proxy if you set os environment http proxy or configure http proxy param in frpc ini file it only works when protocol is tcp ini frpc ini common server addr x x x x server port 7000 http proxy http user pwd 192 168 1 128 8080 range ports mapping proxy name has prefix range will support mapping range ports ini frpc ini range test tcp type tcp local ip 127 0 0 1 local port 6000 6006 6007 remote port 6000 6006 6007 frpc will generate 8 proxies like test tcp 0 test tcp 1 test tcp 7 plugin frpc only forward request to local tcp or udp port by default plugin is used for providing rich features there are built in plugins such as unix domain socket http proxy socks5 static file and you can see example usage specify which plugin to use by plugin parameter configuration parameters of plugin should be started with plugin local ip and local port is useless for plugin using plugin http proxy ini frpc ini http proxy type tcp remote port 6000 plugin http proxy plugin http user abc plugin http passwd abc plugin http user and plugin http passwd are configuration parameters used in http proxy plugin development plan log http request information in frps direct reverse proxy like haproxy kubernetes ingress support contributing interested in getting involved we would like to help you take a look at our issues list and consider sending a pull request to dev branch if you want to add a new feature please create an issue first to describe the new feature as well as the implementation approach once a proposal is accepted create an implementation of the new features and submit it as a pull request sorry for my poor english and improvement for this document is welcome even some typo fix if you have some wonderful ideas send email to fatedier gmail com note we prefer you to give your advise in issues so others with a same question can search it quickly and we dont need to answer them repeatly donation if frp help you a lot you can support us by frp qq group 606194980 alipay wechat pay paypal donate money by paypal to my account fatedier gmail com