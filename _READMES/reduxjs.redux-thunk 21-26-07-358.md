redux thunk thunk middleware for redux js npm install save redux thunk note on 2 x update most tutorials today assume redux thunk 1 x so you might run into an issue when running their code with 2 x if you use redux thunk 2 x in commonjs environment dont forget to add default to your import diff var reduxthunk require redux thunk var reduxthunk require redux thunk default if you used es modules youre already all good js import reduxthunk from redux thunk no changes here üòÄ additionally since 2 x we also support a umd build js var reduxthunk window reduxthunk default as you can see it also requires default at the end why do i need this if youre not sure whether you need it you probably dont read this for an in depth introduction to thunks in redux motivation redux thunk middleware allows you to write action creators that return a function instead of an action the thunk can be used to delay the dispatch of an action or to dispatch only if a certain condition is met the inner function receives the store methods dispatch and getstate as parameters an action creator that returns a function to perform asynchronous dispatch js const increment counter increment counter function increment return type increment counter function incrementasync return dispatch settimeout yay can invoke sync or async actions with dispatch dispatch increment 1000 an action creator that returns a function to perform conditional dispatch js function incrementifodd return dispatch getstate const counter getstate if counter 2 0 return dispatch increment whats a thunk a thunk is a function that wraps an expression to delay its evaluation js calculation of 1 2 is immediate x 3 let x 1 2 calculation of 1 2 is delayed foo can be called later to perform the calculation foo is a thunk let foo 1 2 the term originated as a humorous past tense version of think installation npm install save redux thunk then to enable redux thunk use applymiddleware js import createstore applymiddleware from redux import thunk from redux thunk import rootreducer from reducers index note this api requires redux 3 1 0 const store createstore rootreducer applymiddleware thunk composition any return value from the inner function will be available as the return value of dispatch itself this is convenient for orchestrating an asynchronous control flow with thunk action creators dispatching each other and returning promises to wait for each others completion js import createstore applymiddleware from redux import thunk from redux thunk import rootreducer from reducers note this api requires redux 3 1 0 const store createstore rootreducer applymiddleware thunk function fetchsecretsauce return fetch https www google com search q secret sauce these are the normal action creators you have seen so far the actions they return can be dispatched without any middleware however they only express ‚Äúfacts‚Äù and not the ‚Äúasync flow‚Äù function makeasandwich forperson secretsauce return type make sandwich forperson secretsauce function apologize fromperson toperson error return type apologize fromperson toperson error function withdrawmoney amount return type withdraw amount even without middleware you can dispatch an action store dispatch withdrawmoney 100 but what do you do when you need to start an asynchronous action such as an api call or a router transition meet thunks a thunk is a function that returns a function this is a thunk function makeasandwichwithsecretsauce forperson invert control return a function that accepts dispatch so we can dispatch later thunk middleware knows how to turn thunk async actions into actions return function dispatch return fetchsecretsauce then sauce dispatch makeasandwich forperson sauce error dispatch apologize the sandwich shop forperson error thunk middleware lets me dispatch thunk async actions as if they were actions store dispatch makeasandwichwithsecretsauce me it even takes care to return the thunks return value from the dispatch so i can chain promises as long as i return them store dispatch makeasandwichwithsecretsauce my wife then console log done in fact i can write action creators that dispatch actions and async actions from other action creators and i can build my control flow with promises function makesandwichesforeverybody return function dispatch getstate if getstate sandwiches isshopopen you dont have to return promises but its a handy convention so the caller can always call then on async dispatch result return promise resolve we can dispatch both plain object actions and other thunks which lets us compose the asynchronous actions in a single flow return dispatch makeasandwichwithsecretsauce my grandma then promise all dispatch makeasandwichwithsecretsauce me dispatch makeasandwichwithsecretsauce my wife then dispatch makeasandwichwithsecretsauce our kids then dispatch getstate mymoney 42 withdrawmoney 42 apologize me the sandwich shop this is very useful for server side rendering because i can wait until data is available then synchronously render the app store dispatch makesandwichesforeverybody then response send reactdomserver rendertostring i can also dispatch a thunk async action from a component any time its props change to load the missing data import connect from react redux import component from react class sandwichshop extends component componentdidmount this props dispatch makeasandwichwithsecretsauce this props forperson componentdidupdate prevprops if prevprops forperson this props forperson this props dispatch makeasandwichwithsecretsauce this props forperson render return this props sandwiches join mustard export default connect state sandwiches state sandwiches sandwichshop injecting a custom argument since 2 1 0 redux thunk supports injecting a custom argument using the withextraargument function js const store createstore reducer applymiddleware thunk withextraargument api later function fetchuser id return dispatch getstate api you can use api here to pass multiple things just wrap them in a single object and use destructuring js const store createstore reducer applymiddleware thunk withextraargument api whatever later function fetchuser id return dispatch getstate api whatever you can use api and something else here license mit