metalsmith an extremely simple pluggable static site generator in metalsmith all of the logic is handled by plugins you simply chain them together heres what the simplest blog looks like js metalsmith dirname use markdown use layouts handlebars build function err if err throw err console log build finished but what if you want to get fancier by hiding your unfinished drafts and using custom permalinks just add plugins js metalsmith dirname use drafts use markdown use permalinks posts title use layouts handlebars build function err if err throw err console log build finished its as easy as that special thanks to ian storm taylor andrew meyer dominic barnes andrew goodricke and others for their contributions installation npm install metalsmith plugins check out the website for a list of plugins how does it work metalsmith works in three simple steps read all the files in a source directory invoke a series of plugins that manipulate the files write the results to a destination directory each plugin is invoked with the contents of the source directory and each file can contain yaml front matter that will be attached as metadata so a simple file like title a catchy title date 2014 12 01 an informative article would be parsed into js path to my file md title a catchy title date new date 2014 12 01 contents new buffer an informative article which any of the plugins can then manipulate however they want and writing the plugins is incredibly simple just take a look at the example drafts plugin of course they can get a lot more complicated too thats what makes metalsmith powerful the plugins can do anything you want the secret we keep referring to metalsmith as a static site generator but its a lot more than that since everything is a plugin the core library is actually just an abstraction for manipulating a directory of files which means you could just as easily use it to make a simple project scaffolder a simple build tool for sass files a simple static site generator a jekyll like static site generator a wintersmith like static site generator resources irc channel its metalsmith on freenode slack channel getting to know metalsmith a great series about how to use metalsmith for your static site building a blog with metalsmith a blog post about how to create a basic blog with metalsmith check out the related video of the talk too awesome metalsmith great collection of resources examples and tutorials cli in addition to a simple javascript api the metalsmith cli can read configuration from a metalsmith json file so that you can build static site generators similar to jekyll or wintersmith easily the example blog above would be configured like this json source src destination build plugins metalsmith drafts true metalsmith markdown true metalsmith permalinks posts title metalsmith layouts handlebars you can specify your plugins as either an object or array using an array would allow you to specify use of the same plugin multiple times the above example is then defined as so json source src destination build plugins metalsmith drafts true metalsmith markdown true metalsmith permalinks posts title metalsmith templates handlebars and then just install metalsmith and the plugins and run the metalsmith cli node modules bin metalsmith metalsmith · reading configuration from path to metalsmith json metalsmith · successfully built to path to build or if you install them globally you can just use metalsmith metalsmith · reading configuration from path to metalsmith json metalsmith · successfully built to path to build options recognised by metalsmith json are source destination concurrency metadata clean and frontmatter see api section below for usage checkout the static site jekyll or wintersmith examples to see the cli in action if you want to use a custom plugin but feel like its too domain specific to be published to the world you can include plugins as local npm modules simply use a relative path from your root directory json plugins lib metalsmith plugin js true api checkout the project scaffolder or build tool examples to see a real example of the javascript api in use new metalsmith dir create a new metalsmith instance for a working dir use plugin add the given plugin function to the middleware stack metalsmith uses ware to support middleware so plugins should follow the same pattern of taking arguments of files metalsmith callback modifying the files or metalsmith metadata argument by reference and then calling callback to trigger the next step build fn build with the given settings and a callback having signature fn err files source path set the relative path to the source directory or get the full one if no path is provided the source directory defaults to src destination path set the relative path to the destination directory or get the full one if no path is provided the destination directory defaults to build concurrency max set the maximum number of files to open at once when reading or writing defaults to infinity to avoid having too many files open at once emfile errors set the concurrency to something lower than ulimit n clean boolean set whether to remove the destination directory before writing to it or get the current setting defaults to true frontmatter boolean set whether to parse yaml frontmatter defaults to true ignore path ignore files paths from being loaded into metalsmith path can be a string a function or an array of strings and or functions strings use the glob syntax from minimatch to match files and directories to ignore functions are called with the full path to the file as their first argument and the stat object returned by nodes fs stat function as their second argument and must return either true to ignore the file or false to keep it metadata json get the global metadata this is useful for plugins that want to set global level metadata that can be applied to all files path paths resolve any amount of paths relative to the working directory this is useful for plugins who want to read extra assets from another directory for example layouts run files fn run all of the middleware functions on a dictionary of files and callback with fn err files where files is the altered dictionary process fn process the files like build without writing any files callback signature fn err files metadata api add metadata to your files to access these build features by default metalsmith uses a few different metadata fields contents the body content of the file not including any yaml frontmatter mode the numeric version of the files mode you can add your own metadata in two ways using yaml frontmatter at the top of any file enabling a plugin that adds metadata programmatically mode set the mode of the file for example cat cleanup sh mode 0764 rm rf would be built with mode rwxrw r i e user executable troubleshooting node version requirements metalsmith v2 0 and above uses generators which has some considerations for node js 0 12 x and below using node js 0 10 x you have two options upgrade to latest stable version of node js 0 12 x — see using node js 0 12 x section below use metalsmith v1 7 put metalsmith 1 7 0 in your package json and npm install that version using node js 0 12 x you have three options run node js with harmony generators flag set node harmony generators my script js using package json scripts start node harmony generators my script js run with npm run npm install harmonize and require before metalsmith is used e g require harmonize harmony generators use metalsmith v1 7 put metalsmith 1 7 0 in your package json and npm install that version license