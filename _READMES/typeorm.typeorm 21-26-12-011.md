typeorm is an orm that can run in nodejs browser cordova phonegap ionic react native nativescript expo and electron platforms and can be used with typescript and javascript es5 es6 es7 es8 its goal is to always support the latest javascript features and provide additional features that help you to develop any kind of application that uses databases from small applications with a few tables to large scale enterprise applications with multiple databases typeorm supports both active record and data mapper patterns unlike all other javascript orms currently in existance which means you can write high quality loosely coupled scalable maintainable applications the most productive way typeorm is highly influenced by other orms such as hibernate doctrine and entity framework some typeorm features supports both datamapper and activerecord your choice entities and columns database specific column types entity manager repositories and custom repositories clean object relational model associations relations eager and lazy relations uni directional bi directional and self referenced relations supports multiple inheritance patterns cascades indices transactions migrations and automatic migrations generation connection pooling replication using multiple database connections working with multiple databases types cross database and cross schema queries elegant syntax flexible and powerful querybuilder left and inner joins proper pagination for queries using joins query caching streaming raw results logging listeners and subscribers hooks supports closure table pattern schema declaration in models or separate configuration files connection configuration in json xml yml env formats supports mysql mariadb postgres sqlite microsoft sql server oracle sql js supports mongodb nosql database works in nodejs browser ionic cordova react native nativescript expo electron platforms typescript and javascript support produced code is performant flexible clean and maintainable follows all possible best practices cli and more with typeorm your models look like this typescript import entity primarygeneratedcolumn column from typeorm entity export class user primarygeneratedcolumn id number column firstname string column lastname string column age number and your domain logic looks like this typescript const user new user user firstname timber user lastname saw user age 25 await repository save user const allusers await repository find const firstuser await repository findone 1 find by id const timber await repository findone firstname timber lastname saw await repository remove timber alternatively if you prefer to use the activerecord implementation you can use it as well typescript import entity primarygeneratedcolumn column baseentity from typeorm entity export class user extends baseentity primarygeneratedcolumn id number column firstname string column lastname string column age number and your domain logic will look this way typescript const user new user user firstname timber user lastname saw user age 25 await user save const allusers await user find const firstuser await user findone 1 const timber await user findone firstname timber lastname saw await timber remove installation install the npm package npm install typeorm save you need to install reflect metadata shim npm install reflect metadata save and import it somewhere in the global place of your app for example in app ts import reflect metadata you may need to install node typings npm install types node save install a database driver for mysql or mariadb npm install mysql save you can install mysql2 instead as well for postgresql npm install pg save for sqlite npm install sqlite3 save for microsoft sql server npm install mssql save for sql js npm install sql js save for oracle npm install oracledb save install only one of them depending on which database you use to make the oracle driver work you need to follow the installation instructions from their site for mongodb experimental npm install mongodb save for nativescript react native and cordova check documentation of supported platforms typescript configuration also make sure you are using typescript compiler version 2 3 or greater and you have enabled the following settings in tsconfig json json emitdecoratormetadata true experimentaldecorators true you may also need to enable es6 in the lib section of compiler options or install es6 shim from types quick start the quickest way to get started with typeorm is to use its cli commands to generate a starter project quick start works only if you are using typeorm in a nodejs application if you are using other platforms proceed to the step by step guide first install typeorm globally npm install typeorm g then go to the directory where you want to create a new project and run the command typeorm init name myproject database mysql where name is the name of your project and database is the database youll use database can be one of the following values mysql mariadb postgres sqlite mssql oracle mongodb cordova react native expo nativescript this command will generate a new project in the myproject directory with the following files myproject ├── src place of your typescript code │ ├── entity place where your entities database models are stored │ │ └── user ts sample entity │ ├── migration place where your migrations are stored │ └── index ts start point of your application ├── gitignore standard gitignore file ├── ormconfig json orm and database connection configuration ├── package json node module dependencies ├── readme md simple readme file └── tsconfig json typescript compiler options you can also run typeorm init on an existing node project but be careful it may override some files you already have the next step is to install new project dependencies cd myproject npm install while installation is in progress edit the ormconfig json file and put your own database connection configuration options in there json type mysql host localhost port 3306 username test password test database test synchronize true logging false entities src entity ts migrations src migration ts subscribers src subscriber ts particularly most of the time youll only need to configure host username password database and maybe port options once you finish with configuration and all node modules are installed you can run your application npm start thats it your application should successfully run and insert a new user into the database you can continue to work with this project and integrate other modules you need and start creating more entities you can generate an even more advanced project with express installed by running typeorm init name myproject database mysql express command step by step guide what are you expecting from orm first of all you are expecting it will create database tables for you and find insert update delete your data without the pain of having to write lots of hardly maintainable sql queries this guide will show you how to setup typeorm from scratch and make it do what you are expecting from an orm create a model working with a database starts from creating tables how do you tell typeorm to create a database table the answer is through the models your models in your app are your database tables for example you have a photo model typescript export class photo id number name string description string filename string views number and you want to store photos in your database to store things in the database first you need a database table and database tables are created from your models not all models but only those you define as entities create an entity entity is your model decorated by an entity decorator a database table will be created for such models you work with entities everywhere with typeorm you can load insert update remove and perform other operations with them lets make our photo model as an entity typescript import entity from typeorm entity export class photo id number name string description string filename string views number ispublished boolean now a database table will be created for the photo entity and well be able to work with it anywhere in our app we have created a database table however what table can exist without columns lets create a few columns in our database table adding table columns to add database columns you simply need to decorate an entitys properties you want to make into a column with a column decorator typescript import entity column from typeorm entity export class photo column id number column name string column description string column filename string column views number column ispublished boolean now id name description filename views and ispublished columns will be added to the photo table column types in the database are inferred from the property types you used e g number will be converted into integer string into varchar boolean into bool etc but you can use any column type your database supports by implicitly specifying a column type into the column decorator we generated a database table with columns but there is one thing left each database table must have a column with a primary key creating a primary column each entity must have at least one primary key column this is a requirement and you cant avoid it to make a column a primary key you need to use primarycolumn decorator typescript import entity column primarycolumn from typeorm entity export class photo primarycolumn id number column name string column description string column filename string column views number column ispublished boolean creating an auto generated column now lets say you want your id column to be auto generated this is known as auto increment sequence serial generated identity column to do that you need to change the primarycolumn decorator to a primarygeneratedcolumn decorator typescript import entity column primarygeneratedcolumn from typeorm entity export class photo primarygeneratedcolumn id number column name string column description string column filename string column views number column ispublished boolean column data types next lets fix our data types by default string is mapped to a varchar 255 like type depending on the database type number is mapped to a integer like type depending on the database type we dont want all our columns to be limited varchars or integers lets setup correct data types typescript import entity column primarygeneratedcolumn from typeorm entity export class photo primarygeneratedcolumn id number column length 100 name string column text description string column filename string column double views number column ispublished boolean column types are database specific you can set any column type your database supports more information on supported column types can be found here creating a connection to the database now when our entity is created lets create an index ts or app ts whatever you call it file and set up our connection there typescript import reflect metadata import createconnection from typeorm import photo from entity photo createconnection type mysql host localhost port 3306 username root password admin database test entities photo synchronize true logging false then connection here you can start to work with your entities catch error console log error we are using mysql in this example but you can use any other supported database to use another database simply change the type in the options to the database type you are using mysql mariadb postgres sqlite mssql oracle cordova nativescript react native expo or mongodb also make sure to use your own host port username password and database settings we added our photo entity to the list of entities for this connection each entity you are using in your connection must be listed there setting synchronize makes sure your entities will be synced with the database every time you run the application loading all entities from the directory later when we create more entities we need to add them to the entities in our configuration this is not very convenient so instead we can set up the whole directory from where all entities will be connected and used in our connection typescript import createconnection from typeorm createconnection type mysql host localhost port 3306 username root password admin database test entities dirname entity js synchronize true then connection here you can start to work with your entities catch error console log error but be careful with this approach if you are using ts node then you need to specify paths to ts files instead if you are using outdir then youll need to specify paths to js files inside outdir directory if you are using outdir and when you remove or rename your entities make sure to clear outdir directory and re compile your project again because when you remove your source ts files their compiled js versions arent removed from output directory and still are loaded by typeorm because they present in outdir directory running the application now if you run your index ts a connection with database will be initialized and a database table for your photos will be created shell photo id int 11 primary key auto increment name varchar 500 description text filename varchar 255 views int 11 ispublished boolean creating and inserting a photo into the database now lets create a new photo to save it in the database typescript import createconnection from typeorm import photo from entity photo createconnection then connection let photo new photo photo name me and bears photo description i am near polar bears photo filename photo with bears jpg photo views 1 photo ispublished true return connection manager save photo then photo console log photo has been saved photo id is photo id catch error console log error once your entity is saved it will get a newly generated id save method returns an instance of the same object you pass to it its not a new copy of the object it modifies its id and returns it using async await syntax lets take advantage of the latest es8 es2017 features and use async await syntax instead typescript import createconnection from typeorm import photo from entity photo createconnection then async connection let photo new photo photo name me and bears photo description i am near polar bears photo filename photo with bears jpg photo views 1 photo ispublished true await connection manager save photo console log photo has been saved catch error console log error using entity manager we just created a new photo and saved it in the database we used entitymanager to save it using entity manager you can manipulate any entity in your app for example lets load our saved entity typescript import createconnection from typeorm import photo from entity photo createconnection then async connection let savedphotos await connection manager find photo console log all photos from the db savedphotos catch error console log error savedphotos will be an array of photo objects with the data loaded from the database learn more about entitymanager here using repositories now lets refactor our code and use repository instead of entitymanager each entity has its own repository which handles all operations with its entity when you deal with entities a lot repositories are more convenient to use than entitymanagers typescript import createconnection from typeorm import photo from entity photo createconnection then async connection let photo new photo photo name me and bears photo description i am near polar bears photo filename photo with bears jpg photo views 1 photo ispublished true let photorepository connection getrepository photo await photorepository save photo console log photo has been saved let savedphotos await photorepository find console log all photos from the db savedphotos catch error console log error learn more about repository here loading from the database lets try more load operations using the repository typescript import createconnection from typeorm import photo from entity photo createconnection then async connection let allphotos await photorepository find console log all photos from the db allphotos let firstphoto await photorepository findone 1 console log first photo from the db firstphoto let meandbearsphoto await photorepository findone name me and bears console log me and bears photo from the db meandbearsphoto let allviewedphotos await photorepository find views 1 console log all viewed photos allviewedphotos let allpublishedphotos await photorepository find ispublished true console log all published photos allpublishedphotos let allphotos photoscount await photorepository findandcount console log all photos allphotos console log photos count photoscount catch error console log error updating in the database now lets load a single photo from the database update it and save it typescript import createconnection from typeorm import photo from entity photo createconnection then async connection let phototoupdate await photorepository findone 1 phototoupdate name me my friends and polar bears await photorepository save phototoupdate catch error console log error now photo with id 1 will be updated in the database removing from the database now lets remove our photo from the database typescript import createconnection from typeorm import photo from entity photo createconnection then async connection let phototoremove await photorepository findone 1 await photorepository remove phototoremove catch error console log error now photo with id 1 will be removed from the database creating a one to one relation lets create a one to one relation with another class lets create a new class in photometadata ts this photometadata class is supposed to contain our photos additional meta information typescript import entity column primarygeneratedcolumn onetoone joincolumn from typeorm import photo from photo entity export class photometadata primarygeneratedcolumn id number column int height number column int width number column orientation string column compressed boolean column comment string onetoone type photo joincolumn photo photo here we are using a new decorator called onetoone it allows us to create a one to one relationship between two entities type photo is a function that returns the class of the entity with which we want to make our relationship we are forced to use a function that returns a class instead of using the class directly because of the language specifics we can also write it as photo but we use type photo as a convention to increase code readability the type variable itself does not contain anything we also add a joincolumn decorator which indicates that this side of the relationship will own the relationship relations can be unidirectional or bidirectional only one side of relational can be owning using joincolumn decorator is required on the owner side of the relationship if you run the app youll see a newly generated table and it will contain a column with a foreign key for the photo relation shell photo metadata id int 11 primary key auto increment height int 11 width int 11 comment varchar 255 compressed boolean orientation varchar 255 photoid int 11 foreign key save a one to one relation now lets save a photo its metadata and attach them to each other typescript import createconnection from typeorm import photo from entity photo import photometadata from entity photometadata createconnection then async connection create a photo let photo new photo photo name me and bears photo description i am near polar bears photo filename photo with bears jpg photo ispublished true create a photo metadata let metadata new photometadata metadata height 640 metadata width 480 metadata compressed true metadata comment cybershoot metadata orientation portait metadata photo photo this way we connect them get entity repositories let photorepository connection getrepository photo let metadatarepository connection getrepository photometadata first we should save a photo await photorepository save photo photo is saved now we need to save a photo metadata await metadatarepository save metadata done console log metadata is saved and relation between metadata and photo is created in the database too catch error console log error inverse side of the relationship relations can be unidirectional or bidirectional currently our relation between photometadata and photo is unidirectional the owner of the relation is photometadata and photo doesnt know anything about photometadata this makes it complicated to access photometadata from the photo side to fix this issue we should add an inverse relation and make relations between photometadata and photo bidirectional lets modify our entities typescript import entity column primarygeneratedcolumn onetoone joincolumn from typeorm import photo from photo entity export class photometadata other columns onetoone type photo photo photo metadata joincolumn photo photo typescript import entity column primarygeneratedcolumn onetoone from typeorm import photometadata from photometadata entity export class photo other columns onetoone type photometadata photometadata photometadata photo metadata photometadata photo photo metadata is a function that returns the name of the inverse side of the relation here we show that the metadata property of the photo class is where we store photometadata in the photo class instead of passing a function that returns a property of the photo you could alternatively simply pass a string to onetoone decorator like metadata but we used this function typed approach to make our refactoring easier note that we should use joincolumn decorator only on one side of a relation whichever side you put this decorator on will be the owning side of the relationship the owning side of a relationship contains a column with a foreign key in the database loading objects with their relations now lets load our photo and its photo metadata in a single query there are two ways to do it using find methods or using querybuilder functionality lets use find methods first find methods allow you to specify an object with the findoneoptions findmanyoptions interface typescript import createconnection from typeorm import photo from entity photo import photometadata from entity photometadata createconnection then async connection let photorepository connection getrepository photo let photos await photorepository find relations metadata catch error console log error here photos will contain an array of photos from the database and each photo will contain its photo metadata learn more about find options in this documentation using find options is good and dead simple but if you need a more complex query you should use querybuilder instead querybuilder allows more complex queries to be used in an elegant way typescript import createconnection from typeorm import photo from entity photo import photometadata from entity photometadata createconnection then async connection let photos await connection getrepository photo createquerybuilder photo innerjoinandselect photo metadata metadata getmany catch error console log error querybuilder allows creation and execution of sql queries of almost any complexity when you work with querybuilder think like you are creating an sql query in this example photo and metadata are aliases applied to selected photos you use aliases to access columns and properties of the selected data using cascades to automatically save related objects we can setup cascade options in our relations in the cases when we want our related object to be saved whenever the other object is saved lets change our photos onetoone decorator a bit typescript export class photo other columns onetoone type photometadata metadata metadata photo cascade true metadata photometadata using cascade allows us not to separately save photo and separately save metadata objects now now we can simply save a photo object and the metadata object will be saved automatically because of cascade options typescript createconnection options then async connection create photo object let photo new photo photo name me and bears photo description i am near polar bears photo filename photo with bears jpg photo ispublished true create photo metadata object let metadata new photometadata metadata height 640 metadata width 480 metadata compressed true metadata comment cybershoot metadata orientation portait photo metadata metadata this way we connect them get repository let photorepository connection getrepository photo saving a photo also save the metadata await photorepository save photo console log photo is saved photo metadata is saved too catch error console log error creating a many to one one to many relation lets create a many to one one to many relation lets say a photo has one author and each author can have many photos first lets create an author class typescript import entity column primarygeneratedcolumn onetomany joincolumn from typeorm import photo from photo entity export class author primarygeneratedcolumn id number column name string onetomany type photo photo photo author note we will create author property in the photo class below photos photo author contains an inverse side of a relation onetomany is always an inverse side of relation and it cant exist without manytoone on the other side of the relation now lets add the owner side of the relation into the photo entity typescript import entity column primarygeneratedcolumn manytoone from typeorm import photometadata from photometadata import author from author entity export class photo other columns manytoone type author author author photos author author in many to one one to many relation the owner side is always many to one it means that the class that uses manytoone will store the id of the related object after you run the application the orm will create the author table shell author id int 11 primary key auto increment name varchar 255 it will also modify the photo table adding a new author column and creating a foreign key for it shell photo id int 11 primary key auto increment name varchar 255 description varchar 255 filename varchar 255 ispublished boolean authorid int 11 foreign key creating a many to many relation lets create a many to one many to many relation lets say a photo can be in many albums and each album can contain many photos lets create an album class typescript import entity primarygeneratedcolumn column manytomany jointable from typeorm entity export class album primarygeneratedcolumn id number column name string manytomany type photo photo photo albums jointable photos photo jointable is required to specify that this is the owner side of the relationship now lets add the inverse side of our relation to the photo class typescript export class photo other columns manytomany type album album album photos albums album after you run the application the orm will create a album photos photo albums junction table shell album photos photo albums album id int 11 primary key foreign key photo id int 11 primary key foreign key dont forget to register the album class with your connection in the orm typescript const options connectionoptions other options entities photo photometadata author album now lets insert albums and photos to our database typescript let connection await createconnection options create a few albums let album1 new album album1 name bears await connection manager save album1 let album2 new album album2 name me await connection manager save album2 create a few photos let photo new photo photo name me and bears photo description i am near polar bears photo filename photo with bears jpg photo albums album1 album2 await connection manager save photo now our photo is saved and albums are attached to it now lets load them const loadedphoto await connection getrepository photo findone 1 relations albums loadedphoto will be equal to typescript id 1 name me and bears description i am near polar bears filename photo with bears jpg albums id 1 name bears id 2 name me using querybuilder you can use querybuilder to build sql queries of almost any complexity for example you can do this typescript let photos await connection getrepository photo createquerybuilder photo first argument is an alias alias is what you are selecting photos you must specify it innerjoinandselect photo metadata metadata leftjoinandselect photo albums album where photo ispublished true andwhere photo name photoname or photo name bearname orderby photo id desc skip 5 take 10 setparameters photoname my bearname mishka getmany this query selects all published photos with my or mishka names it will select results from position 5 pagination offset and will select only 10 results pagination limit the selection result will be ordered by id in descending order the photos albums will be left joined and their metadata will be inner joined youll use the query builder in your application a lot learn more about querybuilder here samples take a look at the samples in sample for examples of usage there are a few repositories which you can clone and start with example how to use typeorm with typescript example how to use typeorm with javascript example how to use typeorm with javascript and babel example how to use typeorm with typescript and systemjs in browser example how to use express and typeorm example how to use koa and typeorm example how to use typeorm with mongodb example how to use typeorm in a cordova phonegap app example how to use typeorm with an ionic app example how to use typeorm with react native example how to use typeorm with electron using javascript example how to use typeorm with electron using typescript extensions there are several extensions that simplify working with typeorm and integrating it with other modules typeorm graphql framework typeorm integration with typedi typeorm integration with routing controllers models generation from existing database typeorm model generator contributing learn about contribution here and how to setup your development environment here this project exists thanks to all the people who contribute sponsors open source is hard and time consuming if you want to invest into typeorms future you can become a sponsor and make our core team to spend more time on typeorms improvements and new features become a sponsor gold sponsors become a gold sponsor and get a premium technical support from our core contributors become a gold sponsor