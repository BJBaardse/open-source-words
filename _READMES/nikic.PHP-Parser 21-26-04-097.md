php parser this is a php 5 2 to php 7 2 parser written in php its purpose is to simplify static code analysis and manipulation documentation for version 4 x stable for running on php 7 0 for parsing php 5 2 to php 7 2 documentation for version 3 x stable for running on php 5 5 for parsing php 5 2 to php 7 2 features the main features provided by this library are parsing php 5 and php 7 code into an abstract syntax tree ast invalid code can be parsed into a partial ast the ast contains accurate location information dumping the ast in human readable form converting an ast back to php code experimental formatting can be preserved for partially changed asts infrastructure to traverse and modify asts resolution of namespaced names evaluation of constant expressions builders to simplify ast construction for code generation converting an ast into json and back quick start install the library using composer php composer phar require nikic php parser parse some php code into an ast and dump the result in human readable form php php use phpparser\error use phpparser\nodedumper use phpparser\parserfactory code code php function test foo var dump foo code parser new parserfactory create parserfactory prefer php7 try ast parser parse code catch error error echo parse error error getmessage \n return dumper new nodedumper echo dumper dump ast \n this dumps an ast looking something like this array 0 stmt function byref false name identifier name test params array 0 param type null byref false variadic false var expr variable name foo default null returntype null stmts array 0 stmt expression expr expr funccall name name parts array 0 var dump args array 0 arg value expr variable name foo byref false unpack false lets traverse the ast and perform some kind of modification for example drop all function bodies php use phpparser\node use phpparser\node\stmt\function use phpparser\nodetraverser use phpparser\nodevisitorabstract traverser new nodetraverser traverser addvisitor new class extends nodevisitorabstract public function enternode node node if node instanceof function clean out the function body node stmts ast traverser traverse ast echo dumper dump ast \n this gives us an ast where the function stmts are empty array 0 stmt function byref false name identifier name test params array 0 param type null byref false variadic false var expr variable name foo default null returntype null stmts array finally we can convert the new ast back to php code php use phpparser\prettyprinter prettyprinter new prettyprinter\standard echo prettyprinter prettyprintfile ast this gives us our original code minus the var dump call inside the function php php function test foo for a more comprehensive introduction see the documentation documentation introduction usage of basic components component documentation walking the ast node visitors modifying the ast from a visitor short circuiting traversals interleaved visitors simple node finding api parent and sibling references name resolution name resolver options name resolution context pretty printing converting ast back to php code customizing formatting formatting preserving code transformations ast builders fluent builders for ast nodes lexer lexer options token and file positions for nodes custom attributes error handling column information for errors error recovery parsing of syntactically incorrect code constant expression evaluation evaluating constant property etc initializers handling errors and unsupported expressions json representation json encoding and decoding of asts performance disabling xdebug reusing objects garbage collection impact frequently asked questions parent and sibling references