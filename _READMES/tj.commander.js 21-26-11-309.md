commander js the complete solution for node js command line interfaces inspired by rubys commander api documentation installation npm install commander save option parsing options with commander are defined with the option method also serving as documentation for the options the example below parses args and options from process argv leaving remaining args as the program args array which were not consumed by options js usr bin env node module dependencies var program require commander program version 0 1 0 option p peppers add peppers option p pineapple add pineapple option b bbq sauce add bbq sauce option c cheese type add the specified type of cheese marble marble parse process argv console log you ordered a pizza with if program peppers console log peppers if program pineapple console log pineapple if program bbqsauce console log bbq console log s cheese program cheese short flags may be passed as a single arg for example abc is equivalent to a b c multi word options such as template engine are camel cased becoming program templateengine etc note that multi word options starting with no prefix negate the boolean value of the following word for example no sauce sets the value of program sauce to false js usr bin env node module dependencies var program require commander program option no sauce remove sauce parse process argv console log you ordered a pizza if program sauce console log with sauce else console log without sauce version option calling the version implicitly adds the v and version options to the command when either of these options is present the command prints the version number and exits examples pizza v 0 0 1 if you want your program to respond to the v option instead of the v option simply pass custom flags to the version method using the same syntax as the option method js program version 0 0 1 v version the version flags can be named anything but the long option is required command specific options you can attach options to a command js usr bin env node var program require commander program command rm option r recursive remove recursively action function dir cmd console log remove dir cmd recursive recursively program parse process argv a commands options are validated when the command is used any unknown options will be reported as an error however if an action based command does not define an action then the options are not validated coercion js function range val return val split map number function list val return val split function collect val memo memo push val return memo function increaseverbosity v total return total 1 program version 0 1 0 usage options option i integer an integer argument parseint option f float a float argument parsefloat option r range a range range option l list a list list option o optional value an optional value option c collect value a repeatable value collect option v verbose a value that can be increased increaseverbosity 0 parse process argv console log int j program integer console log float j program float console log optional j program optional program range program range console log range j j program range 0 program range 1 console log list j program list console log collect j program collect console log verbosity j program verbose console log args j program args regular expression js program version 0 1 0 option s size pizza size large medium small i medium option d drink drink drink coke pepsi izze i parse process argv console log size j program size console log drink j program drink variadic arguments the last argument of a command can be variadic and only the last argument to make an argument variadic you have to append to the argument name here is an example js usr bin env node module dependencies var program require commander program version 0 1 0 command rmdir otherdirs action function dir otherdirs console log rmdir s dir if otherdirs otherdirs foreach function odir console log rmdir s odir program parse process argv an array is used for the value of a variadic argument this applies to program args as well as the argument passed to your action as demonstrated above specify the argument syntax js usr bin env node var program require commander program version 0 1 0 arguments env action function cmd env cmdvalue cmd envvalue env program parse process argv if typeof cmdvalue undefined console error no command given process exit 1 console log command cmdvalue console log environment envvalue no environment given angled brackets e g indicate required input square brackets e g env indicate optional input git style sub commands js file examples pm var program require commander program version 0 1 0 command install name install one or more packages command search query search with optional query command list list packages installed isdefault true parse process argv when command is invoked with a description argument no action callback should be called to handle sub commands otherwise there will be an error this tells commander that youre going to use separate executables for sub commands much like git 1 and other popular tools the commander will try to search the executables in the directory of the entry script like examples pm with the name program command like pm install pm search options can be passed with the call to command specifying true for opts nohelp will remove the subcommand from the generated help output specifying true for opts isdefault will run the subcommand if no other subcommand is specified if the program is designed to be installed globally make sure the executables have proper modes like 755 harmony you can enable harmony option in two ways use usr bin env node harmony in the sub commands scripts note some os version dont support this pattern use the harmony option when call the command like node harmony examples pm publish the harmony option will be preserved when spawning sub command process automated help the help information is auto generated based on the information commander already knows about your program so the following help info is for free examples pizza help usage pizza options an application for pizzas ordering options h help output usage information v version output the version number p peppers add peppers p pineapple add pineapple b bbq add bbq sauce c cheese type add the specified type of cheese marble c no cheese you do not want any cheese custom help you can display arbitrary h help information by listening for help commander will automatically exit once you are done so that the remainder of your program does not execute causing undesired behaviours for example in the following executable stuff will not output when help is used js usr bin env node module dependencies var program require commander program version 0 1 0 option f foo enable some foo option b bar enable some bar option b baz enable some baz must be before parse since nodes emit is immediate program on help function console log examples console log console log custom help help console log custom help h console log program parse process argv console log stuff yields the following help output when node script name js h or node script name js help are run usage custom help options options h help output usage information v version output the version number f foo enable some foo b bar enable some bar b baz enable some baz examples custom help help custom help h outputhelp cb output help information without exiting optional callback cb allows post processing of help text before it is displayed if you want to display help by default e g if no command was provided you can use something like js var program require commander var colors require colors program version 0 1 0 command getstream url get stream url parse process argv if process argv slice 2 length program outputhelp make red function make red txt return colors red txt display the help text in red on the console help cb output help information and exit immediately optional callback cb allows post processing of help text before it is displayed custom event listeners you can execute custom actions by listening to command and option events js program on option verbose function process env verbose this verbose error on unknown commands program on command function console error invalid command s\nsee help for a list of available commands program args join process exit 1 examples js var program require commander program version 0 1 0 option c chdir change the working directory option c config set config path defaults to deploy conf option t no tests ignore test hook program command setup env description run setup commands for all envs option s setup mode mode which setup mode to use action function env options var mode options setup mode normal env env all console log setup for s env s with s mode env mode program command exec alias ex description execute the given remote cmd option e exec mode which exec mode to use action function cmd options console log exec s using s mode cmd options exec mode on help function console log examples console log console log deploy exec sequential console log deploy exec async console log program command action function env console log deploying s env program parse process argv more demos can be found in the examples directory license mit