algo vpn algo vpn is a set of ansible scripts that simplify the setup of a personal ipsec vpn it uses the most secure defaults available works with common cloud providers and does not require client software on most devices see our release announcement for more information features supports only ikev2 with strong crypto aes gcm sha2 and p 256 and wireguard generates apple profiles to auto configure ios and macos devices includes a helper script to add and remove users blocks ads with a local dns resolver optional sets up limited ssh users for tunneling traffic optional based on current versions of ubuntu and strongswan installs to digitalocean amazon lightsail amazon ec2 microsoft azure google compute engine scaleway openstack or your own ubuntu 18 04 lts server anti features does not support legacy cipher suites or protocols like l2tp ikev1 or rsa does not install tor openvpn or other risky servers does not depend on the security of tls does not require client software on most platforms does not claim to provide anonymity or censorship avoidance does not claim to protect you from the fsb mss dgse or fsm deploy the algo server the easiest way to get an algo server running is to let it set up a new virtual machine in the cloud for you setup an account on a cloud hosting provider algo supports digitalocean most user friendly amazon lightsail amazon ec2 microsoft azure google compute engine scaleway and openstack download algo unzip it in a convenient location on your local machine install algos core dependencies open the terminal the python interpreter you use to deploy algo must be python2 if you dont know what this means youre probably fine cd into the algo master directory where you unzipped algo then run macos bash python m ensurepip user python m pip install user upgrade virtualenv linux deb based bash sudo apt get update sudo apt get install \ build essential \ libssl dev \ libffi dev \ python dev \ python pip \ python setuptools \ python virtualenv y linux rpm based see the pre install documentation for redhat centos 6 x windows see the windows documentation install algos remaining dependencies use the same terminal window as the previous step and run bash python m virtualenv python which python2 env source env bin activate python m pip install u pip python m pip install r requirements txt on macos you may be prompted to install cc you should press accept if so list the users to create open config cfg in your favorite text editor specify the users you wish to create in the users list start the deployment return to your terminal in the algo directory run algo and follow the instructions there are several optional features available none are required for a fully functional vpn server these optional features are described in greater detail in deploy from ansible md thats it you will get the message below when the server deployment process completes you now have an algo server on the internet take note of the p12 user certificate password in case you need it later it will only be displayed this time you can now setup clients to connect it e g your iphone or laptop proceed to configure the vpn clients below \ \ \ congratulations \ \ your algo server is running \ \ config files and certificates are in the configs directory \ \ go to https whoer net after connecting \ \ and ensure that all your traffic passes through the vpn \ \ local dns resolver 172 16 0 1 \ \ the p12 and ssh keys password is xxxxxxxx \ \ \ configure the vpn clients certificates and configuration files that users will need are placed in the configs directory make sure to secure these files since many contain private keys all files are saved under a subdirectory named with the ip address of your new algo vpn server apple devices send users their apple profile find the corresponding mobileconfig apple profile for each user and send it to them over airdrop or other secure means apple configuration profiles are all in one configuration files for ios and macos devices on macos double clicking a profile to install it will fully configure the vpn on ios users are prompted to install the profile as soon as the airdrop is accepted turn on the vpn on ios connect to the vpn by opening settings and clicking the toggle next to vpn near the top of the list on macos connect to the vpn by opening system preferences network finding algo vpn in the left column and clicking connect on macos check show vpn status in menu bar to easily connect and disconnect from the menu bar managing on demand vpns if you enabled on demand the vpn will connect automatically whenever it is able on ios you can turn off on demand by clicking the i next to the entry for algo vpn and toggling off connect on demand on macos you can turn off on demand by opening the network preferences finding algo vpn in the left column and unchecking the box for connect on demand android devices wireguard is used to provide vpn services on android install the wireguard vpn client import the corresponding wireguard name conf file to your device then setup a new connection with it see the android setup instructions for more detailed walkthrough windows 10 copy your powershell script windows username ps1 to the windows client and run the following command as administrator to configure the vpn connection powershell executionpolicy bypass file windows username ps1 add for a manual installation see the windows setup instructions linux network manager clients e g ubuntu debian or fedora desktop network manager does not support aes gcm in order to support linux desktop clients choose the compatible cryptography during the deploy process and use at least network manager 1 4 1 see issue 263 for more information linux strongswan clients e g openwrt ubuntu server etc install strongswan then copy the included ipsec user conf ipsec user secrets user crt user certificate and user key private key files to your client device these will require customization based on your exact use case these files were originally generated with a point to point openwrt based vpn in mind ubuntu server 18 04 example sudo apt get install strongswan strongswan plugin openssl install strongswan etc ipsec d certs copy name crt from algo master configs server ip pki certs name crt etc ipsec d private copy name key from algo master configs server ip pki private name key etc ipsec d cacerts copy cacert pem from algo master configs server ip pki cacert pem etc ipsec secrets add your user key to the list e g server ip ecdsa name key etc ipsec conf add the connection from ipsec user conf and ensure leftcert matches the name crt filename sudo ipsec restart pick up config changes sudo ipsec up conn name start the ipsec tunnel sudo ipsec down conn name shutdown the ipsec tunnel one common use case is to let your server access your local lan without going through the vpn set up a passthrough connection by adding the following to etc ipsec conf conn lan passthrough leftsubnet 192 168 1 1 24 replace with your lan subnet rightsubnet 192 168 1 1 24 replac with your land subnet authby never no authentication necessary type pass passthrough auto route no need to ipsec up lan passthrough other devices depending on the platform you may need one or multiple of the following files cacert pem ca certificate user mobileconfig apple profile user p12 user certificate and private key in pkcs 12 format user sswan android strongswan profile ipsec user conf strongswan client configuration ipsec user secrets strongswan client configuration windows user ps1 powershell script to help setup a vpn connection on windows setup an ssh tunnel if you turned on the optional ssh tunneling role then local user accounts will be created for each user in config cfg and ssh authorized key files for them will be in the configs directory user ssh pem ssh user accounts do not have shell access cannot authenticate with a password and only have limited tunneling options e g ssh n is required this ensures that ssh users have the least access required to setup a tunnel and can perform no other actions on the algo server use the example command below to start an ssh tunnel by replacing user and ip with your own once the tunnel is setup you can configure a browser or other application to use 127 0 0 1 1080 as a socks proxy to route traffic through the algo server ssh d 127 0 0 1 1080 f q c n user ip i configs ip user ssh pem ssh into algo server to ssh into the algo server for administrative purposes you can use the example command below by replacing ip with your own ssh root ip i ssh algo pem if you find yourself regularly logging into algo then it will be useful to load your algo ssh key automatically add the following snippet to the bottom of bash profile to add it to your shell environment permanently ssh add ssh algo dev null 2 1 note the admin username is ubuntu instead of root on providers other than digital ocean adding or removing users if you chose the save the ca certificate during the deploy process then algos own scripts can easily add and remove users from the vpn server update the users list in your config cfg open a terminal cd to the algo directory and activate the virtual environment with source env bin activate run the command algo update users after this process completes the algo vpn server will contains only the users listed in the config cfg file additional documentation setup instructions documentation for available ansible roles deploy from fedora workstation 26 deploy from redhat centos 6 x deploy from windows deploy from ansible directly client setup setup android clients setup generic linux clients with ansible cloud setup configure azure configure digitalocean advanced deployment deploy to your own freebsd server deploy to your own ubuntu 18 04 server deploy to an unsupported cloud provider faq troubleshooting if you read all the documentation and have further questions join the chat on gitter endorsements ive been ranting about the sorry state of vpn svcs for so long probably about time to give a proper talk on the subject tl dr use algo kenn white before picking a vpn provider app make sure you do some research https research csiro au ng wp content uploads sites 106 2016 08 paper 1 pdf – or consider algo the register algo is really easy and secure the grugq i played around with algo vpn a set of scripts that let you set up a vpn in the cloud in very little time even if you dont know much about development ive got to say that i was quite impressed with trail of bits approach romain dillet for techcrunch if youre uncomfortable shelling out the cash to an anonymous random vpn provider this is the best solution thorin klosowski for lifehacker support algo vpn all donations support continued development thanks we accept donations via paypal patreon and flattr use our referral code when you sign up to digital ocean for a 10 credit we also accept and appreciate contributions of new code and bugfixes via github pull requests