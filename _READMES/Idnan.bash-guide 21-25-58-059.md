table of contents basic operations 1 1 file operations 1 2 text operations 1 3 directory operations 1 4 ssh system info network operations 1 5 process monitoring operations basic shell programming 2 1 variables 2 2 array 2 3 string substitution 2 4 functions 2 5 conditionals 2 6 loops tricks debugging 1 basic operations a export displays all environment variables if you want to get details of a specific variable use echo variable name bash export example bash export aws home users adnanadnan aws lang en us utf 8 lc ctype en us utf 8 less r echo aws home users adnanadnan aws b whatis whatis shows description for user commands system calls library functions and others in manual pages bash whatis something example bash whatis bash bash 1 gnu bourne again shell c whereis whereis searches for executables source files and manual pages using a database built by system automatically bash whereis name example bash whereis php usr bin php d which which searches for executables in the directories specified by the environment variable path this command will print the full path of the executable s bash which program name example bash which php c xampp php php e clear clears content on window 1 1 file operations cat chmod chown cp diff file find gunzip gzcat gzip head lpq lpr lprm ls more mv rm tail touch a cat it can be used for the following purposes under unix or linux display text files on screen copy text files combine text files create new text files bash cat filename cat file1 file2 cat file1 file2 newcombinedfile cat file1 file2 copy file1 to file2 b chmod the chmod command stands for change mode and allows you to change the read write and execute permissions on your files and folders for more information on this command check this link bash chmod options filename c chown the chown command stands for change owner and allows you to change the owner of a given file or folder which can be a user and a group basic usage is simple forward first comes the user owner and then the group delimited by a colon bash chown options user group filename d cp copies a file from one location to other bash cp filename1 filename2 where filename1 is the source path to the file and filename2 is the destination path to the file e diff compares files and lists their differences bash diff filename1 filename2 f file determine file type bash file filename example bash file index html index html html document ascii text g find find files in directory bash find directory options pattern example bash find name readme md find home user1 name png h gunzip un compresses files compressed by gzip bash gunzip filename i gzcat lets you look at gzipped file without actually having to gunzip it bash gzcat filename j gzip compresses files bash gzip filename k head outputs the first 10 lines of file bash head filename l lpq check out the printer queue bash lpq example bash lpq rank owner job file s total size active adnanad 59 demo 399360 bytes 1st adnanad 60 stdin 0 bytes m lpr print the file bash lpr filename n lprm remove something from the printer queue bash lprm jobnumber o ls lists your files ls has many options l lists files in long format which contains the exact size of the file who owns the file who has the right to look at it and when it was last modified a lists all files including hidden files for more information on this command check this link bash ls option example ls la rwxr xr x 33 adnan staff 1122 mar 27 18 44 drwxrwxrwx 60 adnan staff 2040 mar 21 15 06 rw r r 1 adnan staff 14340 mar 23 15 05 ds store rw r r 1 adnan staff 157 mar 25 18 08 bumpversion cfg rw r r 1 adnan staff 6515 mar 25 18 08 config ini rw r r 1 adnan staff 5805 mar 27 18 44 config override ini drwxr xr x 17 adnan staff 578 mar 27 23 36 git rwxr xr x 1 adnan staff 2702 mar 25 18 08 gitignore p more shows the first part of a file move with space and type q to quit bash more filename q mv moves a file from one location to other bash mv filename1 filename2 where filename1 is the source path to the file and filename2 is the destination path to the file also it can be used for rename a file bash mv old name new name r rm removes a file using this command on a directory gives you an error rm directory is a directory to remove a directory you have to pass r which will remove the content of the directory recursively optionally you can use f flag to force the deletion i e without any confirmations etc bash rm filename s tail outputs the last 10 lines of file use f to output appended data as the file grows bash tail filename t touch updates access and modification time stamps of your file if it doesnt exists itll be created bash touch filename example bash touch trick md 1 2 text operations awk cut echo egrep fgrep fmt grep nl sed sort tr uniq wc a awk awk is the most useful command for handling text files it operates on an entire file line by line by default it uses whitespace to separate the fields the most common syntax for awk command is bash awk search pattern action to take if pattern matches file to parse lets take following file etc passwd heres the sample data that this file contains root x 0 0 root root usr bin zsh daemon x 1 1 daemon usr sbin usr sbin nologin bin x 2 2 bin bin usr sbin nologin sys x 3 3 sys dev usr sbin nologin sync x 4 65534 sync bin bin sync so now lets get only username from this file where f specifies that on which base we are going to separate the fields in our case its print 1 means print out the first matching field bash awk f print 1 etc passwd after running the above command you will get following output root daemon bin sys sync for more detail on how to use awk check following link b cut remove sections from each line of files example txt bash red riding hood went to the park to play show me columns 2 7 and 9 with a space as a separator bash cut d f2 7 9 example txt bash riding park play c echo display a line of text display hello world bash echo hello world bash hello world display hello world with newlines between words bash echo ne hello\nworld\n bash hello world d egrep print lines matching a pattern extended expression alias for grep e example txt bash lorem ipsum dolor sit amet consetetur sadipscing elitr sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat sed diam voluptua at vero eos et accusam et justo duo dolores et ea rebum stet clita kasd gubergren no sea takimata sanctus est lorem ipsum dolor sit amet display lines that have either lorem or dolor in them bash egrep lorem dolor example txt or grep e lorem dolor example txt bash lorem ipsum dolor sit amet et dolore magna duo dolores et ea sanctus est lorem ipsum dolor sit e fgrep print lines matching a pattern fixed pattern matching alias for grep f example txt bash lorem ipsum dolor sit amet consetetur sadipscing elitr sed diam nonumy eirmod tempor foo lorem dolor invidunt ut labore et dolore magna aliquyam erat sed diam voluptua at vero eos et accusam et justo duo dolores et ea rebum stet clita kasd gubergren no sea takimata sanctus est lorem ipsum dolor sit amet find the exact string lorem dolor in example txt bash fgrep lorem dolor example txt or grep f lorem dolor example txt bash foo lorem dolor f fmt simple optimal text formatter example example txt 1 line bash lorem ipsum dolor sit amet consetetur sadipscing elitr sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat sed diam voluptua at vero eos et accusam et justo duo dolores et ea rebum stet clita kasd gubergren no sea takimata sanctus est lorem ipsum dolor sit amet output the lines of example txt to 20 character width bash cat example txt fmt w 20 bash lorem ipsum dolor sit amet consetetur sadipscing elitr sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat sed diam voluptua at vero eos et accusam et justo duo dolores et ea rebum stet clita kasd gubergren no sea takimata sanctus est lorem ipsum dolor sit amet g grep looks for text inside files you can use grep to search for lines of text that match one or many regular expressions and outputs only the matching lines bash grep pattern filename example bash grep admin etc passwd kadmin admin 218 2 kerberos admin service var empty usr bin false kadmin changepw 219 2 kerberos change password service var empty usr bin false krb kadmin 231 2 open directory kerberos admin service var empty usr bin false you can also force grep to ignore word case by using i option r can be used to search all files under the specified directory for example bash grep r admin etc and w to search for words only for more detail on grep check following link h nl number lines of files example txt bash lorem ipsum dolor sit amet consetetur sadipscing elitr sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat sed diam voluptua at vero eos et accusam et justo duo dolores et ea rebum stet clita kasd gubergren no sea takimata sanctus est lorem ipsum dolor sit amet show example txt with line numbers bash nl s example txt bash 1 lorem ipsum 2 dolor sit amet 3 consetetur 4 sadipscing elitr 5 sed diam nonumy 6 eirmod tempor 7 invidunt ut labore 8 et dolore magna 9 aliquyam erat sed 10 diam voluptua at 11 vero eos et 12 accusam et justo 13 duo dolores et ea 14 rebum stet clita 15 kasd gubergren 16 no sea takimata 17 sanctus est lorem 18 ipsum dolor sit 19 amet i sed stream editor for filtering and transforming text example txt bash hello this is a test 1 2 3 4 replace all spaces with hyphens bash sed s g example txt bash hello this is a test 1 2 3 4 replace all digits with d bash sed s 0 9 d g example txt bash hello this is a test d d d d j sort sort lines of text files example txt bash f b c g a e d sort example txt bash sort example txt bash a b c d e f g randomize a sorted example txt bash sort example txt sort r bash b f a c d g e k tr translate or delete characters example txt bash hello world foo bar baz take all lower case letters and make them upper case bash cat example txt tr a z a z bash hello world foo bar baz take all spaces and make them into newlines bash cat example txt tr \n bash hello world foo bar baz l uniq report or omit repeated lines example txt bash a a b a b c d c show only unique lines of example txt first you need to sort it otherwise it wont see the overlap bash sort example txt uniq bash a b c d show the unique items for each line and tell me how many instances it found bash sort example txt uniq c bash 3 a 2 b 2 c 1 d m wc tells you how many lines words and characters there are in a file bash wc filename example bash wc demo txt 7459 15915 398400 demo txt where 7459 is lines 15915 is words and 398400 is characters 1 3 directory operations cd mkdir pwd a cd moves you from one directory to other running this bash cd moves you to home directory this command accepts an optional dirname which moves you to that directory bash cd dirname b mkdir makes a new directory bash mkdir dirname c pwd tells you which directory you currently are in bash pwd 1 4 ssh system info network operations bg cal date df dig du fg finger jobs last man passwd ping ps quota scp ssh top uname uptime w wget whoami whois a bg lists stopped or background jobs resume a stopped job in the background b cal shows the months calendar c date shows the current date and time d df shows disk usage e dig gets dns information for domain bash dig domain f du shows the disk usage of files or directories for more information on this command check this link bash du option filename directory options h human readable displays output it in kilobytes k megabytes m and gigabytes g s supress or summarize outputs total disk space of a directory and supresses reports for subdirectories example bash du sh pictures 1 4m pictures g fg brings the most recent job in the foreground h finger displays information about user bash finger username i jobs lists the jobs running in the background giving the job number j last lists your last logins of specified user bash last yourusername k man shows the manual for specified command bash man command l passwd allows the current logged user to change their password m ping pings host and outputs results bash ping host n ps lists your processes bash ps u yourusername use the flags ef e for every process and f for full listing bash ps ef o quota shows what your disk quota is bash quota v p scp transfer files between a local host and a remote host or between two remote hosts copy from local host to remote host bash scp source file user host directory target file copy from remote host to local host bash scp user host directory source file target file scp r user host directory source folder target folder this command also accepts an option p that can be used to connect to specific port bash scp p port user host directory source file target file q ssh ssh ssh client is a program for logging into and executing commands on a remote machine bash ssh user host this command also accepts an option p that can be used to connect to specific port bash ssh p port user host r top displays your currently active processes s uname shows kernel information bash uname a t uptime shows current uptime u w displays who is online v wget downloads file bash wget file w whoami return current logged in username x whois gets whois information for domain bash whois domain 1 5 process monitoring operations kill killall nohup a kill kills ends the processes with the id you gave bash kill pid b killall kill all processes with the name bash killall processname c the symbol instructs the command to run as a background process in a subshell bash command d nohup nohup stands for no hang up this allows to run command process or shell script that can continue running in the background after you log out from a shell bash nohup command combine it with to create background processes bash nohup command 2 basic shell programming the first line that you will write in bash script files is called shebang this line in any script determines the scripts ability to be executed like a standalone executable without typing sh bash python php etc beforehand in the terminal bash usr bin env bash 2 1 variables creating variables in bash is similar to other languages there are no data types a variable in bash can contain a number a character a string of characters etc you have no need to declare a variable just assigning a value to its reference will create it example bash str hello world the above line creates a variable str and assigns hello world to it the value of variable is retrieved by putting the in the beginning of variable name example bash echo str hello world 2 2 array like other languages bash has also arrays an array is variable containing multiple values theres no maximum limit on the size of array array in bash are zero based the first element is indexed with element 0 there are several ways for creating arrays in bash which are given below examples bash array 0 val array 1 val array 2 val array 2 val 0 val 1 val array val val val to display a value at specific index use following syntax bash array i where i is the index if no index is supplied array element 0 is assumed to find out how many values there are in the array use the following syntax bash array bash has also support for the ternary conditions check some examples below bash varname word if varname exists and isnt null return its value otherwise return word varname word if varname exists and isnt null return its value otherwise set it word and then return its value varname word if varname exists and isnt null return word otherwise return null varname offset length performs substring expansion it returns the substring of varname starting at offset and up to length characters 2 3 string substitution check some of the syntax on how to manipulate strings bash variable pattern if the pattern matches the beginning of the variables value delete the shortest part that matches and return the rest variable pattern if the pattern matches the beginning of the variables value delete the longest part that matches and return the rest variable pattern if the pattern matches the end of the variables value delete the shortest part that matches and return the rest variable pattern if the pattern matches the end of the variables value delete the longest part that matches and return the rest variable pattern string the longest match to pattern in variable is replaced by string only the first match is replaced variable pattern string the longest match to pattern in variable is replaced by string all matches are replaced varname returns the length of the value of the variable as a character string 2 4 functions as in almost any programming language you can use functions to group pieces of code in a more logical way or practice the divine art of recursion declaring a function is just a matter of writing function my func my code calling a function is just like calling another program you just write its name bash function name shell commands example bash bin bash function hello echo world hello function say echo 1 say hello world when you run the above example the hello function will output world the above two functions hello and say are identical the main difference is function say this function prints the first argument it receives arguments within functions are treated in the same manner as arguments given to the script 2 5 conditionals the conditional statement in bash is similar to other programming languages conditions have many form like the most basic form is if expression then statement where statement is only executed if expression is true bash if expression then will execute only if expression is true else will execute if expression is false fi sometime if conditions becoming confusing so you can write the same condition using the case statements bash case expression in pattern1 statements pattern2 statements esac expression examples bash statement1 statement2 both statements are true statement1 statement2 at least one of the statements is true str1 str2 str1 matches str2 str1 str2 str1 does not match str2 str1str2 str1 is greater than str2 n str1 str1 is not null has length greater than 0 z str1 str1 is null has length 0 a file file exists d file file exists and is a directory e file file exists same a f file file exists and is a regular file i e not a directory or other special type of file r file you have read permission s file file exists and is not empty w file you have write permission x file you have execute permission on file or directory search permission if it is a directory n file file was modified since it was last read o file you own file g file files group id matches yours or one of yours if you are in multiple groups file1 nt file2 file1 is newer than file2 file1 ot file2 file1 is older than file2 lt less than le less than or equal eq equal ge greater than or equal gt greater than ne not equal 2 6 loops there are three types of loops in bash for while and until different for syntax bash for x 1 to 10 do begin statements end for name in list do statements that can use name done for initialisation ending condition update do statements done while syntax bash while condition do statements done until syntax bash until condition do statements done 3 tricks set an alias open bash profile by running following command nano bash profile alias dockerlogin ssh www data adnan local p2222 add your alias in bash profile to quickly go to a specific directory nano bashrc export hotellogs workspace hotel api storage logs bash source bashrc cd hotellogs exit traps make your bash scripts more robust by reliably performing cleanup bash function finish your cleanup here e g kill any forked processes jobs p xargs kill trap finish exit saving your environment variables when you do export foo bar your variable is only exported in this current shell and all its children to persist in the future you can simply append in your bash profile file the command to export your variable bash echo export foo bar bash profile accessing your scripts you can easily access your scripts by creating a bin folder in your home with mkdir bin now all the scripts you put in this folder you can access in any directory if you can not access try append the code below in your bash profile file and after do source bash profile bash set path so it includes users private bin if it exists if d home bin then path home bin path fi 4 debugging you can easily debug the bash script by passing different options to bash command for example n will not run commands and check for syntax errors only v echo commands before running them x echo commands after command line processing bash bash n scriptname bash v scriptname bash x scriptname contribution report issues how to open pull request with improvements how to spread the word translation chinese 简体中文 turkish türkçe japanese 日本語 license