webviewjavascriptbridge an ios osx bridge for sending messages between obj c and javascript in wkwebviews uiwebviews webviews migration guide when upgrading from v5 0 x to 6 0 x you will have to update the setupwebviewjavascriptbridge javascript snippet see https github com marcuswestin webviewjavascriptbridge usage part 4 who uses webviewjavascriptbridge webviewjavascriptbridge is used by a range of companies and projects this is a small and incomplete sample list facebook messenger facebook paper yardsale evertrue game insight sush io imbed carezone hemlig altralogica 鼎盛中华 fril 留白·white browzine many more installation ios osx installation with cocoapods add this to your podfile and run pod install to install ruby pod webviewjavascriptbridge 6 0 manual installation drag the webviewjavascriptbridge folder into your project in the dialog that appears uncheck copy items into destination groups folder and select create groups for any folders examples see the example apps folder open either the ios or osx project and hit run to see it in action to use a webviewjavascriptbridge in your own project usage 1 import the header file and declare an ivar property objc import webviewjavascriptbridge h objc property webviewjavascriptbridge bridge 2 instantiate webviewjavascriptbridge with a wkwebview uiwebview ios or webview osx objc self bridge webviewjavascriptbridge bridgeforwebview webview 3 register a handler in objc and call a js handler objc self bridge registerhandler objc echo handler id data wvjbresponsecallback responsecallback nslog objc echo called with data responsecallback data self bridge callhandler js echo data nil responsecallback id responsedata nslog objc received response responsedata 4 copy and paste setupwebviewjavascriptbridge into your js javascript function setupwebviewjavascriptbridge callback if window webviewjavascriptbridge return callback webviewjavascriptbridge if window wvjbcallbacks return window wvjbcallbacks push callback window wvjbcallbacks callback var wvjbiframe document createelement iframe wvjbiframe style display none wvjbiframe src https bridge loaded document documentelement appendchild wvjbiframe settimeout function document documentelement removechild wvjbiframe 0 5 finally call setupwebviewjavascriptbridge and then use the bridge to register handlers and call objc handlers javascript setupwebviewjavascriptbridge function bridge initialize your app here bridge registerhandler js echo function data responsecallback console log js echo called with data responsecallback data bridge callhandler objc echo key value function responsecallback responsedata console log js received response responsedata automatic reference counting arc this library relies on arc so if you use arc in you project all works fine but if your project have no arc support be sure to do next steps 1 in your xcode project open project settings build phases 2 expand compile sources header and find all m files which are belongs to this library make attention on the compiler flags in front of each source file in this list 3 for each file add fobjc arc flag now all wvjb files will be compiled with arc support contributors forks contributors https github com marcuswestin webviewjavascriptbridge graphs contributors forks https github com marcuswestin webviewjavascriptbridge network members api reference objc api webviewjavascriptbridge bridgeforwebview wkwebview uiwebview webview webview create a javascript bridge for the given web view example objc webviewjavascriptbridge bridgeforwebview webview bridge registerhandler nsstring handlername handler wvjbhandler handler register a handler called handlername the javascript can then call this handler with webviewjavascriptbridge callhandler handlername example objc self bridge registerhandler getscreenheight handler id data wvjbresponsecallback responsecallback responsecallback nsnumber numberwithint uiscreen mainscreen bounds size height self bridge registerhandler log handler id data wvjbresponsecallback responsecallback nslog log data bridge callhandler nsstring handlername data id data bridge callhandler nsstring handlername data id data responsecallback wvjbresponsecallback callback call the javascript handler called handlername if a responsecallback block is given the javascript handler can respond example objc self bridge callhandler showalert data hi from objc to js self bridge callhandler getcurrentpageurl data nil responsecallback id responsedata nslog current uiwebview page url is responsedata bridge setwebviewdelegate id webviewdelegate optionally set a wknavigationdelegate uiwebviewdelegate if you need to respond to the web views lifecycle events bridge disablejavscriptalertboxsafetytimeout unsafe speed up bridge message passing by disabling the settimeout safety check it is only safe to disable this safety check if you do not call any of the javascript popup box functions alert confirm and prompt if you call any of these functions from the bridged javascript code the app will hang example self bridge disablejavscriptalertboxsafetytimeout javascript api bridge registerhandler handlername function responsedata register a handler called handlername the objc can then call this handler with bridge callhandler handlername data foo and bridge callhandler handlername data foo responsecallback id responsedata example javascript bridge registerhandler showalert function data alert data bridge registerhandler getcurrentpageurl function data responsecallback responsecallback document location tostring bridge callhandler handlername data bridge callhandler handlername data function responsecallback responsedata call an objc handler called handlername if a responsecallback function is given the objc handler can respond example javascript bridge callhandler log foo bridge callhandler getscreenheight null function response alert screen height response bridge disablejavscriptalertboxsafetytimeout calling bridge disablejavscriptalertboxsafetytimeout has the same effect as calling bridge disablejavscriptalertboxsafetytimeout in objc example javascript bridge disablejavscriptalertboxsafetytimeout