mysql table of contents install introduction contributors sponsors community establishing connections connection options ssl options terminating connections pooling connections pool options pool events closing all the connections in a pool poolcluster poolcluster options switching users and altering connection state server disconnects performing queries escaping query values escaping query identifiers preparing queries custom format getting the id of an inserted row getting the number of affected rows getting the number of changed rows getting the connection id executing queries in parallel streaming query rows piping results with streams multiple statement queries stored procedures joins with overlapping column names transactions ping timeouts error handling exception safety type casting connection flags debugging and reporting problems security issues contributing running tests todo install this is a node js module available through the npm registry before installing download and install node js node js 0 6 or higher is required installation is done using the npm install command sh npm install mysql for information about the previous 0 9 x releases visit the v0 9 branch sometimes i may also ask you to install the latest version from github to check if a bugfix is working in this case please do sh npm install mysqljs mysql introduction this is a node js driver for mysql it is written in javascript does not require compiling and is 100 mit licensed here is an example on how to use it js var mysql require mysql var connection mysql createconnection host localhost user me password secret database my db connection connect connection query select 1 1 as solution function error results fields if error throw error console log the solution is results 0 solution connection end from this example you can learn the following every method you invoke on a connection is queued and executed in sequence closing the connection is done using end which makes sure all remaining queries are executed before sending a quit packet to the mysql server contributors thanks goes to the people who have contributed code to this module see the github contributors page additionally id like to thank the following people andrey hristov oracle for helping me with protocol questions ulf wendel oracle for helping me with protocol questions sponsors the following companies have supported this project financially allowing me to spend more time on it ordered by time of contribution transloadit my startup we do file uploading video encoding as a service check it out joyent pinkbike com holiday extras they are hiring newscope they are hiring community if youd like to discuss this module or ask questions about it please use one of the following mailing list https groups google com forum forum node mysql irc channel node js on freenode net i pay attention to any message including the term mysql establishing connections the recommended way to establish a connection is this js var mysql require mysql var connection mysql createconnection host example org user bob password secret connection connect function err if err console error error connecting err stack return console log connected as id connection threadid however a connection can also be implicitly established by invoking a query js var mysql require mysql var connection mysql createconnection connection query select 1 function error results fields if error throw error connected depending on how you like to handle your errors either method may be appropriate any type of connection error handshake or network is considered a fatal error see the error handling section for more information connection options when establishing a connection you can set the following options host the hostname of the database you are connecting to default localhost port the port number to connect to default 3306 localaddress the source ip address to use for tcp connection optional socketpath the path to a unix domain socket to connect to when used host and port are ignored user the mysql user to authenticate as password the password of that mysql user database name of the database to use for this connection optional charset the charset for the connection this is called collation in the sql level of mysql like utf8 general ci if a sql level charset is specified like utf8mb4 then the default collation for that charset is used default utf8 general ci timezone the timezone configured on the mysql server this is used to type cast server date time values to javascript date object and vice versa this can be local z or an offset in the form hh mm or hh mm default local connecttimeout the milliseconds before a timeout occurs during the initial connection to the mysql server default 10000 stringifyobjects stringify objects instead of converting to values see issue 501 default false insecureauth allow connecting to mysql instances that ask for the old insecure authentication method default false typecast determines if column values should be converted to native javascript types default true queryformat a custom query format function see custom format supportbignumbers when dealing with big numbers bigint and decimal columns in the database you should enable this option default false bignumberstrings enabling both supportbignumbers and bignumberstrings forces big numbers bigint and decimal columns to be always returned as javascript string objects default false enabling supportbignumbers but leaving bignumberstrings disabled will return big numbers as string objects only when they cannot be accurately represented with javascript number objects http ecma262 5 com els5 html htm section 8 5 which happens when they exceed the 2 53 2 53 range otherwise they will be returned as number objects this option is ignored if supportbignumbers is disabled datestrings force date types timestamp datetime date to be returned as strings rather then inflated into javascript date objects can be true false or an array of type names to keep as strings default false debug prints protocol details to stdout can be true false or an array of packet type names that should be printed default false trace generates stack traces on error to include call site of library entrance long stack traces slight performance penalty for most calls default true multiplestatements allow multiple mysql statements per query be careful with this it could increase the scope of sql injection attacks default false flags list of connection flags to use other than the default ones it is also possible to blacklist default ones for more information check connection flags ssl object with ssl parameters or a string containing name of ssl profile see ssl options in addition to passing these options as an object you can also use a url string for example js var connection mysql createconnection mysql user pass host db debug true charset big5 chinese ci timezone 0700 note the query values are first attempted to be parsed as json and if that fails assumed to be plaintext strings ssl options the ssl option in the connection options takes a string or an object when given a string it uses one of the predefined ssl profiles included the following profiles are included amazon rds this profile is for connecting to an amazon rds server and contains the certificates from https rds amazonaws com doc rds ssl ca cert pem and https s3 amazonaws com rds downloads rds combined ca bundle pem when connecting to other servers you will need to provide an object of options in the same format as tls createsecurecontext please note the arguments expect a string of the certificate not a file name to the certificate here is a simple example js var connection mysql createconnection host localhost ssl ca fs readfilesync dirname mysql ca crt you can also connect to a mysql server without properly providing the appropriate ca to trust you should not do this js var connection mysql createconnection host localhost ssl do not do this set up your ca correctly to trust the connection rejectunauthorized false terminating connections there are two ways to end a connection terminating a connection gracefully is done by calling the end method js connection end function err the connection is terminated now this will make sure all previously enqueued queries are still before sending a com quit packet to the mysql server if a fatal error occurs before the com quit packet can be sent an err argument will be provided to the callback but the connection will be terminated regardless of that an alternative way to end the connection is to call the destroy method this will cause an immediate termination of the underlying socket additionally destroy guarantees that no more events or callbacks will be triggered for the connection js connection destroy unlike end the destroy method does not take a callback argument pooling connections rather than creating and managing connections one by one this module also provides built in connection pooling using mysql createpool config read more about connection pooling create a pool and use it directly js var mysql require mysql var pool mysql createpool connectionlimit 10 host example org user bob password secret database my db pool query select 1 1 as solution function error results fields if error throw error console log the solution is results 0 solution this is a shortcut for the pool getconnection connection query connection release code flow using pool getconnection is useful to share connection state for subsequent queries this is because two calls to pool query may use two different connections and run in parallel this is the basic structure js var mysql require mysql var pool mysql createpool pool getconnection function err connection if err throw err not connected use the connection connection query select something from sometable function error results fields when done with the connection release it connection release handle error after the release if error throw error dont use the connection here it has been returned to the pool if you would like to close the connection and remove it from the pool use connection destroy instead the pool will create a new connection the next time one is needed connections are lazily created by the pool if you configure the pool to allow up to 100 connections but only ever use 5 simultaneously only 5 connections will be made connections are also cycled round robin style with connections being taken from the top of the pool and returning to the bottom when a previous connection is retrieved from the pool a ping packet is sent to the server to check if the connection is still good pool options pools accept all the same options as a connection when creating a new connection the options are simply passed to the connection constructor in addition to those options pools accept a few extras acquiretimeout the milliseconds before a timeout occurs during the connection acquisition this is slightly different from connecttimeout because acquiring a pool connection does not always involve making a connection default 10000 waitforconnections determines the pools action when no connections are available and the limit has been reached if true the pool will queue the connection request and call it when one becomes available if false the pool will immediately call back with an error default true connectionlimit the maximum number of connections to create at once default 10 queuelimit the maximum number of connection requests the pool will queue before returning an error from getconnection if set to 0 there is no limit to the number of queued connection requests default 0 pool events acquire the pool will emit an acquire event when a connection is acquired from the pool this is called after all acquiring activity has been performed on the connection right before the connection is handed to the callback of the acquiring code js pool on acquire function connection console log connection d acquired connection threadid connection the pool will emit a connection event when a new connection is made within the pool if you need to set session variables on the connection before it gets used you can listen to the connection event js pool on connection function connection connection query set session auto increment increment 1 enqueue the pool will emit an enqueue event when a callback has been queued to wait for an available connection js pool on enqueue function console log waiting for available connection slot release the pool will emit a release event when a connection is released back to the pool this is called after all release activity has been performed on the connection so the connection will be listed as free at the time of the event js pool on release function connection console log connection d released connection threadid closing all the connections in a pool when you are done using the pool you have to end all the connections or the node js event loop will stay active until the connections are closed by the mysql server this is typically done if the pool is used in a script or when trying to gracefully shutdown a server to end all the connections in the pool use the end method on the pool js pool end function err all connections in the pool have ended the end method takes an optional callback that you can use to know when all the connections are ended once pool end is called pool getconnection and other operations can no longer be performed wait until all connections in the pool are released before calling pool end if you use the shortcut method pool query in place of pool getconnection → connection query → connection release wait until it completes pool end calls connection end on every active connection in the pool this queues a quit packet on the connection and sets a flag to prevent pool getconnection from creating new connections all commands queries already in progress will complete but new commands wont execute poolcluster poolcluster provides multiple hosts connection group retry selector js create var poolcluster mysql createpoolcluster add configurations the config is a pool config object poolcluster add config add configuration with automatic name poolcluster add master masterconfig add a named configuration poolcluster add slave1 slave1config poolcluster add slave2 slave2config remove configurations poolcluster remove slave2 by nodeid poolcluster remove slave by target group slave1 2 target group all anonymous master slave1 2 selector round robin default poolcluster getconnection function err connection target group master selector round robin poolcluster getconnection master function err connection target group slave1 2 selector order if cant connect to slave1 return slave2 remove slave1 in the cluster poolcluster on remove function nodeid console log removed node nodeid nodeid slave1 a pattern can be passed with as wildcard poolcluster getconnection slave order function err connection the pattern can also be a regular expression poolcluster getconnection slave 12 function err connection of namespace of pattern selector poolcluster of getconnection function err connection var pool poolcluster of slave random pool getconnection function err connection pool getconnection function err connection pool query function error results fields close all connections poolcluster end function err all connections in the pool cluster have ended poolcluster options canretry if true poolcluster will attempt to reconnect when connection fails default true removenodeerrorcount if connection fails nodes errorcount increases when errorcount is greater than removenodeerrorcount remove a node in the poolcluster default 5 restorenodetimeout if connection fails specifies the number of milliseconds before another connection attempt will be made if set to 0 then node will be removed instead and never re used default 0 defaultselector the default selector default rr rr select one alternately round robin random select the node by random function order select the first node available unconditionally js var clusterconfig removenodeerrorcount 1 remove the node immediately when connection fails defaultselector order var poolcluster mysql createpoolcluster clusterconfig switching users and altering connection state mysql offers a changeuser command that allows you to alter the current user and other aspects of the connection without shutting down the underlying socket js connection changeuser user john function err if err throw err the available options for this feature are user the name of the new user defaults to the previous one password the password of the new user defaults to the previous one charset the new charset defaults to the previous one database the new database defaults to the previous one a sometimes useful side effect of this functionality is that this function also resets any connection state variables transactions etc errors encountered during this operation are treated as fatal connection errors by this module server disconnects you may lose the connection to a mysql server due to network problems the server timing you out the server being restarted or crashing all of these events are considered fatal errors and will have the err code protocol connection lost see the error handling section for more information re connecting a connection is done by establishing a new connection once terminated an existing connection object cannot be re connected by design with pool disconnected connections will be removed from the pool freeing up space for a new connection to be created on the next getconnection call performing queries the most basic way to perform a query is to call the query method on an object like a connection pool or poolnamespace instance the simplest form of query is query sqlstring callback where a sql string is the first argument and the second is a callback js connection query select from books where author david function error results fields error will be an error if one occurred during the query results will contain the results of the query fields will contain information about the returned results fields if any the second form query sqlstring values callback comes when using placeholder values see escaping query values js connection query select from books where author david function error results fields error will be an error if one occurred during the query results will contain the results of the query fields will contain information about the returned results fields if any the third form query options callback comes when using various advanced options on the query like escaping query values joins with overlapping column names timeouts and type casting js connection query sql select from books where author timeout 40000 40s values david function error results fields error will be an error if one occurred during the query results will contain the results of the query fields will contain information about the returned results fields if any note that a combination of the second and third forms can be used where the placeholder values are passed as an argument and not in the options object the values argument will override the values in the option object js connection query sql select from books where author timeout 40000 40s david function error results fields error will be an error if one occurred during the query results will contain the results of the query fields will contain information about the returned results fields if any if the query only has a single replacement character and the value is not null undefined or an array it can be passed directly as the second argument to query js connection query select from books where author david function error results fields error will be an error if one occurred during the query results will contain the results of the query fields will contain information about the returned results fields if any escaping query values caution these methods of escaping values only works when the no backslash escapes sql mode is disabled which is the default state for mysql servers in order to avoid sql injection attacks you should always escape any user provided data before using it inside a sql query you can do so using the mysql escape connection escape or pool escape methods js var userid some user provided value var sql select from users where id connection escape userid connection query sql function error results fields if error throw error alternatively you can use characters as placeholders for values you would like to have escaped like this js connection query select from users where id userid function error results fields if error throw error multiple placeholders are mapped to values in the same order as passed for example in the following query foo equals a bar equals b baz equals c and id will be userid js connection query update users set foo bar baz where id a b c userid function error results fields if error throw error this looks similar to prepared statements in mysql however it really just uses the same connection escape method internally caution this also differs from prepared statements in that all are replaced even those contained in comments and strings different value types are escaped differently here is how numbers are left untouched booleans are converted to true false date objects are converted to yyyy mm dd hh ii ss strings buffers are converted to hex strings e g x0fa5 strings are safely escaped arrays are turned into list e g a b turns into a b nested arrays are turned into grouped lists for bulk inserts e g a b c d turns into a b c d objects that have a tosqlstring method will have tosqlstring called and the returned value is used as the raw sql objects are turned into key val pairs for each enumerable property on the object if the propertys value is a function it is skipped if the propertys value is an object tostring is called on it and the returned value is used undefined null are converted to null nan infinity are left as is mysql does not support these and trying to insert them as values will trigger mysql errors until they implement support this escaping allows you to do neat things like this js var post id 1 title hello mysql var query connection query insert into posts set post function error results fields if error throw error neat console log query sql insert into posts set id 1 title hello mysql and the tosqlstring method allows you to form complex queries with functions js var current timestamp tosqlstring function return current timestamp var sql mysql format update posts set modified where id current timestamp 42 console log sql update posts set modified current timestamp where id 42 to generate objects with a tosqlstring method the mysql raw method can be used this creates an object that will be left un touched when using in a placeholder useful for using functions as dynamic values caution the string provided to mysql raw will skip all escaping functions when used so be careful when passing in unvalidated input js var current timestamp mysql raw current timestamp var sql mysql format update posts set modified where id current timestamp 42 console log sql update posts set modified current timestamp where id 42 if you feel the need to escape queries by yourself you can also use the escaping function directly js var query select from posts where title mysql escape hello mysql console log query select from posts where title hello mysql escaping query identifiers if you cant trust an sql identifier database table column name because it is provided by a user you should escape it with mysql escapeid identifier connection escapeid identifier or pool escapeid identifier like this js var sorter date var sql select from posts order by connection escapeid sorter connection query sql function error results fields if error throw error it also supports adding qualified identifiers it will escape both parts js var sorter date var sql select from posts order by connection escapeid posts sorter select from posts order by posts date if you do not want to treat as qualified identifiers you can set the second argument to true in order to keep the string as a literal identifier js var sorter date 2 var sql select from posts order by connection escapeid sorter true select from posts order by date 2 alternatively you can use characters as placeholders for identifiers you would like to have escaped like this js var userid 1 var columns username email var query connection query select from where id columns users userid function error results fields if error throw error console log query sql select username email from users where id 1 please note that this last character sequence is experimental and syntax might change when you pass an object to escape or query escapeid is used to avoid sql injection in object keys preparing queries you can use mysql format to prepare a query with multiple insertion points utilizing the proper escaping for ids and values a simple example of this follows js var sql select from where var inserts users id userid sql mysql format sql inserts following this you then have a valid escaped query that you can then send to the database safely this is useful if you are looking to prepare the query before actually sending it to the database as mysql format is exposed from sqlstring format you also have the option but are not required to pass in stringifyobject and timezone allowing you provide a custom means of turning objects into strings as well as a location specific timezone aware date custom format if you prefer to have another type of query escape format theres a connection configuration option you can use to define a custom format function you can access the connection object if you want to use the built in escape or any other connection function heres an example of how to implement another format js connection config queryformat function query values if values return query return query replace \ \w g function txt key if values hasownproperty key return this escape values key return txt bind this connection query update posts set title title title hello mysql getting the id of an inserted row if you are inserting a row into a table with an auto increment primary key you can retrieve the insert id like this js connection query insert into posts set title test function error results fields if error throw error console log results insertid when dealing with big numbers above javascript number precision limit you should consider enabling supportbignumbers option to be able to read the insert id as a string otherwise it will throw an error this option is also required when fetching big numbers from the database otherwise you will get values rounded to hundreds or thousands due to the precision limit getting the number of affected rows you can get the number of affected rows from an insert update or delete statement js connection query delete from posts where title wrong function error results fields if error throw error console log deleted results affectedrows rows getting the number of changed rows you can get the number of changed rows from an update statement changedrows differs from affectedrows in that it does not count updated rows whose values were not changed js connection query update posts set function error results fields if error throw error console log changed results changedrows rows getting the connection id you can get the mysql connection id thread id of a given connection using the threadid property js connection connect function err if err throw err console log connected as id connection threadid executing queries in parallel the mysql protocol is sequential this means that you need multiple connections to execute queries in parallel you can use a pool to manage connections one simple approach is to create one connection per incoming http request streaming query rows sometimes you may want to select large quantities of rows and process each of them as they are received this can be done like this js var query connection query select from posts query on error function err handle error an end event will be emitted after this as well on fields function fields the field packets for the rows to follow on result function row pausing the connnection is useful if your processing involves i o connection pause processrow row function connection resume on end function all rows have been received please note a few things about the example above usually you will want to receive a certain amount of rows before starting to throttle the connection using pause this number will depend on the amount and size of your rows pause resume operate on the underlying socket and parser you are guaranteed that no more result events will fire after calling pause you must not provide a callback to the query method when streaming rows the result event will fire for both rows as well as ok packets confirming the success of a insert update query it is very important not to leave the result paused too long or you may encounter error connection lost the server closed the connection the time limit for this is determined by the net write timeout setting on your mysql server additionally you may be interested to know that it is currently not possible to stream individual row columns they will always be buffered up entirely if you have a good use case for streaming large fields to and from mysql id love to get your thoughts and contributions on this piping results with streams the query object provides a convenience method stream options that wraps query events into a readable stream object this stream can easily be piped downstream and provides automatic pause resume based on downstream congestion and the optional highwatermark the objectmode parameter of the stream is set to true and cannot be changed if you need a byte stream you will need to use a transform stream like objstream for example for example piping query results into another stream with a max buffer of 5 objects is simply js connection query select from posts stream highwatermark 5 pipe multiple statement queries support for multiple statements is disabled for security reasons it allows for sql injection attacks if values are not properly escaped to use this feature you have to enable it for your connection js var connection mysql createconnection multiplestatements true once enabled you can execute multiple statement queries like any other query js connection query select 1 select 2 function error results fields if error throw error results is an array with one element for every statement in the query console log results 0 1 1 console log results 1 2 2 additionally you can also stream the results of multiple statement queries js var query connection query select 1 select 2 query on fields function fields index the fields for the result rows that follow on result function row index index refers to the statement this result belongs to starts at 0 if one of the statements in your query causes an error the resulting error object contains a err index property which tells you which statement caused it mysql will also stop executing any remaining statements when an error occurs please note that the interface for streaming multiple statement queries is experimental and i am looking forward to feedback on it stored procedures you can call stored procedures from your queries as with any other mysql driver if the stored procedure produces several result sets they are exposed to you the same way as the results for multiple statement queries joins with overlapping column names when executing joins you are likely to get result sets with overlapping column names by default node mysql will overwrite colliding column names in the order the columns are received from mysql causing some of the received values to be unavailable however you can also specify that you want your columns to be nested below the table name like this js var options sql nesttables true connection query options function error results fields if error throw error results will be an array like this now table1 fielda fieldb table2 fielda fieldb or use a string separator to have your results merged js var options sql nesttables connection query options function error results fields if error throw error results will be an array like this now table1 fielda table1 fieldb table2 fielda table2 fieldb transactions simple transaction support is available at the connection level js connection begintransaction function err if err throw err connection query insert into posts set title title function error results fields if error return connection rollback function throw error var log post results insertid added connection query insert into log set data log function error results fields if error return connection rollback function throw error connection commit function err if err return connection rollback function throw err console log success please note that begintransaction commit and rollback are simply convenience functions that execute the start transaction commit and rollback commands respectively it is important to understand that many commands in mysql can cause an implicit commit as described in the mysql documentation ping a ping packet can be sent over a connection using the connection ping method this method will send a ping packet to the server and when the server responds the callback will fire if an error occurred the callback will fire with an error argument js connection ping function err if err throw err console log server responded to ping timeouts every operation takes an optional inactivity timeout option this allows you to specify appropriate timeouts for operations it is important to note that these timeouts are not part of the mysql protocol and rather timeout operations through the client this means that when a timeout is reached the connection it occurred on will be destroyed and no further operations can be performed js kill query after 60s connection query sql select count as count from big table timeout 60000 function error results fields if error error code protocol sequence timeout throw new error too long to count table rows if error throw error console log results 0 count rows error handling this module comes with a consistent approach to error handling that you should review carefully in order to write solid applications most errors created by this module are instances of the javascript error object additionally they typically come with two extra properties err code either a mysql server error e g er access denied error a node js error e g econnrefused or an internal error e g protocol connection lost err fatal boolean indicating if this error is terminal to the connection object if the error is not from a mysql protocol operation this properly will not be defined err sql string contains the full sql of the failed query this can be useful when using a higher level interface like an orm that is generating the queries err sqlstate string contains the five character sqlstate value only populated from mysql server error err sqlmessage string contains the message string that provides a textual description of the error only populated from mysql server error fatal errors are propagated to all pending callbacks in the example below a fatal error is triggered by trying to connect to an invalid port therefore the error object is propagated to both pending callbacks js var connection require mysql createconnection port 84943 wrong port connection connect function err console log err code econnrefused console log err fatal true connection query select 1 function error results fields console log error code econnrefused console log error fatal true normal errors however are only delegated to the callback they belong to so in the example below only the first callback receives an error the second query works as expected js connection query use name of db that does not exist function error results fields console log error code er bad db error connection query select 1 function error results fields console log error null console log results length 1 last but not least if a fatal errors occurs and there are no pending callbacks or a normal error occurs which has no callback belonging to it the error is emitted as an error event on the connection object this is demonstrated in the example below js connection on error function err console log err code er bad db error connection query use name of db that does not exist note error events are special in node if they occur without an attached listener a stack trace is printed and your process is killed tl dr this module does not want you to deal with silent failures you should always provide callbacks to your method calls if you want to ignore this advice and suppress unhandled errors you can do this js i am chuck norris connection on error function exception safety this module is exception safe that means you can continue to use it even if one of your callback functions throws an error which youre catching using uncaughtexception or a domain type casting for your convenience this driver will cast mysql types into native javascript types by default the following mappings exist number tinyint smallint int mediumint year float double date timestamp date datetime buffer tinyblob mediumblob longblob blob binary varbinary bit last byte will be filled with 0 bits as necessary string note text in the binary character set is returned as buffer rather than a string char varchar tinytext mediumtext longtext text enum set decimal may exceed float precision bigint may exceed float precision time could be mapped to date but what date would be set geometry never used those get in touch if you do it is not recommended and may go away change in the future to disable type casting but you can currently do so on either the connection js var connection require mysql createconnection typecast false or on the query level js var options sql typecast false var query connection query options function error results fields if error throw error you can also pass a function and handle type casting yourself youre given some column information like database table and name and also type and length if you just want to apply a custom type casting to a specific type you can do it and then fallback to the default heres an example of converting tinyint 1 to boolean js connection query sql typecast function field next if field type tiny field length 1 return field string 1 1 true 0 false return next warning you must invoke the parser using one of these three field functions in your custom typecast callback they can only be called once see 539 for discussion field string field buffer field geometry are aliases for parser parselengthcodedstring parser parselengthcodedbuffer parser parsegeometryvalue you can find which field function you need to use by looking at rowdatapacket prototype typecast connection flags if for any reason you would like to change the default connection flags you can use the connection option flags pass a string with a comma separated list of items to add to the default flags if you dont want a default flag to be used prepend the flag with a minus sign to add a flag that is not in the default list just write the flag name or prefix it with a plus case insensitive please note that some available flags that are not supported e g compression are still not allowed to be specified example the next example blacklists found rows flag from default connection flags js var connection mysql createconnection mysql localhost test flags found rows default flags the following flags are sent by default on a new connection connect with db ability to specify the database on connection found rows send the found rows instead of the affected rows as affectedrows ignore sigpipe old no effect ignore space let the parser ignore spaces before the in queries local files can use load data local long flag long password use the improved version of old password authentication multi results can handle multiple resultsets for com query odbc old no effect protocol 41 uses the 4 1 protocol ps multi results can handle multiple resultsets for com stmt execute reserved old flag for the 4 1 protocol secure connection support native 4 1 authentication transactions asks for the transaction status flags in addition the following flag will be sent if the option multiplestatements is set to true multi statements the client may send multiple statement per query or statement prepare other available flags there are other flags available they may or may not function but are still available to specify compress interactive no schema plugin auth remember options ssl ssl verify server cert debugging and reporting problems if you are running into problems one thing that may help is enabling the debug mode for the connection js var connection mysql createconnection debug true this will print all incoming and outgoing packets on stdout you can also restrict debugging to packet types by passing an array of types to debug js var connection mysql createconnection debug comquerypacket rowdatapacket to restrict debugging to the query and data packets if that does not help feel free to open a github issue a good github issue will have the minimal amount of code required to reproduce the problem if possible as much debugging output and information about your environment mysql version node version os etc as you can gather security issues security issues should not be first reported through github or another public forum but kept private in order for the collaborators to assess the report and either a devise a fix and plan a release date or b assert that it is not a security issue in which case it can be posted in a public forum like a github issue the primary private forum is email either by emailing the modules author or opening a github issue simply asking to whom a security issues should be addressed to without disclosing the issue or type of issue an ideal report would include a clear indication of what the security issue is and how it would be exploited ideally with an accompaning proof of concept poc for collaborators to work again and validate potentional fixes against contributing this project welcomes contributions from the community contributions are accepted using github pull requests if youre not familiar with making github pull requests please refer to the github documentation creating a pull request for a good pull request we ask you provide the following try to include a clear description of your pull request in the description it should include the basic what and why s for the request the tests should pass as best as you can see the running tests section on how to run the different tests github will automatically run the tests as well to act as a safety net the pull request should include tests for the change a new feature should have tests for the new feature and bug fixes should include a test that fails without the corresponding code change and passes after they are applied the command npm run test cov will generate a coverage folder that contains html pages of the code coverage to better understand if everything youre adding is being tested if the pull request is a new feature please be sure to include all appropriate documentation additions in the readme md file as well to help ensure that your code is similar in style to the existing code run the command npm run lint and fix any displayed issues running tests the test suite is split into two parts unit tests and integration tests the unit tests run on any machine while the integration tests require a mysql server instance to be setup running unit tests sh filter unit npm test running integration tests set the environment variables mysql database mysql host mysql port mysql user and mysql password mysql socket can also be used in place of mysql host and mysql port to connect over a unix socket then run npm test for example if you have an installation of mysql running on localhost 3306 and no password set for the root user run sh mysql u root e create database if not exists node mysql test mysql host localhost mysql port 3306 mysql database node mysql test mysql user root mysql password filter integration npm test todo prepared statements support for encodings other than utf 8 ascii