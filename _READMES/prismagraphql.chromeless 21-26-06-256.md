chromeless chrome automation made simple runs locally or headless on aws lambda see demo chromeless can be used to run 1000s of browser integration tests in parallel ‚ö°Ô∏è crawl the web automate screenshots write bots that require a real browser do pretty much everything youve used phantomjs nightmarejs or selenium for before examples json of google results google for chromeless and get a list of json results screenshot of google results google for chromeless and take a screenshot of the results prep compile time prerendering for spa pwa like react vue instead of server side rendering ssr see the full examples list for more ‚ñ∂Ô∏è try it out you can try out chromeless and explore the api in the browser based demo playground source contents how it works installation usage api documentation configuring development environment faq contributors credits help community how it works with chromeless you can control chrome open website click elements fill out forms using an elegant api this is useful for integration tests or any other scenario where youd need to script a real browser there are 2 ways to use chromeless running chrome on your local computer running chrome on aws lambda and controlling it remotely 1 local setup for local development purposes where a fast feedback loop is necessary the easiest way to use chromeless is by controlling your local chrome browser just follow the usage guide to get started 2 remote proxy setup you can also run chrome in headless mode on aws lambda this way you can speed up your tests by running them in parallel in graphcools case this decreased test durations from 20min to a few seconds chromeless comes out of the box with a remote proxy built in the usage stays completely the same this way you can write and run your tests locally and have them be executed remotely on aws lambda the proxy connects to lambda through a websocket connection to forward commands and return the evaluation results installation sh npm install chromeless proxy setup the project contains a serverless service for running and driving chrome remotely on aws lambda deploy the proxy service to aws lambda more details here follow the usage instructions here usage using chromeless is similar to other browser automation tools for example js const chromeless require chromeless async function run const chromeless new chromeless const screenshot await chromeless goto https www google com type chromeless input name q press 13 wait resultstats screenshot console log screenshot prints local file path or s3 url await chromeless end run catch console error bind console local chrome usage to run chromeless locally you need a recent version of chrome or chrome canary installed version 60 or greater by default chromeless will start chrome automatically and will default to the most recent version found on your system if theres multiple you can override this behavior by starting chrome yourself and passing a flag of launchchrome false in the chromeless constructor to launch chrome yourself and open the port for chromeless follow this example sh alias canary applications google\ chrome\ canary app contents macos google\ chrome\ canary canary remote debugging port 9222 or run chrome canary headless ly sh canary remote debugging port 9222 disable gpu headless or run chrome headless ly on windows sh cd c \program files x86 \google\chrome\application chrome remote debugging port 9222 disable gpu headless proxy usage follow the setup instructions here then using chromeless with the proxy service is the same as running it locally with the exception of the remote option alternatively you can configure the proxy services endpoint with environment variables heres how js const chromeless new chromeless remote endpointurl https xxxxxxxxxx execute api eu west 1 amazonaws com dev apikey your api key here api documentation chromeless constructor options new chromeless options chromelessoptions chromeless methods end chrome methods goto url string timeout number setuseragent useragent string click selector string x number y number wait timeout number wait selector string wait fn args any boolean args any not implemented yet clearcache clearstorage origin string storagetypes string focus selector string press keycode number count number modifiers any type input string selector string back not implemented yet forward not implemented yet refresh not implemented yet mousedown selector string mouseup selector string scrollto x number y number scrolltoelement selector string sethtml html string setextrahttpheaders headers headers setviewport options devicemetrics evaluate u extends any fn args any void args any inputvalue selector string exists selector string screenshot selector string options screenshotoptions pdf options pdfoptions html cookies cookies name string cookies query cookiequery not implemented yet allcookies setcookies name string value string setcookies cookie cookie setcookies cookies cookie deletecookies name string clearcookies clearinput selector string setfileinput selector string files string string configuring development environment requirements nodejs version 8 2 and greater 1 clone this repository 2 run npm install 3 to build npm run build linking this npm repository 1 go to this repository locally 2 run npm link 3 go to the folder housing your chromeless scripts 4 run npm link chromeless now your local chromeless scripts will use your local development of chromeless faq how is this different from nightmarejs phantomjs or selenium the chromeless api is very similar to nightmarejs as their api is pretty awesome the big difference is that chromeless is based on chrome in headless mode and runs in a serverless function in aws lambda the advantage of this is that you can run hundreds of browsers in parallel without having to think about parallelisation running integration tests for example is much faster im new to aws lambda is this still for me you still can use this locally without lambda so yes besides that here is a simple guide on how to set the lambda function up for chromeless how much does it cost to run chromeless in production the compute price is 0 00001667 per gb s and the free tier provides 400 000 gb s the request price is 0 20 per 1 million requests and the free tier provides 1m requests per month this means you can easily execute 100 000 tests for free in the free tier are there any limitations if youre running chromeless on aws lambda the execution cannot take longer than 5 minutes which is the current limit of lambda besides that every feature thats supported in chrome is also working with chromeless the maximal number of concurrent function executions is 1000 aws api limits are there commercial options although chromeless is the easiest way to get started running chrome on lambda you may not have time to build and manage your own visual testing toolkit commercial options include chromatic visual snapshot regression testing for storybook troubleshooting error unable to get presigned websocket url and connect to it in case you get an error like this when running the chromeless client httperror response code 403 forbidden at stream catch then data code chromeless node modules got index js 182 13 at process tickdomaincallback internal process next tick js 129 7 name httperror error unable to get presigned websocket url and connect to it make sure that youre running at least version 1 19 0 of serverless it is a known issue that the api gateway api keys are not setup correctly in older serverless versions best is to run npm run deploy within the project as this will use the local installed version of serverless resource serverlessdeploymentbucket does not exist for stack chromeless serverless dev in case the deployment of the serverless function returns an error like this serverless error resource serverlessdeploymentbucket does not exist for stack chromeless serverless dev please check that there is no stack with the namechromeless serverless dev existing yet otherwise serverless cant correctly provision the bucket no command gets executed in order for the commands to be processed make sure that you call one of the commands screenshot evaluate cookiesgetall or end at the end of your execution chain contributors a big thank you to all contributors and supporters of this repository üíö credits chrome remote interface chromeless uses this package as an interface to chrome serverless chrome compiled chrome binary that runs on aws lambda azure and gcp soon too nightmarejs we draw a lot of inspiration for the api from this great tool help community join our slack community if you run into issues or have questions we love talking to you