google apis node js client node js client library for using google apis support for authorization and authentication with oauth 2 0 api keys and jwt tokens is included google apis getting started installation first example samples reference api authentication and authorization oauth2 client using api keys service service authentication setting global or service level auth usage specifying request body media uploads request options using a proxy supported apis typescript license contributing questions problems google apis the full list of supported apis can be found here the api endpoints are automatically generated so if the api is not in the list it is currently not supported by this api client library supported apis are listed on the google apis explorer working with google cloud platform apis if youre working with google cloud platform apis such as datastore cloud storage or pub sub consider using the google cloud client libraries single purpose idiomatic node js clients for google cloud platform services getting started installation this library is distributed on npm in order to add it as a dependency run the following command sh npm install googleapis first example this is a very simple example this creates a url shortener client and retrieves the long url of the given short url js const google require googleapis each api may support multiple version with this sample were getting v1 of the urlshortener api and using an api key to authenticate const urlshortener google urlshortener version v1 auth your api key const params shorturl http goo gl xkbru3 get the long url of a shortened url urlshortener url get params err res if err console error err throw err console log long url is res data longurl instead of using callbacks you can also use promises js urlshortener url get params then res console log long url is res data longurl catch error console error error or async await js async function runsample const res await urlshortener url get params console log long url is res data longurl runsample catch console error samples there are a lot of samples ðŸ¤— if youre trying to figure out how to use an api look there first if theres a sample you need missing feel free to file an issue reference api this library provides generated reference api documentation authentication and authorization the are three primary ways to authenticate to google apis some service support all authentication methods other may only support one or two oauth2 this allows you to make api calls on behalf of a given user in this model the user visits your application signs in with their google account and provides your application with authorization against a set of scopes learn more service service in this model your application talks directly to google apis using a service account its useful when you have a backend application that will talk directly to google apis from the backend learn more api key with an api key you can access your service from a client or the server typically less secure this is only available on a small subset of services with limited scopes learn more to learn more about the authentication client see the google auth library oauth2 client this client comes with an oauth2 client that allows you to retrieve an access token and refreshes the token and retry the request seamlessly the basics of googles oauth2 implementation is explained on google authorization and authentication documentation in the following examples you may need a client id client secret and redirect url you can find these pieces of information by going to the developer console clicking your project apis auth credentials for more information about oauth2 and how it works see here a complete sample application that authorizes and authenticates with the oauth2 client is available at samples oauth2 js generating an authentication url to ask for permissions from a user to retrieve an access token you redirect them to a consent page to create a consent page url js const google require googleapis const oauth2client new google auth oauth2 your client id your client secret your redirect url generate a url that asks permissions for google and google calendar scopes const scopes https www googleapis com auth plus me https www googleapis com auth calendar const url oauth2client generateauthurl online default or offline gets refresh token access type offline if you only need one scope you can pass it as a string scope scopes important note the refresh token is only returned on the first authorization more details here retrieve authorization code once a user has given permissions on the consent page google will redirect the page to the redirect url you have provided with a code query parameter get oauthcallback code authorizationcode retrieve access token with the code returned you can ask for an access token as shown below js this will provide an object with the access token and refresh token save these somewhere safe so they can be used at a later time const tokens await oauth2client gettoken code oauth2client setcredentials tokens with the credentials set on your oauth2 client youre ready to go handling refresh tokens access tokens expire this library will automatically use a refresh token to obtain a new access token if it is about to expire an easy way to make sure you always store the most recent tokens is to use the tokens event js oauth2client on tokens tokens if tokens refresh token store the refresh token in my database console log tokens refresh token console log tokens access token to set the refresh token at a later time you can use the setcredentials method js oauth2client setcredentials refresh token stored refresh token once the client has a refresh token access tokens will be acquired and refreshed automatically in the next call to the api you can use the oauth2client refreshaccesstoken method for this purpose returning the tokens in the response using api keys you may need to send an api key with the request you are going to make the following uses an api key to make a request to the google api service to retrieve a persons profile given a userid js const google require googleapis const plus google plus version v1 auth your api key specify your api key here async function main const res await plus people get userid me console log hello res data displayname main catch console error to learn more about api keys please see the documentation service to service authentication rather than manually creating an oauth2 client jwt client or compute client the auth library can create the correct credential type for you depending upon the environment your code is running under for example a jwt auth client will be created when your code is running on your local developer machine and a compute client will be created when the same code is running on a configured instance of google compute engine the code below shows how to retrieve a default credential type depending upon the runtime environment the createscopedrequired must be called to determine when you need to pass in the scopes manually and when they have been set for you automatically based on the configured runtime environment js async function main this method looks for the gcloud project and google application credentials environment variables const auth await google auth getclient scopes can be specified either as an array or as a single space delimited string scopes https www googleapis com auth compute obtain the current project id const project await google auth getdefaultprojectid fetch the list of gce zones within a project const res await compute zones list project auth console log res data main catch console error setting global or service level auth you can set the auth as a global or service level option so you dont need to specify it every request for example you can set auth as a global option js const google require googleapis const oauth2client new google auth oauth2 your client id your client secret your redirect url set auth as a global default google options auth oauth2client instead of setting the option globally you can also set the authentication client at the service level js const google require googleapis const oauth2client new google auth oauth2 your client id your client secret your redirect url const drive google drive version v2 auth oauth2client see the options section for more information usage specifying request body the body of the request is specified in the requestbody parameter object of the request the body is specified as a javascript object with key value pairs for example this sample creates a watcher that posts notifications to a google cloud pub sub topic when emails are sent to a gmail account js const res await gmail users watch userid me requestbody replace with projects project id topics topic name topicname projects el gato topics gmail console log res data media uploads this client supports multipart media uploads the resource parameters are specified in the requestbody parameter object and the media itself is specified in the media body parameter with mime type specified in media mimetype this example uploads a plain text file to google drive with the title test and contents hello world js const drive google drive version v3 auth oauth2client const res await drive files create requestbody name test mimetype text plain media mimetype text plain body hello world you can also upload media by specifying media body as a readable stream this can allow you to upload very large files that cannot fit into memory js const fs require fs const drive google drive version v3 auth oauth2client async function main const res await drive files create requestbody name testimage png mimetype image png media mimetype image png body fs createreadstream awesome png console log res data main catch console error for more examples of creation and modification requests with media attachments take a look at the samples drive upload js sample request options for more fine tuned control over how your api calls are made we provide you with the ability to specify additional options that can be applied directly to the axios object used in this library to make network calls to the api you may specify additional options either in the global google object or on a service client basis the options you specify are attached to the axios object so whatever axios supports this library supports you may also specify global or per service request parameters that will be attached to all api calls you make a full list of supported options can be found here global options you can choose default options that will be sent with each request these options will be used for every service instantiated by the google client in this example the timeout property of axiosrequestconfig will be set for every request js const google require googleapis google options all requests made with this object will use these settings unless overridden timeout 1000 auth auth you can also modify the parameters sent with each request js const google require googleapis google options all requests from all services will contain the above query parameter unless overridden either in a service client or in individual api calls params quotauser user123 example com service client options you can also specify options when creating a service client js const urlshortener google urlshortener version v1 all requests made with this object will use the specified auth auth api key by doing this every api call made with this service client will use api key to authenticate note created clients are immutable so you must create a new one if you want to specify different options similar to the examples above you can also modify the parameters used for every call of a given service js const urlshortener google urlshortener version v1 all requests made with this service client will contain the quotauser query parameter unless overridden in individual api calls params quotauser user123 example com calls with this drive client will not contain the quotauser query parameter const drive google drive v3 request level options you can specify an auth object to be used per request each request also inherits the options specified at the service level and global level for example js const google require googleapis const bigquery google bigquery v2 async function main this method looks for the gcloud project and google application credentials environment variables const client await google auth getclient scopes https www googleapis com auth cloud platform const projectid await google auth getdefaultprojectid const request projectid datasetid this is a request level option auth client const res await bigquery datasets delete request console log res data main catch console error you can also override axios options per request such as url method and encoding for example js const res await drive files export fileid asxkjod9s79 a google doc mimetype application pdf make sure we get the binary data encoding null using a proxy you can use the following environment variables to proxy http and https requests http proxy http proxy https proxy https proxy when http proxy http proxy are set they will be used to proxy non ssl requests that do not have an explicit proxy configuration option present similarly https proxy https proxy will be respected for ssl requests that do not have an explicit proxy configuration option it is valid to define a proxy in one of the environment variables but then override it for a specific request using the proxy configuration option getting supported apis you can programatically obtain the list of supported apis and all available versions js const google require googleapis const apis google getsupportedapis this will return an object with the api name as object property names and an array of version strings as the object values typescript this library is written in typescript and provides types out of the box all classes and interfaces generated for each api are exported under the apiname version namespace for example the drive v3 api types are are all available from the drive v3 namespace ts import drive v3 from googleapis release notes breaking changes you can find a detailed list of breaking changes and new features in our release notes if youve used this library before 25 x see our release notes to learn about migrating your code from 24 x x to 25 x x its pretty easy license this library is licensed under apache 2 0 full license text is available in copying contributing we love contributions before submitting a pull request its always good to start with a new issue first to learn more see contributing questions problems ask your development related questions on stackoverflow if youve found an bug issue please file it on github