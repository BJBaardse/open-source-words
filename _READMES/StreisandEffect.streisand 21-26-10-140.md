english français 简体中文 русский mirror streisand silence censorship automate the effect the internet can be a little unfair its way too easy for isps telecoms politicians and corporations to block access to the sites and information that you care about but breaking through these restrictions is tough or is it introducing streisand a single command sets up a brand new ubuntu 16 04 server running a wide variety of anti censorship software that can completely mask and encrypt all of your internet traffic streisand natively supports the creation of new servers at amazon ec2 azure digitalocean google compute engine linode and rackspace—with more providers coming soon it also runs on any ubuntu 16 04 server regardless of provider and hundreds of instances can be configured simultaneously using this method the process is completely automated and only takes about ten minutes which is pretty awesome when you consider that it would require the average system administrator several days of frustration to set up even a small subset of what streisand offers in its out of the box configuration once your streisand server is running you can give the custom connection instructions to friends family members and fellow activists the connection instructions contain an embedded copy of the servers unique ssl certificate so you only have to send them a single file each server is entirely self contained and comes with absolutely everything that users need to get started including cryptographically verified mirrors of all common clients this renders any attempted censorship of default download locations completely ineffective but wait theres more more features nginx powers a password protected and encrypted gateway that serves as the starting point for new users the gateway is accessible over ssl or as a tor hidden service beautiful custom step by step client configuration instructions are generated for each new server that streisand creates users can quickly access these instructions through any web browser the instructions are responsive and look fantastic on mobile phones the integrity of mirrored software is ensured using sha 256 checksums or by verifying gpg signatures if the project provides them this protects users from downloading corrupted files all ancillary files such as openvpn configuration profiles are also available via the gateway current tor users can take advantage of the additional services streisand sets up in order to transfer large files or to handle other traffic e g bittorrent that isnt appropriate for the tor network a unique password ssl certificate and ssl private key are generated for each streisand gateway the gateway instructions and certificate are transferred via ssh at the conclusion of streisands execution distinct services and multiple daemons provide an enormous amount of flexibility if one connection method gets blocked there are numerous options available most of which are resistant to deep packet inspection all of the connection methods including direct openvpn connections are effective against the type of blocking turkey has been experimenting with openconnect anyconnect openssh openvpn wrapped in stunnel shadowsocks tor with obfsproxy and the obfs4 pluggable transport and wireguard are all currently effective against chinas great firewall every task has been thoroughly documented and given a detailed description streisand is simultaneously the most complete howto in existence for the setup of all of the software it installs and also the antidote for ever having to do any of this by hand again all software runs on ports that have been deliberately chosen to make simplistic port blocking unrealistic without causing massive collateral damage openvpn for example does not run on its default port of 1194 but instead uses port 636 the standard port for ldap ssl connections that are beloved by companies worldwide services provided openssh windows and android ssh tunnels are also supported and a copy of the keypair is exported in the ppk format that putty requires tinyproxy is installed and bound to localhost it can be accessed over an ssh tunnel by programs that do not natively support socks and that require an http proxy such as twitter for android an unprivileged forwarding user and ssh keypair are generated for sshuttle and socks capabilities openconnect cisco anyconnect openconnect ocserv is an extremely high performance and lightweight vpn server that also features full compatibility with the official cisco anyconnect clients the protocol is built on top of standards like http tls and dtls and its one of the most popular and widely used vpn technologies among large multi national corporations this means that in addition to its ease of use and speed openconnect is also highly resistant to censorship and is almost never blocked openvpn self contained unified ovpn profiles are generated for easy client configuration using only a single file both tcp and udp connections are supported client dns resolution is handled via dnsmasq to prevent dns leaks tls authentication is enabled which helps protect against active probing attacks traffic that does not have the proper hmac is simply dropped shadowsocks the high performance libev variant is installed this version is capable of handling thousands of simultaneous connections a qr code is generated that can be used to automatically configure the android and ios clients by simply taking a picture you can tag 8 8 8 8 on that concrete wall or you can glue the shadowsocks instructions and some qr codes to it instead aead support is enabled using chacha20 and poly1305 for enhanced security and improved gfw evasion the simple obfs plugin is installed to provide robust traffic evasion on hostile networks especially those implementing quality of service qos throttling sslh sslh is a protocol demultiplexer that allows nginx openssh and openvpn to share port 443 this provides an alternative connection option and means that you can still route traffic via openssh and openvpn even if you are on a restrictive network that blocks all access to non http ports stunnel listens for and wraps openvpn connections this makes them look like standard ssl traffic and allows openvpn clients to successfully establish tunnels even in the presence of deep packet inspection unified profiles for stunnel wrapped openvpn connections are generated alongside the direct connection profiles detailed instructions are also generated the stunnel certificate and key are exported in pkcs 12 format so they are compatible with other ssl tunneling applications notably this enables openvpn for android to tunnel its traffic through ssldroid openvpn in china on a mobile device yes tor a bridge relay is set up with a random nickname obfsproxy is installed and configured with support for the obfs4 pluggable transport a bridgeqr code is generated that can be used to automatically configure orbot for android ufw firewall rules are configured for every service and any traffic that is sent to an unauthorized port will be blocked unattended upgrades your streisand server is configured to automatically install new security updates wireguard linux users can take advantage of this next gen simple kernel based state of the art vpn that also happens to be ridiculously fast and uses modern cryptographic principles that all other highspeed vpn solutions lack installation please read all installation instructions carefully before proceeding important clarification streisand is based on ansible an automation tool that is typically used to provision and configure files and packages on remote servers streisand automatically sets up another remote server with the vpn packages and configuration streisand will spin up and deploy another server on your chosen hosting provider when you run on your home machine e g your laptop usually you do not run streisand on the remote server as by default this would result in the deployment of another server from your server and render the first server redundant whew in some circumstances advanced users may opt to use the local provisioning mode to have the system running streisand ansible configure itself as a streisand server this is a configuration mode best reserved for when it isnt possible to install ansible on your home machine or when your connection to a cloud provider is too unreliable for ansibles ssh connections prerequisites complete all of these tasks on your local home machine streisand requires a bsd linux or macos system as of now windows is not supported all of the following commands should be run inside a terminal session python 2 7 is required this comes standard on macos and is the default on almost all linux and bsd distributions as well if your distribution packages python 3 instead you will need to install version 2 7 in order for streisand to work properly make sure an ssh public key is present in ssh id rsa pub ssh keys are a more secure alternative to passwords that allow you to prove your identity to a server or service built on public key cryptography the public key is something that you can give to others whereas the private key should be kept secret like a password to check if you already have an ssh public key please enter the following command at a command prompt ls ssh if you see an id rsa pub file then you have an ssh public key if you do not have an ssh key pair you can generate one by using this command and following the defaults ssh keygen if youd like to use an ssh key with a different name or in a non standard location please enter yes when asked if youd like to customize your instance during installation please note you will need these keys to access your streisand instance over ssh please keep them for the lifetime of the streisand server bootstrap install the bootstrap packages git and pip for python 2 7 on debian and ubuntu sudo apt get install git python pip on fedora 27 some additional packages are needed later sudo yum install git python2 pip gcc python2 devel python2 crypto python2 pycurl libcurl devel on centos 7 pip is available from the epel repository some additional packages are needed later sudo yum y update sudo yum install y epel release sudo yum y update sudo yum install y git gcc python devel python crypto python pycurl python pip libcurl devel on macos git is part of the developer tools and it will be installed the first time you run it if there isnt already a pip command installed install it with sudo python2 7 m ensurepip execution clone the streisand repository and enter the directory git clone https github com streisandeffect streisand git cd streisand run the installer for ansible and its dependencies util venv dependencies sh venv the installer will detect missing packages and print the commands needed to install them activate the ansible packages that were installed source venv bin activate execute the streisand script streisand follow the prompts to choose your provider the physical region for the server and its name you will also be asked to enter api information once login information and api keys are entered streisand will begin spinning up a new remote server wait for the setup to complete this usually takes around ten minutes and look for the corresponding files in the generated docs folder in the streisand repository directory the html file will explain how to connect to the gateway over ssl or via the tor hidden service all instructions files mirrored clients and keys for the new server can then be found on the gateway you are all done running streisand to provision localhost advanced if you can not run streisand in the normal manner running from your client home machine laptop to configure a remote server streisand supports a local provisioning mode simply choose localhost advanced from the menu after running streisand note running streisand against localhost can be a destructive action you will be potentially overwriting configuration files and must be certain that you are affecting the correct machine running streisand on other providers advanced you can also run streisand on a new ubuntu 16 04 server dedicated hardware great esoteric cloud provider awesome to do so simply choose existing server advanced from the menu after running streisand and provide the ip address of the existing server when prompted the server must be accessible using the home ssh id rsa ssh key and root is used as the connecting user by default if your provider requires you to ssh with a different user than root e g ubuntu specify the ansible ssh user environmental variable e g ansible ssh user ubuntu when you run streisand note running streisand against an existing server can be a destructive action you will be potentially overwriting configuration files and must be certain that you are affecting the correct machine noninteractive deployment advanced alternative scripts and configuration file examples are provided for noninteractive deployment in which all of the required information is passed on the command line or in a configuration file example configuration files are found under global vars noninteractive copy and edit the desired parameters such as providing api tokens and other choices and then run the appropriate script to deploy a new streisand server deploy streisand new cloud server sh \ provider digitalocean \ site config global vars noninteractive digitalocean site yml to run the streisand provisioning on the local machine deploy streisand local sh \ site config global vars noninteractive local site yml to run the streisand provisioning against an existing server deploy streisand existing cloud server sh \ ip address 10 10 10 10 \ ssh user root \ site config global vars noninteractive digitalocean site yml upcoming features easier setup if there is something that you think streisand should do or if you find a bug in its documentation or execution please file a report on the issue tracker core contributors jay carlson nopdotcom nick clarke nickolasclarke joshua lund jlund ali makki alimakki daniel mccarney cpu corban raun corbanr acknowledgements jason a donenfeld deserves a lot of credit for being brave enough to reimagine what a modern vpn should look like and for coming up with something as good as wireguard he has our sincere thanks for all of his patient help and high quality feedback we are grateful to trevor smith for his massive contributions he suggested the gateway approach provided tons of invaluable feedback made everything look better and developed the html template that served as the inspiration to take things to the next level before streisands public release huge thanks to paul wouters of the libreswan project for his generous help troubleshooting the l2tp ipsec setup starcadians sunset blood album was played on repeat approximately 300 times during the first few months of work on the project in early 2014