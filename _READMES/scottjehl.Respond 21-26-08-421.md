respond js a fast lightweight polyfill for min max width css3 media queries for ie 6 8 and more copyright 2011 scott jehl scottjehl com licensed under the mit license the goal of this script is to provide a fast and lightweight 3kb minified 1kb gzipped script to enable responsive web designs in browsers that dont support css3 media queries in particular internet explorer 8 and under its written in such a way that it will probably patch support for other non supporting browsers as well more information on that soon if youre unfamiliar with the concepts surrounding responsive web design you can read up here and also here demo page the colors change to show media queries working usage instructions craft your css with min max width media queries to adapt your layout from mobile first all the way up to desktop css media screen and min width 480px styles for 480px and up go here reference the respond min js script 1kb min gzipped after all of your css the earlier it runs the greater chance ie users will not see a flash of un mediad content crack open internet explorer and pump fists in delight cdn x domain setup respond js works by requesting a pristine copy of your css via ajax so if you host your stylesheets on a cdn or a subdomain youll need to set up a local proxy to request the css for old ie browsers prior versions recommended a deprecated x domain approach but a local proxy is preferable for performance and security reasons to attempting to work around the cross domain limitations support caveats some notes to keep in mind this scripts focus is purposely very narrow only min width and max width media queries and all media types screen print etc are translated to non supporting browsers i wanted to keep things simple for filesize maintenance and performance so ive intentionally limited support to queries that are essential to building a mobile first responsive design in the future i may rework things a bit to include a hook for patching in additional media query features stay tuned browsers that natively support css3 media queries are opted out of running this script as quickly as possible in testing for support all other browsers are subjected to a quick test to determine whether they support media queries or not before proceeding to run the script this test is now included separately at the top and uses the window matchmedia polyfill found here https github com paulirish matchmedia js if you are already including this polyfill via modernizr or otherwise feel free to remove that part this script relies on no other scripts or frameworks aside from the included matchmedia polyfill and is optimized for mobile delivery 1kb total filesize min gzip as you might guess this implementation is quite dumb in regards to css parsing rules this is a good thing because that allows it to run really fast but its looseness may also cause unexpected behavior for example if you enclose a whole media query in a comment intending to disable its rules youll probably find that those rules will end up enabled in non media query supporting browsers respond js doesnt parse css referenced via import nor does it work with media queries within style elements as those styles cant be re requested for parsing due to security restrictions some browsers may not allow this script to work on file urls because it uses xmlhttprequest run it on a web server if the request for the css file that includes mq specific styling is behind a redirect respond js will fail silently css files should respond with a 200 status currently media attributes on link elements are supported but only if the linked stylesheet contains no media queries if it does contain queries the media attribute will be ignored and the internal queries will be parsed normally in other words media statements in the css take priority reportedly if css files are encoded in utf 8 with byte order mark bom they will not work with respond js in ie7 or ie8 noted in issue 97 warning including font face rules inside a media query will cause ie7 and ie8 to hang during load to work around this place font face rules in the wide open as a sibling to other media queries if you have more than 32 stylesheets referenced ie will throw an error invalid procedure call or argument concatenate your css and the issue should go away sass scss source maps are not supported media sass debug info will break respond js noted in issue 148 internet explorer 9 supports css3 media queries but not within frames when the css containing the media query is in an external file this appears to be a bug in ie9 â€” see https stackoverflow com questions 10316247 media queries fail inside ie9 iframe see this commit for a fix if youre having this problem https github com newsignature respond commit 1c86c66075f0a2099451eb426702fc3540d2e603 nested media queries are not supported hows it work basically the script loops through the css referenced in the page and runs a regular expression or two on their contents to find media queries and their associated blocks of css in internet explorer the content of the stylesheet is impossible to retrieve in its pre parsed state which in ie 8 means its media queries are removed from the text so respond js re requests the css files using ajax and parses the text response from there be sure to configure your css files caching properly so that this re request doesnt actually go to the server hitting your browser cache instead from there each media query block is appended to the head in order via style elements and those style elements are enabled and disabled read appended and removed from the dom depending on how their min max width compares with the browser width the media attribute on the style elements will match that of the query in the css so it could be screen projector or whatever you want any relative paths contained in the css will be prefixed by their stylesheets href so image paths will direct to their proper destination api options sure a couple respond update rerun the parser helpful if you added a stylesheet to the page and it needs to be translated respond mediaqueriessupported set to true if the browser natively supports media queries respond getemvalue returns the pixel value of one em alternatives to this script this isnt the only css3 media query polyfill script out there but it damn well may be the fastest if youre looking for more robust css3 media query support you might check out https code google com p css3 mediaqueries js in testing ive found that script to be noticeably slow when rendering complex responsive designs both in filesize and performance but it really does support a lot more media query features than this script big hat tip to the authors