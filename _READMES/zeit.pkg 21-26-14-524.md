this command line interface enables you to package your node js project into an executable that can be run even on devices without node js installed use cases make a commercial version of your application without sources make a demo evaluation trial version of your app without sources instantly make executables for other platforms cross compilation make some kind of self extracting archive or installer no need to install node js and npm to run the packaged application no need to download hundreds of files via npm install to deploy your application deploy it as a single file put your assets inside the executable to make it even more portable test your app against new node js version without installing it usage sh npm install g pkg after installing it run pkg help without arguments to see list of options the entrypoint of your project is a mandatory cli argument it may be path to entry file suppose it is path app js then packaged app will work the same way as node path app js path to package json pkg will follow bin property of the specified package json and use it as entry file path to directory pkg will look for package json in the specified directory see above targets pkg can generate executables for several target machines at a time you can specify a comma separated list of targets via targets option a canonical target consists of 3 elements separated by dashes for example node6 macos x64 or node4 linux armv6 noderange node n or latest platform freebsd linux macos win arch x64 x86 armv6 armv7 you may omit any element and specify just node6 for example the omitted elements will be taken from current platform or system wide node js installation its version and arch there is also an alias host that means that all 3 elements are taken from current platform node js by default targets are linux macos win for current node js version and arch config during packaging process pkg parses your sources detects calls to require traverses the dependencies of your project and includes them into executable in most cases you dont need to specify anything manually however your code may have require variable calls so called non literal argument to require or use non javascript files for example views css images etc js require build cmd js path join dirname views viewname such cases are not handled by pkg so you must specify the files scripts and assets manually in pkg property of your package json file json pkg scripts build js assets views just be sure to call pkg package json or pkg to make use of scripts and assets entries scripts scripts is a glob or list of globs files specified as scripts will be compiled using v8 scriptcompiler and placed into executable without sources they must conform js standards of those node js versions you target see targets i e be already transpiled assets assets is a glob or list of globs files specified as assets will be packaged into executable as raw content without modifications javascript files may be specified as assets as well their sources will not be stripped it improves performance of execution of those files and simplifies debugging see also detecting assets in source code and snapshot filesystem options node js application can be called with runtime options belonging to node js or v8 to list them type node help or node v8 options you can bake these runtime options into packaged application the app will always run with the options turned on just remove from option name sh pkg app js options expose gc pkg app js options max old space size 4096 output you may specify output if you create only one executable or out path to place executables for multiple targets debug pass debug to pkg to get a log of packaging process if you have issues with some particular file seems not packaged into executable it may be useful to look through the log build pkg has so called base binaries they are actually same node executables but with some patches applied they are used as a base for every executable pkg creates pkg downloads precompiled base binaries before packaging your application if you prefer to compile base binaries from source instead of downloading them you may pass build option to pkg first ensure your computer meets the requirements to compile original node js building md usage of packaged app command line call to packaged app app a b is equivalent to node app js a b snapshot filesystem during packaging process pkg collects project files and places them into executable it is called a snapshot at run time the packaged application has access to snapshot filesystem where all that files reside packaged files have snapshot prefix in their paths or c \snapshot\ in windows if you used pkg path app js command line then filename value will be likely snapshot path app js at run time dirname will be snapshot path as well here is the comparison table of path related values value with node packaged comments filename project app js snapshot project app js dirname project snapshot project process cwd project deploy suppose the app is called process execpath usr bin nodejs deploy app x64 app x64 and run in deploy process argv 0 usr bin nodejs deploy app x64 process argv 1 project app js snapshot project app js process pkg entrypoint undefined snapshot project app js process pkg defaultentrypoint undefined snapshot project app js require main filename project app js snapshot project app js hence in order to make use of a file collected at packaging time require a javascript file or serve an asset you should take filename dirname process pkg defaultentrypoint or require main filename as a base for your path calculations for javascript files you can just require or require resolve because they use current dirname by default for assets use path join dirname path to asset learn more about path join in detecting assets in source code on the other hand in order to access real file system at run time pick up a users external javascript plugin json configuration or even get a list of users directory you should take process cwd or path dirname process execpath detecting assets in source code when pkg encounters path join dirname path to asset it automatically packages the file specified as an asset see assets pay attention that path join must have two arguments and the last one must be a string literal this way you may even avoid creating pkg config for your project native addons native addons node files use is supported but packaging node files inside the executable is not resolved yet you have to deploy native addons used by your project to the same directory as the executable when a package that contains a native module is being installed the native module is compiled against current system wide node js version then when you compile your project with pkg pay attention to target option you should specify the same node js version as your system wide node js to make compiled executable compatible with node files api const exec require pkg exec args takes an array of command line arguments and returns a promise for example js await exec app js target host output app exe do something with app exe run test upload deploy etc troubleshooting error enoent no such file or directory uv chdir this error can be caused by deleting the directory the application is run from or generally deleting process cwd directory when the application is running