shelljs unix shell commands for node js shelljs is a portable windows linux os x implementation of unix shell commands on top of the node js api you can use it to eliminate your shell scripts dependency on unix while still keeping its familiar and powerful commands you can also install it globally so you can run it from outside node projects say goodbye to those gnarly bash scripts shelljs is proudly tested on every node release since v4 the project is unit tested and battle tested in projects like firebug firefoxs infamous debugger jshint eslint popular javascript linters zepto jquery compatible javascript library for modern browsers yeoman web application stack and development tool deployd com open source paas for quick api backend generation and many more if you have feedback suggestions or need help feel free to post in our issue tracker think shelljs is cool check out some related projects in our wiki page upgrading from an older version check out our breaking changes page to see what changes to watch out for while upgrading command line use if you just want cross platform unix commands checkout our new project shelljs shx a utility to expose shelljs to the command line for example shx mkdir p foo shx touch foo bar txt shx rm rf foo plugin api shelljs now supports third party plugins you can learn more about using plugins and writing your own shelljs commands in the wiki a quick note about the docs for documentation on all the latest features check out our readme to read docs that are consistent with the latest release check out the npm page or shelljs org installing via npm bash npm install g shelljs examples javascript var shell require shelljs if shell which git shell echo sorry this script requires git shell exit 1 copy files to release dir shell rm rf out release shell cp r stuff out release replace macros in each js file shell cd lib shell ls js foreach function file shell sed i build version v0 1 2 file shell sed i remove this line file shell sed i replace line with macro \n shell cat macro js file shell cd run external tool synchronously if shell exec git commit am auto commit code 0 shell echo error git commit failed shell exit 1 exclude options if you need to pass a parameter that looks like an option you can do so like js shell grep v path to file search for v no grep options shell cp r dir outdir if already using an option youre done global vs local we no longer recommend using a global import for shelljs i e require shelljs global while still supported for convenience this pollutes the global namespace and should therefore only be used with caution instead we recommend a local import standard for npm packages javascript var shell require shelljs shell echo hello world do not modify beyond this point its automatically generated command reference all commands run synchronously unless otherwise stated all commands accept standard bash globbing characters etc compatible with the node glob module for less commonly used commands and features please check out our wiki page cat options file file cat options file array available options n number all output lines examples javascript var str cat file txt var str cat file1 file2 var str cat file1 file2 same as above returns a string containing the given file or a concatenated string containing the files if more than one file is given a new line character is introduced between each file cd dir changes to directory dir for the duration of the script changes to home directory if no argument is supplied chmod options octal mode octal string file chmod options symbolic mode file available options v output a diagnostic for every file processed c like verbose but report only when a change is made r change files and directories recursively examples javascript chmod 755 users brandon chmod 755 users brandon same as above chmod u x users brandon chmod r a w users brandon alters the permissions of a file or directory by either specifying the absolute permissions in octal form or expressing the changes in symbols this command tries to mimic the posix behavior as much as possible notable exceptions in symbolic modes a r and r are identical no consideration is given to the umask there is no quiet option since default behavior is to run silent cp options source source dest cp options source array dest available options f force default behavior n no clobber u only copy if source is newer than dest r r recursive l follow symlinks p dont follow symlinks examples javascript cp file1 dir1 cp r path to dir newcopy cp rf tmp usr local home tmp cp rf tmp usr local home tmp same as above copies files pushd options dir n n available options n suppresses the normal change of directory when adding directories to the stack so that only the stack is manipulated q supresses output to the console arguments dir sets the current working directory to the top of the stack then executes the equivalent of cd dir n brings the nth directory counting from the left of the list printed by dirs starting with zero to the top of the list by rotating the stack n brings the nth directory counting from the right of the list printed by dirs starting with zero to the top of the list by rotating the stack examples javascript process cwd usr pushd etc returns etc usr pushd 1 returns usr etc save the current directory on the top of the directory stack and then cd to dir with no arguments pushd exchanges the top two directories returns an array of paths in the stack popd options n n available options n suppress the normal directory change when removing directories from the stack so that only the stack is manipulated q supresses output to the console arguments n removes the nth directory counting from the left of the list printed by dirs starting with zero n removes the nth directory counting from the right of the list printed by dirs starting with zero examples javascript echo process cwd usr pushd etc etc usr echo process cwd etc popd usr echo process cwd usr when no arguments are given popd removes the top directory from the stack and performs a cd to the new top directory the elements are numbered from 0 starting at the first directory listed with dirs i e popd is equivalent to popd 0 returns an array of paths in the stack dirs options n n available options c clears the directory stack by deleting all of the elements q supresses output to the console arguments n displays the nth directory counting from the left of the list printed by dirs when invoked without options starting with zero n displays the nth directory counting from the right of the list printed by dirs when invoked without options starting with zero display the list of currently remembered directories returns an array of paths in the stack or a single path if n or n was specified see also pushd popd echo options string string available options e interpret backslash escapes default n remove trailing newline from output examples javascript echo hello world var str echo hello world echo n no newline at end prints string to stdout and returns string with additional utility methods like to exec command options callback available options async asynchronous execution if a callback is provided it will be set to true regardless of the passed value default false silent do not echo program output to console default false encoding character encoding to use affects the values returned to stdout and stderr and what is written to stdout and stderr when not in silent mode default utf8 and any option available to node jss child process exec examples javascript var version exec node version silent true stdout var child exec some long running process async true child stdout on data function data do something with data exec some long running process function code stdout stderr console log exit code code console log program output stdout console log program stderr stderr executes the given command synchronously unless otherwise specified when in synchronous mode this returns a shellstring compatible with shelljs v0 6 x which returns an object of the form code stdout stderr otherwise this returns the child process object and the callback receives the arguments code stdout stderr not seeing the behavior you want exec runs everything through sh by default or cmd exe on windows which differs from bash if you need bash specific behavior try out the shell path to bash option find path path find path array examples javascript find src lib find src lib same as above find filter function file return file match \ js returns array of all files however deep in the given paths the main difference from ls r path is that the resulting file names include the base directories e g lib resources file1 instead of just file1 grep options regex filter file file grep options regex filter file array available options v invert regex filter only print non matching lines l print only filenames of matching files examples javascript grep v global variable js grep global variable js reads input string from given files and returns a string containing all lines of the file that match the given regex filter head n \ num file file head n \ num file array available options n num show the first num lines of the files examples javascript var str head n 1 file txt var str head file1 file2 var str head file1 file2 same as above read the start of a file ln options source dest available options s symlink f force examples javascript ln file newlink ln sf file existing links source to dest use f to force the link should dest already exist ls options path ls options path array available options r recursive a all files include files beginning with except for and l follow symlinks d list directories themselves not their contents l list objects representing each file each with fields containing ls l output fields see fs stats for more info examples javascript ls projs js ls r users me tmp ls r users me tmp same as above ls l file txt name file txt mode 33188 nlink 1 returns array of files in the given path or files in the current directory if no path is provided mkdir options dir dir mkdir options dir array available options p full path and create intermediate directories if necessary examples javascript mkdir p tmp a b c d tmp e f g mkdir p tmp a b c d tmp e f g same as above creates directories mv options source source dest mv options source array dest available options f force default behavior n no clobber examples javascript mv n file dir mv file1 file2 dir mv file1 file2 dir same as above moves source file s to dest pwd returns the current directory rm options file file rm options file array available options f force r r recursive examples javascript rm rf tmp rm some file txt another file txt rm some file txt another file txt same as above removes files sed options search regex replacement file file sed options search regex replacement file array available options i replace contents of file in place note that no backups will be created examples javascript sed i program version v0 1 3 source js sed delete this line \n source js reads an input string from files and performs a javascript replace on the input using the given search regex and replacement string or function returns the new string after replacement note like unix sed shelljs sed supports capture groups capture groups are specified using the n syntax javascript sed \w \s \w 2 1 file txt set options available options e exit upon error config fatal v verbose show all commands config verbose f disable filename expansion globbing examples javascript set e exit upon first error set e this undoes a set e sets global configuration variables sort options file file sort options file array available options r reverse the results n compare according to numerical value examples javascript sort foo txt bar txt sort r foo txt return the contents of the files sorted line by line sorting multiple files mixes their content just as unix sort does tail n \ num file file tail n \ num file array available options n num show the last num lines of files examples javascript var str tail n 1 file txt var str tail file1 file2 var str tail file1 file2 same as above read the end of a file tempdir examples javascript var tmp tempdir tmp for most nix platforms searches and returns string containing a writeable platform dependent temporary directory follows pythons tempfile algorithm test expression available expression primaries b path true if path is a block device c path true if path is a character device d path true if path is a directory e path true if path exists f path true if path is a regular file l path true if path is a symbolic link p path true if path is a pipe fifo s path true if path is a socket examples javascript if test d path do something with dir if test f path continue skip if its a regular file evaluates expression using the available primaries and returns corresponding value shellstring prototype to file examples javascript cat input txt to output txt analogous to the redirection operator in unix but works with shellstrings such as those returned by cat grep etc like unix redirections to will overwrite any existing file shellstring prototype toend file examples javascript cat input txt toend output txt analogous to the redirect and append operator in unix but works with shellstrings such as those returned by cat grep etc touch options file file touch options file array available options a change only the access time c do not create any files m change only the modification time d date parse date and use it instead of current time r file use files times instead of current time examples javascript touch source js touch c path to some dir source js touch r file path to some dir source js update the access and modification times of each file to the current time a file argument that does not exist is created empty unless c is supplied this is a partial implementation of touch 1 uniq options input output available options i ignore case while comparing c prefix lines by the number of occurrences d only print duplicate lines one for each group of identical lines examples javascript uniq foo txt uniq i foo txt uniq cd foo txt bar txt filter adjacent matching lines from input which command examples javascript var nodeexec which node searches for command in the systems path on windows this uses the pathext variable to append the extension if its not already executable returns string containing the absolute path to command exit code exits the current process with the given exit code error tests if error occurred in the last command returns a truthy value if an error returned or a falsy value otherwise note do not rely on the return value to be an error message if you need the last error message use the stderr attribute from the last commands return value instead shellstring str examples javascript var foo shellstring hello world turns a regular string into a string like object similar to what each command returns this has special methods like to and toend env var name object containing environment variables both getter and setter shortcut to process env pipes examples javascript grep foo file1 txt file2 txt sed o g a to output txt echo files with o\s in the name \n ls grep o cat test js exec node pipe to exec call commands can send their output to another command in a pipe like fashion sed grep cat exec to and toend can appear on the right hand side of a pipe pipes can be chained configuration config silent example javascript var sh require shelljs var silentstate sh config silent save old silent state sh config silent true sh config silent silentstate restore old silent state suppresses all command output if true except for echo calls default is false config fatal example javascript require shelljs global config fatal true or set e cp this file does not exist dev null throws error here more commands if true the script will throw a javascript error when any shell js command encounters an error default is false this is analogous to bashs set e config verbose example javascript config verbose true or set v cd dir rm rf foo txt bar txt exec echo hello will print each command as follows cd dir rm rf foo txt bar txt exec echo hello config globoptions example javascript config globoptions nodir true use this value for calls to glob sync instead of the default options config reset example javascript var shell require shelljs make changes to shell config and do stuff shell config reset reset to original state do more stuff but with original settings reset shell config to the defaults javascript fatal false globoptions maxdepth 255 noglob false silent false verbose false team nate fischer brandon freitag