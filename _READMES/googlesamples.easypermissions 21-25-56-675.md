easypermissions easypermissions is a wrapper library to simplify basic system permissions logic when targeting android m or higher installation easypermissions is installed by adding the following dependency to your build gradle file groovy dependencies implementation pub devrel easypermissions 1 2 0 note that easypermissions depends on android support library 27 1 0 so you will need to use compilesdkversion 27 or higher this change should be safe as compilesdkversion does not change app behavior usage basic to begin using easypermissions have your activity or fragment override the onrequestpermissionsresult method java public class mainactivity extends appcompatactivity override protected void oncreate bundle savedinstancestate super oncreate savedinstancestate setcontentview r layout activity main override public void onrequestpermissionsresult int requestcode string permissions int grantresults super onrequestpermissionsresult requestcode permissions grantresults forward results to easypermissions easypermissions onrequestpermissionsresult requestcode permissions grantresults this request permissions the example below shows how to request permissions for a method that requires both camera and access fine location permissions there are a few things to note using easypermissions haspermissions to check if the app already has the required permissions this method can take any number of permissions as its final argument requesting permissions with easypermissions requestpermissions this method will request the system permissions and show the rationale string provided if necessary the request code provided should be unique to this request and the method can take any number of permissions as its final argument use of the afterpermissiongranted annotation this is optional but provided for convenience if all of the permissions in a given request are granted all methods annotated with the proper request code will be executed be sure to have an unique request code the annotated method needs to be void and without input parameters instead you can use onsaveinstancestate in order to keep the state of your suppressed parameters this is to simplify the common flow of needing to run the requesting method after all of its permissions have been granted this can also be achieved by adding logic on the onpermissionsgranted callback java afterpermissiongranted rc camera and location private void methodrequirestwopermission string perms manifest permission camera manifest permission access fine location if easypermissions haspermissions this perms already have permission do the thing else do not have permissions request them now easypermissions requestpermissions this getstring r string camera and location rationale rc camera and location perms or for finer control over the rationale dialog use a permissionrequest java easypermissions requestpermissions new permissionrequest builder this rc camera and location perms setrationale r string camera and location rationale setpositivebuttontext r string rationale ask ok setnegativebuttontext r string rationale ask cancel settheme r style my fancy style build optionally for a finer control you can have your activity fragment implement the permissioncallbacks interface java public class mainactivity extends appcompatactivity implements easypermissions permissioncallbacks override protected void oncreate bundle savedinstancestate super oncreate savedinstancestate setcontentview r layout activity main override public void onrequestpermissionsresult int requestcode string permissions int grantresults super onrequestpermissionsresult requestcode permissions grantresults forward results to easypermissions easypermissions onrequestpermissionsresult requestcode permissions grantresults this override public void onpermissionsgranted int requestcode list string list some permissions have been granted override public void onpermissionsdenied int requestcode list string list some permissions have been denied required permissions in some cases your app will not function properly without certain permissions if the user denies these permissions with the never ask again option you will be unable to request these permissions from the user and they must be changed in app settings you can use the method easypermissions somepermissionpermanentlydenied to display a dialog to the user in this situation and direct them to the system setting screen for your app note due to a limitation in the information provided by the android framework permissions api the somepermissionpermanentlydenied method only works after the permission has been denied and your app has received the onpermissionsdenied callback otherwise the library cannot distinguish permanent denial from the not yet denied case java override public void onpermissionsdenied int requestcode list perms log d tag onpermissionsdenied requestcode perms size optional check whether the user denied any permissions and checked never ask again this will display a dialog directing them to enable the permission in app settings if easypermissions somepermissionpermanentlydenied this perms new appsettingsdialog builder this build show override public void onactivityresult int requestcode int resultcode intent data super onactivityresult requestcode resultcode data if requestcode appsettingsdialog default settings req code do something after user returned from app settings screen like showing a toast toast maketext this r string returned from app settings to activity toast length short show interacting with the rationale dialog implement the easypermissions rationalecallbacks if you want to interact with the rationale dialog java override public void onrationaleaccepted int requestcode rationale accpets to request some permissions override public void onrationaledenied int requestcode rationale denied to request some permissions rationale callbacks dont necessarily imply permission changes to check for those see the easypermissions permissioncallbacks license copyright 2017 google licensed under the apache license version 2 0 the license you may not use this file except in compliance with the license you may obtain a copy of the license at http www apache org licenses license 2 0 unless required by applicable law or agreed to in writing software distributed under the license is distributed on an as is basis without warranties or conditions of any kind either express or implied see the license for the specific language governing permissions and limitations under the license