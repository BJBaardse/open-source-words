window fetch polyfill the fetch function is a promise based mechanism for programmatically making web requests in the browser this project is a polyfill that implements a subset of the standard fetch specification enough to make fetch a viable replacement for most uses of xmlhttprequest in traditional web applications this project adheres to the open code of conduct by participating you are expected to uphold this code table of contents read this first installation usage html json response metadata post form post json file upload caveats handling http error statuses sending cookies receiving cookies obtaining the response url aborting requests browser support read this first if you believe you found a bug with how fetch behaves in chrome or firefox please dont open an issue in this repository this project is a polyfill and since chrome and firefox both implement the window fetch function natively no code from this project actually takes any effect in these browsers see browser support for detailed information if you have trouble making a request to another domain a different subdomain or port number also constitutes another domain please familiarize yourself with all the intricacies and limitations of cors requests because cors requires participation of the server by implementing specific http response headers it is often nontrivial to set up or debug cors is exclusively handled by the browsers internal mechanisms which this polyfill cannot influence if you have trouble maintaining the users session or csrf protection through fetch requests please ensure that youve read and understood the sending cookies section fetch doesnt send cookies unless you ask it to this project doesnt work under node js environments its meant for web browsers only you should ensure that your application doesnt try to package and run this on the server if you have an idea for a new feature of fetch submit your feature requests to the specifications repository we only add features and apis that are part of the fetch specification installation npm install whatwg fetch save or bower install fetch or yarn add whatwg fetch you will also need a promise polyfill for older browsers we recommend taylorhakes promise polyfill for its small size and promises a compatibility for use with webpack add this package in the entry configuration option before your application entry point javascript entry whatwg fetch for babel and es2015 make sure to import the file javascript import whatwg fetch usage for a more comprehensive api reference that this polyfill supports refer to https github github io fetch html javascript fetch users html then function response return response text then function body document body innerhtml body json javascript fetch users json then function response return response json then function json console log parsed json json catch function ex console log parsing failed ex response metadata javascript fetch users json then function response console log response headers get content type console log response headers get date console log response status console log response statustext post form javascript var form document queryselector form fetch users method post body new formdata form post json javascript fetch users method post headers content type application json body json stringify name hubot login hubot file upload javascript var input document queryselector input type file var data new formdata data append file input files 0 data append user hubot fetch avatars method post body data caveats the fetch specification differs from jquery ajax in mainly two ways that bear keeping in mind the promise returned from fetch wont reject on http error status even if the response is an http 404 or 500 instead it will resolve normally and it will only reject on network failure or if anything prevented the request from completing by default fetch wont send or receive any cookies from the server resulting in unauthenticated requests if the site relies on maintaining a user session see sending cookies for how to opt into cookie handling handling http error statuses to have fetch promise reject on http error statuses i e on any non 2xx status define a custom response handler javascript function checkstatus response if response status 200 response status 300 return response else var error new error response statustext error response response throw error function parsejson response return response json fetch users then checkstatus then parsejson then function data console log request succeeded with json response data catch function error console log request failed error sending cookies to automatically send cookies for the current domain the credentials option must be provided javascript fetch users credentials same origin the same origin value makes fetch behave similarly to xmlhttprequest with regards to cookies otherwise cookies wont get sent resulting in these requests not preserving the authentication session for cors requests use the include value to allow sending credentials to other domains javascript fetch https example com 1234 users credentials include receiving cookies as with xmlhttprequest the set cookie response header returned from the server is a forbidden header name and therefore cant be programmatically read with response headers get instead its the browsers responsibility to handle new cookies being set if applicable to the current url unless they are http only new cookies will be available through document cookie bear in mind that the default behavior of fetch is to ignore the set cookie header completely to opt into accepting cookies from the server you must use the credentials option obtaining the response url due to limitations of xmlhttprequest the response url value might not be reliable after http redirects on older browsers the solution is to configure the server to set the response http header x request url to the current url after any redirect that might have happened it should be safe to set it unconditionally ruby ruby on rails controller example response headers x request url request url this server workaround is necessary if you need reliable response url in firefox 32 chrome 37 safari or ie aborting requests this polyfill supports the abortable fetch api however aborting a fetch requires use of two additional dom apis abortcontroller and abortsignal typically browsers that do not support fetch will also not support abortcontroller or abortsignal consequently you will need to include an additional polyfill for these apis to abort fetches js import abortcontroller polyfill dist abortcontroller polyfill only import fetch from whatwg fetch const controller new abortcontroller fetch avatars signal controller signal catch function ex if ex name aborterror console log request aborted some time later controller abort browser support chrome firefox safari 6 1 internet explorer 10 note modern browsers such as chrome firefox microsoft edge and safari contain native implementations of window fetch therefore the code from this polyfill doesnt have any effect on those browsers if you believe youve encountered an error with how window fetch is implemented in any of these browsers you should file an issue with that browser vendor instead of this project