lazysizes lazysizes is a fast jank free seo friendly and self initializing lazyloader for images including responsive images picture srcset iframes scripts widgets and much more it also prioritizes resources by differentiating between crucial in view and near view elements to make perceived performance even faster it may become also your number one tool to integrate responsive images it can automatically calculate the sizes attribute for your responsive images it allows you to share media queries for your media attributes with your css helping to separate layout css from content structure html and it makes integrating responsive images into any environment really simple it also includes a set of optional plugins to further extend its functionality how to download the lazysizes min js script and include lazysizes in your webpage or install via npm npm install lazysizes save or bower bower install lazysizes save html script src lazysizes min js async script note for more information see here lazysizes does not need any js configuration add the class lazyload to your images iframes in conjunction with a data src and or data srcset attribute optionally you can also add a src attribute with a low quality image html non responsive img data src image jpg class lazyload html responsive example with automatic sizes calculation img data sizes auto data src image2 jpg data srcset image1 jpg 300w image2 jpg 600w image3 jpg 900w class lazyload html iframe example iframe frameborder 0 class lazyload allowfullscreen data src www youtube com embed zfv aydu4ue iframe demo with code examples can be seen here responsive image support picture and or srcset lazysizes is built upon the responsive image standard and extends it with additional functionality for full cross browser responsive image support you must use either a full polyfill like picturefill or use the extreme lightweight partial respimg polyfill plugin or the responsive image on demand plugin alternatively you can simply define a fallback src via the data src attribute if you want to learn more about the responsive image syntax read the anatomy of responsive images what makes lazysizes so awesome lazysizes is different than other lazy image loaders detects any visibility changes on current and future lazyload elements in any web environment automatically the script works as an universal self initializing self configuring and self destroying component and detects any changes to the visibility of any current and future image iframe elements automatically no matter whether it becomes visible through a user scroll a css animation triggered through hover or through any kind of js behavior carousel slider infinite scroll masonry isotope filtering sorting ajax spas it also works automatically in conjunction with any kind of js css frontend framework jquery mobile bootstrap backbone angular react ember see also the attrchange re initialization extension future proof it directly includes standard responsive image support picture and srcset separation of concerns for responsive image support it adds an automatic sizes calculation as also alias names for media queries feature there is also no js change needed if you add a scrollable container with css overflow auto or create a mega menu containing images performance its based on highly efficient best practice code runtime and network to work jank free at 60fps and can be used with hundreds of images iframes on css and js heavy pages or webapps extendable it provides js and css hooks to extend lazysizes with any kind of lazy loading lazy instantiation in view callbacks or effects see also the available plugins snippets intelligent prefetch intelligent resource prioritization lazysizes prefetches preloads near the view assets to improve user experience but only while the browser network is idling see also expand expfactor and loadmode options this way in view elements are loaded faster and near of view images are preloaded lazily before they come into view lightweight but mature solution lazysizes has the right balance between a lightweight and a fast reliable solution seo improved lazysizes does not hide images assets from google no matter what markup pattern you use google doesnt scroll interact with your website lazysizes detects whether the user agent is capable to scroll and if not reveals all images instantly more about the api lazysizes comes with a simple markup and js api normally you will only need to use the markup api markup api add the class lazyload to all img and iframe elements which should be loaded lazy instead of a src or srcset attribute use a data src or data srcset attribute html img data src image jpg class lazyload retina optimized image img data srcset responsive image1 jpg 1x responsive image2 jpg 2x class lazyload lazysizes supports setting the sizes attribute automatically corresponding to the current size of your image just set the value of data sizes to auto html img data sizes auto data srcset responsive image1 jpg 300w responsive image2 jpg 600w responsive image3 jpg 900w class lazyload important how sizes is calculated the automatic sizes calculation uses the display width of the image this means that the width of the image has to be calculable at least approximately before the image itself is loaded often the following general css rule might help img data sizes auto display block width 100 see also specifying image iframe dimensions with the recommended aspect ratio definition if it is below 40 can be configured through the minsize option lazysizes traverses up the dom tree until it finds a parent which is over 40 and uses this number the width auto calculated by lazysizes can be modified using the lazybeforesizes event lazybeforesizes documentation alternatively the parent fit plugin can be used for sizing images to fit a parent container and is the only solution when an images height needs to be taken into account when fitting it to its container this also includes the use of object fit the data sizes auto feature only makes sense if you use the data srcset attribute with width descriptors which allows the most appropriate image can be selected it does not make sense if you use the x descriptor or only src recommended possible markup patterns lazysizes allows you to write an endless variety of different markup patterns find your own best pattern or choose one of the following all of the following patterns can be also used for art direction using the picture element simple pattern add the class lazyload and simply omit the src attribute or add a data uri as fallback src html responsive adaptive example retina optimized example or non responsive note in case you are using either srcset data srcset or picture we recommend to extend this pattern with either a data src see next pattern combine data srcset with data src or with a suitable src attribute see modern pattern or lqip combine data srcset with data src in case you want to use responsive images for supporting browsers but dont want to include a polyfill simply combine your data srcset with a data src attribute html responsive example img data sizes auto data src image3 jpg data srcset image3 jpg 600w image1 jpg 220w image2 jpg 300w image3 jpg 600w image4 jpg 900w class lazyload note due to the fact that the data src will also be picked up by read later apps and other tools for example pin it button this pattern also makes sense if you use a polyfill in case you dont use a polyfill it is recommended that the first image candidate matches the fallback src lqip blurry image placeholder blur up image technique if you are using the lqip low quality image placeholder pattern simply add a low quality image as the src html responsive example or non responsive the lqip technique can be enhanced by combining it with css transitions animation to sharpen unblur or overfade the lqip image please also have a look at our lazysizes blur up plugin html blur up webkit filter blur 5px filter blur 5px transition filter 400ms webkit filter 400ms p pre code blur up lazyloaded webkit filter blur 0 filter blur 0 code pre fade box lazyload fade box lazyloading opacity 0 transition opacity 400ms fade box img lazyloaded opacity 1 modern transparent srcset pattern combine a normal src attribute with a transparent or low quality image as srcset value and a data srcset attribute this way modern browsers will lazy load without loading the src attribute and all others will simply fallback to the initial src attribute without lazyload this nice pattern originated from ivopetkov html img src image3 jpg srcset data image gif base64 r0lgodlhaqabaaaaach5baekaaealaaaaaabaaeaaaictaeaow data srcset image3 jpg 600w image1 jpg 220w image2 jpg 300w image4 jpg 900w data sizes auto class lazyload note it is recommended that the first image candidate in data srcset matches the src fallback image see also 150 the noscript pattern in case disabled javascript is a concern you can combine this simple pattern with an image inside a noscript element html no js img lazyload display none noscript pattern note as an alternative to the noscript pattern also checkout the noscript extension data expand attribute normally lazysizes will expand the viewport area to lazy preload images iframes which might become visible soon this value can be adjusted using the expand option additionally this general option can be overridden with the data expand attribute for each element different than the general expand option the data expand attribute also accepts negative values all numbers but 0 are accepted this becomes especially handy to add unveiling effects for teasers or other elements html lazyload lazyloading opacity 0 lazyloaded opacity 1 transition opacity 300ms teaser title css api lazysizes adds the class lazyloading while the images are loading and the class lazyloaded as soon as the image is loaded this can be used to add unveil effects css fade image in after load lazyload lazyloading opacity 0 lazyloaded opacity 1 transition opacity 300ms css fade image in while loading and show a spinner as background image good for progressive images lazyload opacity 0 lazyloading opacity 1 transition opacity 300ms background f7f7f7 url loader gif no repeat center js api lazysizes automatically detects new elements with the class lazyload so you wont need to call or configure anything in most situations js api options options can be set by declaring a global configuration option object named lazysizesconfig this object must be defined before the lazysizes script a basic example js window lazysizesconfig window lazysizesconfig use lazy instead of lazyload window lazysizesconfig lazyclass lazy use data original instead of data src lazysizesconfig srcattr data original page is optimized for fast onload event lazysizesconfig loadmode 1 here the list of options lazysizesconfig lazyclass default lazyload marker class for all elements which should be lazy loaded there can be only one class in case you need to add some other element without the defined class simply add it per js lazy others addclass lazyload lazysizesconfig preloadafterload default false whether lazysizes should load all elements after the window onload event note lazysizes will then still download those not in view images inside of a lazy queue so that other downloads after onload are not blocked lazysizesconfig preloadclass default lazypreload marker class for elements which should be lazy pre loaded after onload those elements will be even preloaded if the preloadafterload option is set to false note this class can be also dynamically set currentslide next find lazyload addclass lazypreload lazysizesconfig loadingclass default lazyloading this class will be added to img element as soon as image loading starts can be used to add unveil effects lazysizesconfig loadedclass default lazyloaded this class will be added to any element as soon as the image is loaded or the image comes into view can be used to add unveil effects or to apply styles lazysizesconfig expand default 370 500 the expand option expands the calculated visual viewport area in all directions so that elements can be loaded before they become visible the default value is calculated depending on the viewport size of the device note reasonable values are between 300 and 1000 depending on the expfactor option in case you have a lot of small images or you are using the lqip pattern you can lower the value in case you have larger images set it to a higher value also note that lazysizes will dynamically shrink this value to 0 if the browser is currently downloading and expand it if the browser network is currently idling and the user not scrolling by multiplying the expand option with 1 5 expfactor this option can also be overridden with the data expand attribute lazysizesconfig minsize default 40 for data sizes auto feature the minimum size of an image that is used to calculate the sizes attribute in case it is under minsize the script traverses up the dom tree until it finds a parent that is over minsize lazysizesconfig srcattr default data src the attribute which should be transformed to src lazysizesconfig srcsetattr default data srcset the attribute which should be transformed to srcset lazysizesconfig sizesattr default data sizes the attribute which should be transformed to sizes makes almost only makes sense with the value auto otherwise the sizes attribute should be used directly lazysizesconfig custommedia default the custommedia option object is an alias map for different media queries it can be used to separate centralize your multiple specific media queries implementation layout from the source media attribute content structure by creating labeled media queries see also the custommedia extension lazysizesconfig loadhidden default true wether to load visibility hidden elements lazysizesconfig rictimeout default 0 the timeout option used for the requestidlecallback reasonable values between 0 100 1000 values below 50 disable the requestidlecallback feature lazysizesconfig throttledelay default 125 the timeout option used to throttle all listeners reasonable values between 66 200 html window lazysizesconfig window lazysizesconfig window lazysizesconfig custommedia small max width 480px medium max width 900px large max width 1400px if ie 9 video style display none endif if ie 9 video endif lazysizesconfig expfactor default 1 5 theexpfactoris used to calculate the preload expand by multiplying the normalexpandwith theexpfactorwhich is used to preload assets while the browser is idling no important network traffic and no scrolling reasonable values are between1 5and4depending on theexpandoption lazysizesconfig hfac default 0 8 thehfac horizontal factor modifies the horizontal expand by multiplying theexpandvalue with thehfacvalue use case in case of carousels there is often the wish to make the horizontal expand narrower than the normal vertical expand option reasonable values are between 0 4 1 in the unlikely case of a horizontal scrolling website also 1 1 5 lazysizesconfig loadmode default 2 theloadmodecan be used to constrain the allowed loading mode possible values are 0 dont load anything 1 only load visible elements 2 load also very near view elements expandoption and 3 load also not so near view elements expand expfactoroption this value is automatically set to3after onload change this value to1if you also optimize for the onload event or change it to3if your onload event is already heavily delayed lazysizesconfig init default true by default lazysizes initializes itself to load in view assets as soon as possible in the unlikely case you need to setup configure something with a later script you can set this option tofalseand calllazysizes init later explicitly js api events lazysizes provides three events to modify or extend the behavior of lazysizes lazybeforeunveil this event will be fired on each lazyload element right before of the unveil transformation this event can be used to extend the unveil functionality in case the event is defaultprevented the default transformation action will be prevented see also the ls unveilhooks js plugin js add simple support for background images document addeventlistener lazybeforeunveil function e var bg e target getattribute data bg if bg e target style backgroundimage url bg or add ajax loading document on lazybeforeunveil function var ajax e target data ajax if ajax e target load ajax the lazybeforeunveil can also be used for lazy initialization and due to the fact that lazysizes also detects new elements in the dom automatically also for auto and self initialization of ui widgets html document addeventlistener lazybeforeunveil function e e target filter slider slider slideroption true p p document addeventlistener lazybeforeunveil function e e target filter chart chart animate true a id lazyloaded documentation a lazyloaded after the image is fully loaded lazysizes dispatches alazyloadedevent while this often duplicates the nativeload event it is often more convenient lazybeforesizes this event will be fired on each element with the data sizes auto attribute right before the calculated sizes attribute will be set the event detail width property is set to the calculated width of the element and can be changed to any number in case the event is defaultprevented the sizes attribute wont be set see also the parent fit extension js document on lazybeforesizes function e use width of parent node instead of the image width itself e detail width e target closest not picture innerwidth e detail width js api methods lazysizes loader unveil domnode in case a developer wants to show an image even if it is not inside the viewport the lazysizes loader unveil domnode can be called js lazysizes loader unveil imgelem note as a more lazy alternative the lazypreload class can be set imgelem addclass lazypreload lazysizes autosizer checkelems in case one or more image elements with the attribute data sizes auto have changed in size lazysizes autosizer updateelems can be called for example to implement element queries js lazysizes autosizer checkelems lazysizes loader checkelems tests whether new elements has came into view normally this method only needs to be called if lazysizesconfig loadmode was set to 0 lazysizes init lazysizes initializes itself automatically in case you set lazysizesconfig init to false you need to explicitly call lazysizes init note you can speed up initial loading of in view images if you call lazysizesconfig init explicitly after lazysizes and all plugins are loaded html window lazysizesconfig window lazysizesconfig window lazysizesconfig init false lazysizes init browser support lazysizes supports all browsers that support document getelementsbyclassname all browsers but not ie8 in case you need to support ie8 see also the noscript extension or use a modified noscript pattern or the lqip pattern contributing fixes prs and issues are always welcome make sure to create a new branch from the master not the gh pages branch validate against jshint and test in all browsers in case of an api documentation change make sure to also document it here in the readme md available plugins in this repo it is recommended to concat all plugins together with lazysizes in case you dont concat it is recommended to include the plugin scripts before the lazysizes main script respimg polyfill plugin the respimg polyfill plugin is an extremely lightweight alternate polyfill for the most important subsets of responsive images srcset and picture optimumx plugin the srcset attribute with the w descriptor and sizes attribute automatically also includes high dpi images but each image has a different optimal pixel density which might be lower for example 1 5x than the pixel density of your device 2x or 3x this information is unknown to the browser and therefore cant be optimized for the lazysizes optimumx extension gives you more control to trade between perceived quality vs perceived performance parent fit extension the parent fit plugin extends the data sizes auto feature to also calculate the right sizes for object fit contain cover image elements and other height and width constrained image elements in general object fit polyfill extension the object fit polyfill plugin polyfills the object fit and the object position property in non supporting browsers blur up effect plugin the blur up effect plugin allows you to create great over fade blur uo effects with low quality image placeholder unveilhooks plugin the unveilhooks plugin plugin enables lazysizes to lazyload background images widgets components scripts styles and video audio elements include plugin the include plugin plugin enables lazysizes to lazyload content styles or amd modules either simply postponed or conditionally for example matching certain media queries this extension also heavily simplifies the architecture of conditional dynamically changing responsive behavior and has great scalability lazysizes custommedia extension lazysizes custommedia extension allows you to automatically sync and manage your breakpoints between your css and the media attributes of your picture source elements using the custommedia option of lazysizes attrchange re initialization extension in case you are changing the data src data srcset attributes of already transformed lazyload elements you must normally also re add the lazyload class to the element this attrchange re initialization extension automatically detects changes to your data attributes and adds the class for you unload extension the unload extends lazysizes to unload not in view images to improve memory consumption and orientationchange resize performance noscript extension the noscript extension is the ultimate progressive enhancement extension for lazysizes it allows you to transform any html inside a noscript element as soon as it becomes visible progressive plugin the progressive plugin adds better support for rendering progressive jpgs pngs rias plugin responsive images as a service responsive image on demand the rias plugin is a neat full responsive images solution without the need of any additional plugins polyfills it enables lazysizes to generate the best suitable image source based on an url pattern it works with pre build images i e grunt responsive images as also with any third party resrc pixtulate mobify wurfls image tailor or self hosted restful responsive image service responsive image on demand it makes responsive images even more easier without any need for another third party script tip specifying image dimensions minimizing reflows and avoiding page jumps to minimize reflows content jumping or unpredictable behavior with some other js widgets isotope masonry some sliders carousels the width and the height of an image should be calculable by the browser before the image source itself is loaded for static images this can be done using either css or using the content attributes html img src data image gif base64 r0lgodlhaqabaaaaach5baekaaealaaaaaabaaeaaaictaeaow width 350 height 150 data srcset http placehold it 350x150 1x http placehold it 700x300 2x data src http placehold it 350x150 class lazyload for flexible responsive images the css intrinsic ratio scaling technique should be used html ratio container position relative ratio container after content display block height 0 width 100 em 16 9 56 25 calc 9 16 100 em padding bottom 42 86 ratio container gt position absolute top 0 left 0 width 100 height 100 display block in case you want to dynamically calculate your intrinsic ratios for many different formats you can vary the pattern to something like this html ratio box position relative height 0 display block width 100 em padding bottom is calculated and rendered in to html em p p ratio box img ratio box iframe ratio box video position absolute top 0 left 0 width 100 height 100 display block in case the exact ratio of your image is unknown you can also vary the intrinsic ratio like this html ratio container position relative ratio container after content display block height 0 width 100 em 16 9 56 25 calc 9 16 100 em padding bottom 56 25 content ratio container gt position absolute top 0 left 0 width 100 height 100 p p em unknown ration variation em unknown ratio container gt max width 100 max height 100 width auto height auto or at least add a min height and min width to minimize content jumps css lazyload lazyloading min height 200px note if you use the unknown intrinsic ratio pattern and the width of the loaded image will not approximately match the width of its container the data sizes auto feature will not be effective when used on its own in this situation the most appropriate size for the image to fit in the available space can be calculated automatically using the parent fit plugin see also the aspectratio extension for an alternative way to add aspectratio updating layout of js widgets in case you cant specify the image dimensions using css or one of the above suggested methods and your js widgets have problems to calculate the right dimensions you can use the following pattern to update your js widgets sliders masonry js my widget each function var module this var update function module mywidget updatelayout note instead of waiting for all images until we initialize the widget we use event capturing to update the widgets layout progressively this addeventlistener load update true module mywidget for this update pattern you may want to combine this at least with the min height pattern explained above tip where how to include lazysizes while lazy loading is a great feature it is important for users that crucial in view images are loaded as fast as possible most users start to interact with a page after in view images are loaded in case you normally combine all your scripts into one large script and add this to the bottom of your page it can be better for perceived performance to generate two or sometimes more script packages one small package which includes all scripts which have heavy influence on the content or the ui and another larger one which includes the normal behavior of the page this smaller script which should include lazysizes and all its plugins should than be placed before any other blocking elements i e script s at the end of the body or after any blocking elements i e scripts stylesheets in the head to load the crucial content as fast possible note it might make also sense to call lazysizes init explicitly right after lazysizes and all its plugins are added why lazysizes in the past i often struggled using lazy image loaders because the main check function is called repeatedly and with a high frequency which makes it hard to fulfill two purposes runtime and memory efficiency and looking into the source code of most so called lazy loaders often also unveils lazy developers but in a world of responsive retina optimized images on the one hand and js widgets like carousels or tabs a lot of initially hidden images on the other hand lazy loading images becomes more and more important so i created this project lazysizes is different due to the fact that it is designed to be invoked with a high frequency and therefore works highly efficient it was possible to hook into all kinds of events as a mutationobserver meaning this lazyloader works as a simple drop in solution you simply write render your markup and no matter whether the lazyload element was added by ajax or revealed by a js or css animation it will be picked up by lazysizes html responsive example or non responsive