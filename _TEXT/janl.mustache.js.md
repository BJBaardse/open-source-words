mustache js logic less mustache templates with javascript what could be more logical awesome than no logic at all mustache js is an implementation of the mustache template system in javascript mustache is a logic less template syntax it can be used for html config files source code anything it works by expanding tags in a template using values provided in a hash or object we call it logic less because there are no if statements else clauses or for loops instead there are only tags some tags are replaced with a value some nothing and others a series of values for a language agnostic overview of mustaches template syntax see the mustache 5 manpage where to use mustache js you can use mustache js to render mustache templates anywhere you can use javascript this includes web browsers server side environments such as node and couchdb views mustache js ships with support for both the commonjs module api and the asynchronous module definition api or amd and this will be your templates after you use mustache install you can get mustache via npm bash npm install mustache save or install with bower bash bower install save mustache command line tool mustache js is shipped with a node based command line tool it might be installed as a global tool on your computer to render a mustache template of some kind bash npm install g mustache mustache dataview json mytemplate mustache output html also supports stdin bash cat dataview json mustache mytemplate mustache output html or as a package json devdependency in a build process maybe bash npm install mustache save dev json scripts build mustache dataview json mytemplate mustache public output html bash npm run build the command line tool is basically a wrapper around mustache render so you get all the features if your templates use partials you should pass paths to partials using p flag bash mustache p path to partial1 mustache p path to partial2 mustache dataview json mytemplate mustache who uses mustache js an updated list of mustache js users is kept on the github wiki add yourself or your company if you use mustache js contributing mustache js is a mature project but it continues to actively invite maintainers you can help out a high profile project that is used in a lot of places on the web there is plenty of work to do no big commitment required if all you do is review a single pull request you are a maintainer and a hero your first contribution review a pull request fix an issue update the documentation make a website write a tutorial usage below is a quick example how to use mustache js js var view title joe calc function return 2 4 var output mustache render title spends calc view in this example the mustache render function takes two parameters 1 the mustache template and 2 a view object that contains the data and code needed to render the template api following is an rtype signature of the most commonly used functions js mustache render template string view object partials object string mustache parse template string tags tags token interface token string string number number token number interface tags string string templates a mustache template is a string that contains any number of mustache tags tags are indicated by the double mustaches that surround them person is a tag as is person in both examples we refer to person as the tags key there are several types of tags available in mustache js described below there are several techniques that can be used to load templates and hand them to mustache js here are two of them include templates if you need a template for a dynamic part in a static website you can consider including the template in the static html file to avoid loading templates separately heres a small example using jquery html doctype html html body onload loaduser div id target loading div script id template type x tmpl mustache hello name script body html js function loaduser var template template html mustache parse template optional speeds up future uses var rendered mustache render template name luke target html rendered load external templates if your templates reside in individual files you can load them asynchronously and render them when they arrive another example using jquery js function loaduser get template mst function template var rendered mustache render template name luke target html rendered variables the most basic tag type is a simple variable a name tag renders the value of the name key in the current context if there is no such key nothing is rendered all variables are html escaped by default if you want to render unescaped html use the triple mustache name you can also use to unescape a variable if youd like to change html escaping behavior globally for example to template non html formats you can override mustaches escape function for example to disable all escaping mustache escape function text return text if you want name not to be interpreted as a mustache tag but rather to appear exactly as name in the output you must change and then restore the default delimiter see the custom delimiters section for more information view json name chris company b github b template name age company company company company output html chris lt b gt github lt b gt b github b b github b company javascripts dot notation may be used to access keys that are properties of objects in a view view json name first michael last jackson age rip template html name first name last age output html michael jackson rip sections sections render blocks of text one or more times depending on the value of the key in the current context a section begins with a pound and ends with a slash that is person begins a person section while person ends it the text between the two tags is referred to as that sections block the behavior of the section is determined by the value of the key false values or empty lists if the person key does not exist or exists and has a value of null undefined false 0 or nan or is an empty string or an empty list the block will not be rendered view json person false template html shown person never shown person output html shown non empty lists if the person key exists and is not null undefined or false and is not an empty list the block will be rendered one or more times when the value is a list the block is rendered once for each item in the list the context of the block is set to the current item in the list for each iteration in this way we can loop over collections view json stooges name moe name larry name curly template html stooges b name b stooges output html b moe b b larry b b curly b when looping over an array of strings a can be used to refer to the current item in the list view json musketeers athos aramis porthos dartagnan template html musketeers musketeers output html athos aramis porthos dartagnan if the value of a section variable is a function it will be called in the context of the current item in the list on each iteration view js beatles firstname john lastname lennon firstname paul lastname mccartney firstname george lastname harrison firstname ringo lastname starr name function return this firstname this lastname template html beatles name beatles output html john lennon paul mccartney george harrison ringo starr functions if the value of a section key is a function it is called with the sections literal block of text un rendered as its first argument the second argument is a special rendering function that uses the current view as its view argument it is called in the context of the current view object view js name tater bold function return function text render return b render text b template html bold hi name bold output html b hi tater b inverted sections an inverted section opens with section instead of section the block of an inverted section is rendered only if the value of that sections tag is null undefined false falsy or an empty list view json repos template html repos b name b repos repos no repos repos output html no repos comments comments begin with a bang and are ignored the following template html h1 today ignore me h1 will render as follows html h1 today h1 comments may contain newlines partials partials begin with a greater than sign like box partials are rendered at runtime as opposed to compile time so recursive partials are possible just avoid infinite loops they also inherit the calling context whereas in erb you may have this html erb partial next more start start size size mustache requires only this html next more why because the next more mustache file will inherit the size and start variables from the calling context in this way you may want to think of partials as includes imports template expansion nested templates or subtemplates even though those arent literally the case here for example this template and partial base mustache h2 names h2 names user names user mustache strong name strong can be thought of as a single expanded template html h2 names h2 names strong name strong names in mustache js an object of partials may be passed as the third argument to mustache render the object should be keyed by the name of the partial and its value should be the partial text js mustache render template view user usertemplate custom delimiters custom delimiters can be used in place of and by setting the new values in javascript or in templates setting in javascript the mustache tags property holds an array consisting of the opening and closing tag values set custom values by passing a new array of tags to parse which gets honored over the default values or by overriding the tags property itself js var customtags pass value into parse method js mustache parse template customtags override tags property js mustache tags customtags subsequent parse and render calls will use customtags setting in templates set delimiter tags start with an equals sign and change the tag delimiters from and to custom strings consider the following contrived example html erb default tags erb style tags default tags again here we have a list with three items the first item uses the default tag style the second uses erb style as defined by the set delimiter tag and the third returns to the default style after yet another set delimiter declaration according to ctemplates this is useful for languages like tex where double braces may occur in the text and are awkward to use for markup custom delimiters may not contain whitespace or the equals sign pre parsing and caching templates by default when mustache js first parses a template it keeps the full parsed token tree in a cache the next time it sees that same template it skips the parsing step and renders the template much more quickly if youd like you can do this ahead of time using mustache parse js mustache parse template then sometime later mustache render template view plugins for javascript libraries mustache js may be built specifically for several different client libraries including the following jquery mootools dojo yui qooxdoo these may be built using rake and one of the following commands bash rake jquery rake mootools rake dojo rake yui3 rake qooxdoo testing in order to run the tests youll need to install node you also need to install the sub module containing mustache specifications in the project root bash git submodule init git submodule update install dependencies bash npm install then run the tests bash npm test the test suite consists of both unit and integration tests if a template isnt rendering correctly for you you can make a test for it by doing the following create a template file named mytest mustache in the test files directory replace mytest with the name of your test create a corresponding view file named mytest js in the same directory this file should contain a javascript object literal enclosed in parentheses see any of the other view files for an example create a file with the expected output in mytest txt in the same directory then you can run the test with bash test mytest npm run test render browser tests browser tests are not included in npm test as they run for too long although they are ran automatically on travis when merged into master run browser tests locally in any browser bash npm run test browser local then point your browser to http localhost 8080 zuul troubleshooting npm install fails ensure to have a recent version of npm installed while developing this project requires npm with support for version ranges bash npm install g npm thanks mustache js wouldnt kick ass if it werent for these fine souls chris wanstrath defunkt alexander lang langalex sebastian cohnen tisba j chris anderson jchris tom robinson tlrobinson aaron quint quirkey douglas crockford nikita vasilyev nv elise wood glytch damien mathieu dmathieu jakub kuźma qoobaa will leinweber will dpree jason smith jhs aaron gibralter agibralter ross boucher boucher matt sanford mzsanford ben cherry bcherry michael jackson mjackson phillip johnsen phillipj david da silva contín dasilvacontin