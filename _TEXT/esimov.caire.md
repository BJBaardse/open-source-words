caire is a content aware image resize library based on seam carving for content aware image resizing paper how does it work an energy map edge detection is generated from the provided image the algorithm tries to find the least important parts of the image taking into account the lowest energy values using a dynamic programming approach the algorithm will generate individual seams accrossing the image from top to down or from left to right depending on the horizontal or vertical resizing and will allocate for each seam a custom value the least important pixels having the lowest energy cost and the most important ones having the highest cost traverse the image from the second row to the last row and compute the cumulative minimum energy for all possible connected seams for each entry the minimum energy level is calculated by summing up the current pixel with the lowest value of the neighboring pixels from the previous row traverse the image from top to bottom and compute the minimum energy level for each pixel in a row we compute the energy of the current pixel plus the energy of one of the three possible pixels above it find the lowest cost seam from the energy matrix starting from the last row and remove it repeat the process the process illustrated original image energy map seams applied features key features which differentiates from the other existing open source solutions x customizable command line support x support for both shrinking or enlarging the image x resize image both vertically and horizontally x can resize all the images from a directory x does not require any third party library x use of sobel threshold for fine tuning x use of blur filter for increased edge detection x make the image square with a single command x support for proportional scaling x face detection to avoid face deformation face detection the library is capable detecting human faces prior resizing the images via https github com esimov pigo which does not require to have opencv installed the image below illustrates the application capabilities to detect human faces prior resizing its clearly visible from the image that with face detection activated the algorithm will avoid cropping pixels inside faces retaining the face zone unaltered original image with face detection without face detection sample image source install first install go set your gopath and make sure gopath bin is on your path bash export gopath home go export path path gopath bin next download the project and build the binary file bash go get u f github com esimov caire cmd caire go install macos brew install the library now can be installed via homebrew the only thing you need is to run the commands below bash brew tap esimov caire brew install caire usage bash caire in input jpg out output jpg to detect faces prior rescaling use the face flag and provide the face clasification binary file included in the data folder the sample code below will rescale the provided image with 20 but will check for human faces prior rescaling bash caire in input jpg out output jpg face 1 cc data facefinder perc 1 width 20 supported commands bash caire help the following flags are supported flag default description in n a input file out n a output file width n a new width height n a new height perc false reduce image by percentage square false reduce image to square dimensions scale false proportional scaling blur 1 blur radius sobel 10 sobel filter threshold debug false use debugger face false use face detection cc string cascade classifier in case you wish to scale down the image by a specific percentage it can be used the perc boolean flag for example to reduce the image dimension by 20 both horizontally and vertically you can use the following command bash caire in input source jpg out out jpg perc 1 width 20 height 20 debug false also the library supports the square option when this option is used the image will be resized to a squre based on the shortest edge the scale option will resize the image proportionally first the image is scaled down preserving the image aspect ratio then the seam carving algorithm is applied only to the remaining points ex given an image of dimensions 2048x1536 if we want to resize to the 1024x500 the tool first rescale the image to 1024x768 then will remove only the remaining 268px using this option will drastically reduce the processing time the cli command can process all the images from a specific directory too bash caire in input directory out output directory sample images shrunk images original shrunk enlarged images original extended useful resources https en wikipedia org wiki seam carving https inst eecs berkeley edu cs194 26 fa16 hw proj4 seamcarving imret pdf http pages cs wisc edu moayad cs766 download files alnammi cs 766 final report pdf https stacks stanford edu file druid my512gb2187 zargham nassirpour content aware image resizing pdf author simo endre simo endre license copyright Â© 2018 endre simo this project is under the mit license see the license file for the full license text