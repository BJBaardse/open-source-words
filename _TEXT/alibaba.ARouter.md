a framework for assisting in the renovation of android app componentization 中文文档 lastest version module arouter api arouter compiler arouter annotation arouter register version demo demo apk、demo gif i feature supports direct parsing of standard urls for jumps and automatic injection of parameters into target pages support for multi module support for interceptor support for dependency injection instantrun support multidex support mappings are grouped by group multi level management on demand initialization supports users to specify global demotion and local demotion strategies activity interceptor and service can be automatically registered to the framework support multiple ways to configure transition animation support for fragement full kotlin support look at other 2 ii classic case forward from external urls to internal pages and parsing parameters jump and decoupling between multi module intercept jump process handle login statistics and other logic cross module communication decouple components by ioc iii configuration adding dependencies and configurations gradle android defaultconfig javacompileoptions annotationprocessoroptions arguments modulename project getname dependencies replace with the latest version compile com alibaba arouter api annotationprocessor com alibaba arouter compiler old version of gradle plugin 2 2 you can use apt plugin look at other 1 kotlin configuration reference other 2 add annotations java add annotations on pages that support routing required the path here needs to pay attention to need at least two levels xx xx route path test activity public class youractivity extend activity initialize the sdk java if isdebug these two lines must be written before init otherwise these configurations will be invalid in the init process arouter openlog print log arouter opendebug turn on debugging mode if you are running in instantrun mode you must turn on debug mode online version needs to be closed otherwise there is a security risk arouter init mapplication as early as possible it is recommended to initialize in the application initiate the routing java 1 simple jump within application jump via url in advanced usage arouter getinstance build test activity navigation 2 jump with parameters arouter getinstance build test 1 withlong key1 666l withstring key3 888 withobject key4 new test jack rose navigation add confusing rules if proguard is turn on keep public class com alibaba android arouter routes keep class implements com alibaba android arouter facade template isyringe if you use the bytype method to obtain service add the following rules to protect the interface keep interface implements com alibaba android arouter facade template iprovider if single type injection is used that is no interface is defined to implement iprovider the following rules need to be added to protect the implementation keep class implements com alibaba android arouter facade template iprovider if autowired is used for injection in non activity classes add the following rules to prevent injection failures keepnames class com alibaba android arouter facade annotation autowired using the custom gradle plugin to autoload the routing table gradle apply plugin com alibaba arouter buildscript repositories jcenter dependencies replace with the latest version classpath com alibaba arouter register optional use the registration plugin provided by the arouter to automatically load the routing table by default the arouter will scanned the dex files performing an auto registration via the gradle plugin can shorten the initialization time it should be noted that the plugin must be used with api 1 3 0 iv advanced usage jump via url java create a new activity for monitoring schame events and then directly pass url to arouter public class schamefilteractivity extends activity override protected void oncreate bundle savedinstancestate super oncreate savedinstancestate uri uri getintent getdata arouter getinstance build uri navigation finish androidmanifest xml xml schame action android name android intent action view category android name android intent category default category android name android intent category browsable intent filter parse the parameters in the url java declare a field for each parameter and annotate it with autowired route path test activity public class test1activity extends activity autowired public string name autowired int age autowired name girl map different parameters in the url by name boolean boy autowired testobj obj support for parsing custom objects using json pass in url override protected void oncreate bundle savedinstancestate super oncreate savedinstancestate arouter getinstance inject this arouter will automatically set value of fields log d param name age boy if you need to pass a custom object need to implement the serializationservice and use the route annotation annotation e g route path service json public class jsonserviceimpl implements serializationservice override public void init context context override public t t json2object string text class t clazz return json parseobject text clazz override public string object2json object instance return json tojsonstring instance declaration interceptor intercept jump process aop java a more classic application is to handle login events during a jump so that there is no need to repeat the login check on the target page interceptors will be executed between jumps multiple interceptors will be executed in order of priority interceptor priority 8 name test interceptor public class testinterceptor implements iinterceptor override public void process postcard postcard interceptorcallback callback no problem hand over control to the framework callback oncontinue postcard interrupt routing process callback oninterrupt new runtimeexception something exception the above two types need to call at least one of them otherwise it will not continue routing override public void init context context interceptor initialization this method will be called when sdk is initialized it will only be called once processing jump results java u can get the result of a single jump arouter getinstance build test 1 navigation this new navigationcallback override public void onfound postcard postcard override public void onlost postcard postcard custom global demotion strategy java implement the degradeservice interface route path xxx xxx public class degradeserviceimpl implements degradeservice override public void onlost context context postcard postcard do something override public void init context context decoupled by dependency injection service management exposure services java declaration interface other components get the service instance through the interface public interface helloservice extends iprovider string sayhello string name route path service hello name test service public class helloserviceimpl implements helloservice override public string sayhello string name return hello name override public void init context context decoupled by dependency injection service management discovery service java public class test autowired helloservice helloservice autowired name service hello helloservice helloservice2 helloservice helloservice3 helloservice helloservice4 public test arouter getinstance inject this public void testservice 1 use dependency injection to discover services annotate fields with annotations helloservice sayhello vergil helloservice2 sayhello vergil 2 discovering services using dependency lookup the following two methods are byname and bytype helloservice3 arouter getinstance navigation helloservice class helloservice4 helloservice arouter getinstance build service hello navigation helloservice3 sayhello vergil helloservice4 sayhello vergil v more features other settings in initialization java arouter openlog open log arouter opendebug when using instantrun you need to open this switch and turn it off after going online otherwise there is a security risk arouter printstacktrace print thread stack when printing logs api description java build a standard route request arouter getinstance build home main navigation build a standard route request via uri uri uri arouter getinstance build uri navigation build a standard route request startactivityforresult the first parameter must be activity and the second parameter is requestcode arouter getinstance build home main ap navigation this 5 pass bundle directly bundle params new bundle arouter getinstance build home main with params navigation set flag arouter getinstance build home main withflags navigation for fragment fragment fragment fragment arouter getinstance build test fragment navigation transfer the object arouter getinstance withobject key new testobj jack rose navigation think the interface is not enough you can directly set parameter into bundle arouter getinstance build home main getextra transition animation regular mode arouter getinstance build test activity2 withtransition r anim slide in bottom r anim slide out bottom navigation this transition animation api16 activityoptionscompat compat activityoptionscompat makescaleupanimation v v getwidth 2 v getheight 2 0 0 ps makescenetransitionanimation when using shared elements you need to pass in the current activity in the navigation method arouter getinstance build test activity2 withoptionscompat compat navigation use green channel skip all interceptors arouter getinstance build home main greenchannel navigation use your own log tool to print logs arouter setlogger get the original uri java string uristr getintent getstringextra arouter raw uri rewrite url java implement the pathreplaceservice interface route path xxx xxx public class pathreplaceserviceimpl implements pathreplaceservice for normal path param path raw path string forstring string path custom logic return path for uri type param uri raw uri uri foruri uri uri custom logic return url vi other old version of gradle plugin configuration gradle apply plugin com neenbedankt android apt buildscript repositories jcenter dependencies classpath com neenbedankt gradle plugins android apt 1 4 apt arguments modulename project getname dependencies compile com alibaba arouter api x x x apt com alibaba arouter compiler x x x kotlin project configuration you can refer to the wording in the module kotlin module apply plugin kotlin kapt kapt arguments arg modulename project getname dependencies compile com alibaba arouter api x x x kapt com alibaba arouter compiler x x x vii communication communication group1 full group2 viii contributions imknown crazy1235 luckybilly linxiaotao tanglie1993