folly facebook open source library what is folly folly acronymed loosely after facebook open source library is a library of c 14 components designed with practicality and efficiency in mind folly contains a variety of core library components used extensively at facebook in particular its often a dependency of facebooks other open source c efforts and place where those projects can share code it complements as opposed to competing against offerings such as boost and of course std in fact we embark on defining our own component only when something we need is either not available or does not meet the needed performance profile we endeavor to remove things from folly if or when std or boost obsoletes them performance concerns permeate much of folly sometimes leading to designs that are more idiosyncratic than they would otherwise be see e g packedsyncptr h smalllocks h good performance at large scale is a unifying theme in all of folly logical design folly is a collection of relatively independent components some as simple as a few symbols there is no restriction on internal dependencies meaning that a given folly module may use any other folly components all symbols are defined in the top level namespace folly except of course macros macro names are all uppercase and should be prefixed with folly namespace folly defines other internal namespaces such as internal or detail user code should not depend on symbols in those namespaces folly has an experimental directory as well this designation connotes primarily that we feel the api may change heavily over time this code typically is still in heavy use and is well tested physical design at the top level folly uses the classic stuttering scheme folly folly used by boost and others the first directory serves as an installation root of the library with possible versioning a la folly 1 0 and the second is to distinguish the library when including files e g include folly fbstring h the directory structure is flat mimicking the namespace structure i e we dont have an elaborate directory hierarchy it is possible this will change in future versions the subdirectory experimental contains files that are used inside folly and possibly at facebook but not considered stable enough for client use your code should not use files in folly experimental lest it may break when you update folly the folly folly test subdirectory includes the unittests for all components usually named componentxyztest cpp for each componentxyz the folly folly docs directory contains documentation whats in it because of follys fairly flat structure the best way to see whats in it is to look at the headers in top level folly directory you can also check the docs folder for documentation starting with the overview folly is published on github at https github com facebook folly build notes dependencies folly requires gcc 4 9 and a version of boost compiled with c 14 support googletest is required to build and run follys tests you can download it from https github com google googletest archive release 1 8 0 tar gz the following commands can be used to download and install it wget https github com google googletest archive release 1 8 0 tar gz \ tar zxf release 1 8 0 tar gz \ rm f release 1 8 0 tar gz \ cd googletest release 1 8 0 \ cmake configure \ make \ make install finding dependencies in non default locations if you have boost gtest or other dependencies installed in a non default location you can use the cmake include path and cmake library path variables to make cmake look also look for header files and libraries in non standard locations for example to also search the directories alt include path1 and alt include path2 for header files and the directories alt lib path1 and alt lib path2 for libraries you can invoke cmake configure as follows cmake configure \ dcmake include path alt include path1 alt include path2 \ dcmake library path alt lib path1 alt lib path2 ubuntu 16 04 lts the following packages are required feel free to cut and paste the apt get command below sudo apt get install \ g \ cmake \ libboost all dev \ libevent dev \ libdouble conversion dev \ libgoogle glog dev \ libgflags dev \ libiberty dev \ liblz4 dev \ liblzma dev \ libsnappy dev \ make \ zlib1g dev \ binutils dev \ libjemalloc dev \ libssl dev \ pkg config if advanced debugging functionality is required sudo apt get install \ libunwind8 dev \ libelf dev \ libdwarf dev in the folly directory run mkdir build cd build cmake configure make j nproc make install os x homebrew folly is available as a formula and releases may be built via brew install folly you may also use folly build bootstrap osx homebrew sh to build against master cd folly build bootstrap osx homebrew sh os x macports install the required packages from macports sudo port install \ autoconf \ automake \ boost \ gflags \ git \ google glog \ libevent \ libtool \ lz4 \ lzma \ scons \ snappy \ zlib download and install double conversion git clone https github com google double conversion git cd double conversion cmake dbuild shared libs on make sudo make install download and install folly with the parameters listed below git clone https github com facebook folly git cd folly folly autoreconf ivf configure cppflags i opt local include ldflags l opt local lib make sudo make install windows vcpkg folly is available in vcpkg and releases may be built via vcpkg install folly x64 windows you may also use vcpkg install folly x64 windows head to build against master other linux distributions double conversion https github com google double conversion download and build double conversion you may need to tell cmake where to find it double conversion ln s src double conversion folly mkdir build cd build folly build cmake configure dcmake include path double conversion home include dcmake library path double conversion home lib folly build make additional platform specific dependencies fedora 21 64 bit gcc gcc c cmake automake boost devel libtool lz4 devel lzma devel snappy devel zlib devel glog devel gflags devel scons double conversion devel openssl devel libevent devel optional libdwarf dev libelf dev libunwind8 dev