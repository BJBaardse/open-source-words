eshoponcontainers microservices architecture and containers based reference application beta state visual studio 2017 and cli environments compatible sample net core reference application powered by microsoft based on a simplified microservices architecture and docker containers important notes the current supported visual studio version for eshoponcontainers is visual studio 2017 15 7 ga rtm since may 8th 2018 or later version note for pull requests prs we accept pull request from the community when doing it please do it onto the dev branch which is the consolidated work in progress branch do not request it onto master branch if possible news announcements do you want to be up to date on net architecture guidance and reference apps like eshoponcontainers subscribe by watching this new github repo https github com dotnet architecture news updated for net core 2 0 wave of technologies eshoponcontainers is updated to net core 2 0 wave not just compilation but also new recommended code in ef core 2 0 asp net core 2 0 and other new related versions the dockerfiles in the solution have also been updated and now support docker multi stage since mid december 2017 for a list on the new net core 2 0 related implemented features see this blog post please read our branch guide to know about our branching policy disclaimer important the current state of this sample application is beta because we are constantly evolving towards new released technologies therefore many areas could be improved and change significantly while refactoring current code and implementing new features feedback with improvements and pull requests from the community will be highly appreciated and accepted this reference application proposes a simplified microservice oriented architecture implementation to introduce technologies like net core with docker containers through a comprehensive application the chosen domain is an eshop ecommerce but simply because it is a well know domain by most people developers however this sample application should not be considered as an ecommerce reference model at all the implemented business domain might not be ideal from an ecommerce business point of view it is neither trying to solve all the problems in a large scalable and mission critical distributed system it is just a bootstrap for developers to easily get started in the world of docker containers and microservices with net core for example the next step after running the solution in the local dev pc and understanding docker containers and microservices development with net core is to select a microservice cluster orchestrator like kubernetes in azure aks or azure service fabric both environments tested and supported by this solution additional steps would be to move your databases to ha cloud services like azure sql database or switch your eventbus to use azure service bus instead of bare bone rabbitmq or any other production ready service bus in the market read the planned roadmap and milestones for future releases of eshoponcontainers within the wiki for further info about possible new implementations and provide feedback at the issues section if youd like to see any specific scenario implemented or improved also feel free to discuss on any current issue architecture overview this reference application is cross platform at the server and client side thanks to net core services capable of running on linux or windows containers depending on your docker host and to xamarin for mobile apps running on android ios or windows uwp plus any browser for the client web apps the architecture proposes a microservice oriented architecture implementation with multiple autonomous microservices each one owning its own data db and implementing different approaches within each microservice simple crud vs ddd cqrs patterns using http as the communication protocol between the client apps and the microservices and supports asynchronous communication for data updates propagation across multiple services based on integration events and an event bus a light message broker to choose between rabbitmq or azure service bus underneath plus other features defined at the roadmap important note on api gateways and published apis since april 2018 we have introduced the implementation of the api gateway pattern and backend for front end bff pattern in eshoponcontainers architecture so you can filter and publish simplified apis and uris and apply additional security in that tier while hiding securing the internal microservices to the client apps or outside consumers these sample api gateways in eshoponcontainers are based on ocelot an oss lightweight api gateway solution explained here the deployed api gateways are autonomous and can be deployed as your own custom microservices containers as it is currently done in eshoponcontainers so you can test it even in a simple development environment with just docker engine or deploy it into orchestrators like kubernetes in aks or service fabric for your production ready architecture you can either keep using ocelot which is simple and easy to use and used in production by significant companies or if you need further functionality and a much richer set of features suittable for commercial apis you can also substitute those api gateways and use azure api management or any other commercial api gateway as shown in the following image the sample code in this repo is not making use of azure api management in order to be able to provide an f5 experience in visual studio or cli of the sample with no up front dependencies in azure but you could evaluate api gateways alternatives when building for production internal architecture and design of the microservices the microservices are different in type meaning different internal architecture pattern approaches depending on its purpose as shown in the image below important note on database servers containers in this solutions current configuration for a development environment the sql databases are automatically deployed with sample data into a single sql server container a single shared docker container for sql databases so the whole solution can be up and running without any dependency to any cloud or specific server each database could also be deployed as a single docker container but then youd need more than 8gb of ram assigned to docker in your development machine in order to be able to run 3 sql server docker containers in your docker linux host in docker for windows or docker for mac development environments a similar case is defined in regard to redis cache running as a container for the development environment or a no sql database mongodb running as a container however in a real production environment it is recommended to have your databases sql server redis and the no sql database in this case in ha high available services like azure sql database redis as a service and azure cosmosdb instead the mongodb container as both systems share the same access protocol if you want to change to a production configuration youll just need to change the connection strings once you have set up the servers in a ha cloud or on premises related documentation and guidance while developing this reference application weve been creating a reference guide ebook focusing on architecting and developing containerized and microservice based net applications download link available below which explains in detail how to develop this kind of architectural style microservices docker containers domain driven design for certain microservices plus other simpler architectural styles like monolithic apps that can also live as docker containers there are also additional ebooks focusing on containers docker lifecycle devops ci cd etc with microsoft tools already published plus an additional ebook focusing on enterprise apps patterns with xamarin forms you can download them and start reviewing these guides ebooks here architecting developing containers lifecycle ci cd app patterns with xamarin forms download pdf 2nd edition download download download in other formats ereaders like mobi epub and other ebooks at the net architecture center http dot net architecture send feedback to dotnet architecture ebooks feedback service microsoft com dotnet architecture ebooks feedback service microsoft com however we encourage to download and review the architecting and developing microservices ebook https aka ms microservicesebook because the architectural styles and architectural patterns and technologies explained in the guidance are using this reference application when explaining many pattern implementations so youll understand much better the context design and decisions taken in the current architecture and internal designs overview of the application code in this repo you can find a sample reference application that will help you to understand how to implement a microservice architecture based application using net core and docker the example business domain or scenario is based on an eshop or ecommerce which is implemented as a multi container application each container is a microservice deployment like the basket microservice catalog microservice ordering microservice and the identity microservice which are developed using asp net core running on net core so they can run either on linux containers and windows containers the screenshot below shows the vs solution structure for those microservices containers and client apps recommended when getting started open eshoponcontainers servicesandwebapps sln for a solution containing just the server side projects related to the microservices and web applications open eshoponcontainers mobileapps sln for a solution containing just the client mobile app projects xamarin mobile apps only it works independently based on mocks too open eshoponcontainers sln for a solution containing all the projects all client apps and services finally those microservices are consumed by multiple client web and mobile apps as described below mvc application asp net core its an mvc application where you can find interesting scenarios on how to consume http based microservices from c running in the server side as it is a typical asp net core mvc application since it is a server side application access to other containers microservices is done within the internal docker host network with its internal name resolution spa single page application providing similar eshop business functionality but developed with angular typescript and slightly using asp net core mvc this is another approach for client web applications to be used when you want to have a more modern client behavior which is not behaving with the typical browser round trip on every action but behaving like a single page application which is more similar to a desktop app usage experience the consumption of the http based microservices is done from typescript javascript in the client browser so the client calls to the microservices come from out of the docker host internal network like from your network or even from the internet xamarin mobile app for ios android and windows uwp it is a client mobile app supporting the most common mobile os platforms ios android and windows uwp in this case the consumption of the microservices is done from c but running on the client devices so out of the docker host internal network like from your network or even the internet setting up your development environment for eshoponcontainers visual studio 2017 and windows based this is the more straightforward way to get started https github com dotnet architecture eshoponcontainers wiki 02 setting eshoponcontainers in a visual studio 2017 environment cli and windows based for those who prefer the cli on windows using dotnet cli docker cli and vs code for windows https github com dotnet eshoponcontainers wiki 03 setting the eshoponcontainers solution up in a windows cli environment dotnet cli docker cli and vs code cli and mac based for those who prefer the cli on a mac using dotnet cli docker cli and vs code for mac https github com dotnet architecture eshoponcontainers wiki 04 setting eshoponcontainer solution up in a mac vs for mac or with cli environment dotnet cli docker cli and vs code orchestrators kubernetes and service fabric see at the wiki https github com dotnet architecture eshoponcontainers wiki the posts on setup instructions about how to deploy to kubernetes or service fabric in azure although you could also deploy to any other cloud or on premises sending feedback and pull requests as mentioned wed appreciate your feedback improvements and ideas you can create new issues at the issues section do pull requests and or send emails to eshop feedback service microsoft com questions question answer 1 if the solution is working for you through vs2017 or cli environment https github com dotnet eshoponcontainers issues 107