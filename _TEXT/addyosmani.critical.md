critical critical extracts inlines critical path above the fold css from html install npm install save critical build plugins grunt critical gulp users should use critical directly for webpack use html critical webpack plugin demo projects optimize a basic page with gulp with a tutorial optimize an angular boilerplate with gulp optimize a weather app with gulp usage include js var critical require critical full blown example with available options js critical generate inline the generated critical path css true generates html false generates css inline true your base directory base dist html source html html html html source file src index html your css files optional css dist styles main css viewport width width 1300 viewport height height 900 target for final html output use some css file when the inline option is not set dest index critical html minify critical path css when inlining minify true extract inlined styles from referenced stylesheets extract true complete timeout for operation timeout 30000 prefix for asset directory pathprefix mysubfolderdocrot ignore css rules ignore font face some regexp overwrite default options ignoreoptions generate and inline critical path css basic usage js critical generate inline true base test src index html dest index critical html width 1300 height 900 generate critical path css basic usage js critical generate base test src index html dest styles main css width 1300 height 900 generate and minify critical path css js critical generate base test src index html dest styles styles min css minify true width 1300 height 900 generate minify and inline critical path css js critical generate inline true base test src index html dest index critical html minify true width 1300 height 900 generate and return output via callback js critical generate base test src index html width 1300 height 900 function err output you now have critical path css works with and without dest specified generate and return output via promise js critical generate base test src index html width 1300 height 900 then function output you now have critical path css works with and without dest specified error function err generate critical path css with multiple resolutions when your site is adaptive and you want to deliver critical css for multiple screen resolutions this is a useful option note your final output will be minified as to eliminate duplicate rule inclusion js critical generate base test src index html dest styles main css dimensions height 200 width 500 height 900 width 1200 generate critical path css and ignore specific selectors this is a useful option when you e g want to defer loading of webfonts or background images js critical generate base test src index html dest styles main css ignore font face url\ options name type default description inline boolean object false inline critical path css using filamentgroups loadcss pass an object to configure inline critical base string path dirname src or process cwd base directory in which the source and destination are to be written html string html source to be operated against this option takes precedence over the src option folder string html source folder required to compute relative asset paths in conjunction with the html option css array an array of paths to css files or an array of vinyl file objects src string location of the html source to be operated against dest string location of where to save the output of an operation will be relative to base if no absolute path is set destfolder string subfolder relative to base directory only relevant without src if raw html is provided or if the destination is outside base styletarget string target file to store the generated critical path styles width integer 900 width of the target viewport height integer 1300 height of the target viewport dimensions array an array of objects containing height and width takes precedence over width and height if set minify boolean false enable minification of generated critical path css extract boolean false remove the inlined styles from any stylesheets referenced in the html it generates new references based on extracted content so its safe to use for multiple html files referencing the same stylesheet use with caution removing the critical css per page results in a unique async loaded css file for every page meaning you cant rely on cache across multiple pages inlineimages boolean false inline images assetpaths array list of directories urls where the inliner should start looking for assets maximagefilesize integer 10240 sets a max file size in bytes for base64 inlined images timeout integer 30000 sets a maximum timeout for the operation pathprefix string path to prepend css assets with you must make this path absolute if you are going to be using critical in multiple target files in disparate directory depths eg targeting both index html and admin index html would require this path to start with or it wouldnt work include array force include css rules see penthouse usage https github com pocketjoso penthouse usage 1 ignore array ignore css rules see filter css https github com bezoerb filter css for usage examples ignoreoptions object ignore options see filter css options https github com bezoerb filter css options useragent string user agent to use when fetching a remote src penthouse object configuration options for penthouse user string undefined rfc2617 basic authorization user pass string undefined rfc2617 basic authorization pass cli npm install g critical critical works well with standard input cat test fixture index html critical base test fixture inline index critical html you can also pass in the critical css file as an option critical test fixture index html base test fixture critical css gulp js var gulp require gulp var log require fancy log var critical require critical stream generate inline critical path css gulp task critical function return gulp src dist html pipe critical base dist inline true css dist styles components css dist styles main css on error function err log error err message pipe gulp dest dist why why is critical path css important css is required to construct the render tree for your pages and javascript will often block on css during initial construction of the page you should ensure that any non essential css is marked as non critical e g print and other media queries and that the amount of critical css and the time to deliver it is as small as possible why should critical path css be inlined for best performance you may want to consider inlining the critical css directly into the html document this eliminates additional roundtrips in the critical path and if done correctly can be used to deliver a “one roundtrip” critical path length where only the html is a blocking resource faq are there any sample projects available using critical why yes take a look at this gulp project which demonstrates using critical to generate and inline critical path css it also includes a mini tutorial that walks through how to use it in a simple webapp when should i just use penthouse directly the main differences between critical and penthouse a module we use are critical will automatically extract stylesheets from your html from which to generate critical path css from whilst other modules generally require you to specify this upfront critical provides methods for inlining critical path css a common logical next step once your css is generated since we tackle both generation and inlining were able to abstract away some of the ugly boilerplate otherwise involved in tackling these problems separately that said if your site or app has a large number of styles or styles which are being dynamically injected into the dom sometimes common in angular apps i recommend using penthouse directly it will require you to supply styles upfront but this may provide a higher level of accuracy if you find critical isnt serving your needs what other alternatives to critical are available filamentgroup maintain a criticalcss node module which similar to penthouse will find and output the critical path css for your pages is critical stable and suitable for production use critical has been used on a number of production sites that have found it stable for everyday use that said we welcome you to try it out on your project and report bugs if you find them can i contribute of course we appreciate all of our contributors and welcome contributions to improve the project further if youre uncertain whether an addition should be made feel free to open up an issue and we can discuss it maintainers this module is brought to you and maintained by the following people addy osmani creator github twitter ben zörb primary maintainer github twitter license apache 2 0 © addy osmani ben zörb