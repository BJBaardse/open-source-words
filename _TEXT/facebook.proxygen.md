proxygen facebooks c http libraries this project comprises the core c http abstractions used at facebook internally it is used as the basis for building many http servers proxies and clients this release focuses on the common http abstractions and our simple httpserver framework future releases will provide simple client apis as well the framework supports http 1 1 spdy 3 spdy 3 1 and http 2 the goal is to provide a simple performant and modern c http library we have a google group for general discussions at https groups google com d forum facebook proxygen the original blog post also has more background on the project installing note that currently this project has only been tested on ubuntu 14 04 although it likely works on many other platforms support for mac osx is incomplete you will need at least 3 gib of memory to compile proxygen and its dependencies easy install just run deps sh from the proxygen directory to get and build all the dependencies and proxygen it will also run all the tests then run reinstall sh to install it you can run deps sh reinstall sh whenever to rebase the dependencies and then rebuild and reinstall proxygen a note on compatibility this project relies on system installed folly if you rebase proxygen and make starts to fail you likely need to update to the latest version of folly running deps sh reinstall sh will do this for you we are still working on a solution to manage depencies more predictably other platforms if you are running on another platform you may need to install several packages first proxygen and folly are all autotools based projects introduction directory structure and contents directory purpose proxygen external contains non installed 3rd party code proxygen depends on proxygen lib core networking abstractions proxygen lib http http specific code proxygen lib services connection management and server code proxygen lib utils miscellaneous helper code proxygen httpserver contains code wrapping proxygen lib for building simple c http servers we recommend building on top of these apis architecture the central abstractions to understand in proxygen lib are the session codec transaction and handler these are the lowest level abstractions and we dont generally recommend building off of these directly when bytes are read off the wire the httpcodec stored inside httpsession parses these into higher level objects and associates with it a transaction identifier the codec then calls into httpsession which is responsible for maintaining the mapping between transaction identifier and httptransaction objects each http request response pair has a separate httptransaction object finally httptransaction forwards the call to a handler object which implements httptransaction handler the handler is responsible for implementing business logic for the request or response the handler then calls back into the transaction to generate egress whether the egress is a request or response the call flows from the transaction back to the session which uses the codec to convert the higher level semantics of the particular call into the appropriate bytes to send on the wire the same handler and transaction interfaces are used to both create requests and handle responses the api is generic enough to allow both httpsession is specialized slightly differently depending on whether you are using the connection to issue or respond to http requests moving into higher levels of abstraction proxygen httpserver has a simpler set of apis and is the recommended way to interface with proxygen when acting as a server if you dont need the full control of the lower level abstractions the basic components here are httpserver requesthandlerfactory and requesthandler an httpserver takes some configuration and is given a requesthandlerfactory once the server is started the installed requesthandlerfactory spawns a requesthandler for each http request requesthandler is a simple interface users of the library implement subclasses of requesthandler should use the inherited protected member responsehandler downstream to send the response using it proxygen is a library after installing it you can build your own c server try cding to the directory containing the echo server at proxygen httpserver samples echo you can then build it with this one liner g std c 14 o my echo echoserver cpp echohandler cpp lproxygenhttpserver lfolly lglog lgflags pthread after running my echo we can verify it works using curl in a different terminal shell curl v http localhost 11000 trying 127 0 0 1 connected to localhost 127 0 0 1 port 11000 0 get http 1 1 user agent curl 7 35 0 host localhost 11000 accept http 1 1 200 ok request number 1 date thu 30 oct 2014 17 07 36 gmt connection keep alive content length 0 connection 0 to host localhost left intact documentation we use doxygen for proxygens internal documentation you can generate a copy of these docs by running doxygen doxyfile from the project root youll want to look at html namespaceproxygen html to start this will also generate folly documentation contributing contributions to proxygen are more than welcome read the guidelines in contributing md make sure youve signed the cla before sending in a pull request whitehat facebook has a bounty program for the safe disclosure of security bugs if you find a vulnerability please go through the process outlined on that page and do not file a public issue