virtualapk is a powerful yet lightweight plugin framework for android it can dynamically load and run an apk file we call it loadedplugin seamlessly as an installed application developers can use any class resources activity service receiver and provider in loadedplugin as if they are registered in apps manifest file supported features feature detail supported components activity service receiver and provider manually register components in androidmanifest xml no need access host app classes and resources supported pendingintent supported supported android features almost all features compatibility almost all devices building system gradle plugin supported android versions api level 15 getting started host project add a dependency in build gradle in root of host project as following java dependencies classpath com didi virtualapk gradle 0 9 8 4 apply plugin in application module of build gradle apply plugin com didi virtualapk host compile virtualapk in application module of build gradle java compile com didi virtualapk core 0 9 6 initialize pluginmanager in yourapplication attachbasecontext java override protected void attachbasecontext context base super attachbasecontext base pluginmanager getinstance base init modify proguard rules to keep virtualapk related files keep class com didi virtualapk internal vainstrumentation keep class com didi virtualapk internal plugincontentresolver dontwarn com didi virtualapk dontwarn android keep class android finally load an apk and have fun java string pluginpath environment getexternalstoragedirectory getabsolutepath concat test apk file plugin new file pluginpath pluginmanager getinstance base loadplugin plugin given com didi virtualapk demo is the package name of plugin apk and there is an activity called mainactivity intent intent new intent intent setclassname com didi virtualapk demo com didi virtualapk demo mainactivity startactivity intent plugin project add a dependency in build gradle in root of plugin project as following java dependencies classpath com didi virtualapk gradle 0 9 8 4 apply plugin in application module of build gradle apply plugin com didi virtualapk plugin config virtualapk remember to put following lines at the end of build gradle virtualapk packageid 0x6f the package id of resources targethost source host app the path of application module in host project applyhostmapping true optional default value is true developer guide api document wiki sample project plugindemo read core library source code read release notes known issues notifications with custom layout are not supported in plugin transition animations with animation resources are not supported in plugin contributing welcome to contribute by creating issues or sending pull requests see contributing guide for guidelines who is using virtualapk license virtualapk is licensed under the apache license 2 0 see the license file