https github com brettwooldridge hikaricp wiki hikari png hikaricp its faster hi·ka·ri hi·ka·lē origin japanese light ray fast simple reliable hikaricp is a zero overhead production ready jdbc connection pool at roughly 90kb the library is very light read about how we do it here simplicity is prerequisite for reliability edsger dijkstra java 7 and java 8 maven artifact xml dependency groupid com zaxxer groupid artifactid hikaricp artifactid version 2 4 3 version dependency java 6 maven artifact maintenance mode xml dependency groupid com zaxxer groupid artifactid hikaricp java6 artifactid version 2 3 13 version dependency or download from here jmh benchmarks microbenchmarks were created to isolate and measure the overhead of pools using the jmh microbenchmark framework developed by the oracle jvm performance team you can checkout the hikaricp benchmark project for details and review run the benchmarks yourself one connection cycle is defined as single datasource getconnection connection close in unconstrained benchmark connections threads in constrained benchmark threads connections 2 1 one statement cycle is defined as single connection preparestatement statement execute statement close 1 versions hikaricp 2 4 0 commons dbcp2 2 1 tomcat 8 0 23 vibur 3 0 c3p0 0 9 5 1 java 8u45 2 java options server xx aggressiveopts xx usefastaccessormethods xmx512m user testimonials in the words of the guys over at edulify hikaricp is supposed to be the fastest connection pool in java land but we did not start to use it because of speed but because of its reliability here is a cool graph that shows connections opened to postgresql as you can see the pool is way more stable also it is keeping its size at the minimum since we deploy it wix engineering analysis wed like to thank the guys over at wix for the unsolicited and deep write up about hikaricp on their engineering blog take a look if you have time failure pools behaving badly read our interesting database down pool challenge youre probably doing it wrong aka what you probably didnt know about connection pool sizing read on to find out configuration knobs baby hikaricp comes with sane defaults that perform well in most deployments without additional tweaking every property is optional except for the essentials marked below � hikaricp uses milliseconds for all time values essentials �datasourceclassname this is the name of the datasource class provided by the jdbc driver consult the documentation for your specific jdbc driver to get this class name or see the table below note xa data sources are not supported xa requires a real transaction manager like bitronix note that you do not need this property if you are using jdbcurl for old school drivermanager based jdbc driver configuration default none or �jdbcurl this property directs hikaricp to use drivermanager based configuration we feel that datasource based configuration above is superior for a variety of reasons see below but for many deployments there is little significant difference when using this property with old drivers you may also need to set the driverclassname property but try it first without note that if this property is used you may still use datasource properties to configure your driver and is in fact recommended over driver parameters specified in the url itself default none �username this property sets the default authentication username used when obtaining connections from the underlying driver note that for datasources this works in a very deterministic fashion by calling datasource getconnection username password on the underlying datasource however for driver based configurations every driver is different in the case of driver based hikaricp will use this username property to set a user property in the properties passed to the drivers drivermanager getconnection jdbcurl props call if this is not what you need skip this method entirely and call adddatasourceproperty username for example default none �password this property sets the default authentication password used when obtaining connections from the underlying driver note that for datasources this works in a very deterministic fashion by calling datasource getconnection username password on the underlying datasource however for driver based configurations every driver is different in the case of driver based hikaricp will use this password property to set a password property in the properties passed to the drivers drivermanager getconnection jdbcurl props call if this is not what you need skip this method entirely and call adddatasourceproperty pass for example default none frequently used ✅autocommit this property controls the default auto commit behavior of connections returned from the pool it is a boolean value default true ⌚connectiontimeout this property controls the maximum number of milliseconds that a client thats you will wait for a connection from the pool if this time is exceeded without a connection becoming available a sqlexception will be thrown 1000ms is the minimum value default 30000 30 seconds ⌚idletimeout this property controls the maximum amount of time that a connection is allowed to sit idle in the pool whether a connection is retired as idle or not is subject to a maximum variation of 30 seconds and average variation of 15 seconds a connection will never be retired as idle before this timeout a value of 0 means that idle connections are never removed from the pool default 600000 10 minutes ⌚maxlifetime this property controls the maximum lifetime of a connection in the pool when a connection reaches this timeout it will be retired from the pool subject to a maximum variation of 30 seconds an in use connection will never be retired only when it is closed will it then be removed we strongly recommend setting this value and it should be at least 30 seconds less than any database level connection timeout a value of 0 indicates no maximum lifetime infinite lifetime subject of course to the idletimeout setting default 1800000 30 minutes �connectiontestquery if your driver supports jdbc4 we strongly recommend not setting this property this is for legacy databases that do not support the jdbc4 connection isvalid api this is the query that will be executed just before a connection is given to you from the pool to validate that the connection to the database is still alive again try running the pool without this property hikaricp will log an error if your driver is not jdbc4 compliant to let you know default none �minimumidle this property controls the minimum number of idle connections that hikaricp tries to maintain in the pool if the idle connections dip below this value hikaricp will make a best effort to add additional connections quickly and efficiently however for maximum performance and responsiveness to spike demands we recommend not setting this value and instead allowing hikaricp to act as a fixed size connection pool default same as maximumpoolsize �maximumpoolsize this property controls the maximum size that the pool is allowed to reach including both idle and in use connections basically this value will determine the maximum number of actual connections to the database backend a reasonable value for this is best determined by your execution environment when the pool reaches this size and no idle connections are available calls to getconnection will block for up to connectiontimeout milliseconds before timing out default 10 �metricregistry this property is only available via programmatic configuration or ioc container this property allows you to specify an instance of a codahale dropwizard metricregistry to be used by the pool to record various metrics see the metrics wiki page for details default none �healthcheckregistry this property is only available via programmatic configuration or ioc container this property allows you to specify an instance of a codahale dropwizard healthcheckregistry to be used by the pool to report current health information see the health checks wiki page for details default none �poolname this property represents a user defined name for the connection pool and appears mainly in logging and jmx management consoles to identify pools and pool configurations default auto generated infrequently used ✅initializationfailfast this property controls whether the pool will fail fast if the pool cannot be seeded with initial connections successfully if you want your application to start even when the database is down unavailable set this property to false default true ❎isolateinternalqueries this property determines whether hikaricp isolates internal pool queries such as the connection alive test in their own transaction since these are typically read only queries it is rarely necessary to encapsulate them in their own transaction this property only applies if autocommit is disabled default false ❎allowpoolsuspension this property controls whether the pool can be suspended and resumed through jmx this is useful for certain failover automation scenarios when the pool is suspended calls to getconnection will not timeout and will be held until the pool is resumed default false ❎readonly this property controls whether connections obtained from the pool are in read only mode by default note some databases do not support the concept of read only mode while others provide query optimizations when the connection is set to read only whether you need this property or not will depend largely on your application and database default false ❎registermbeans this property controls whether or not jmx management beans mbeans are registered or not default false �catalog this property sets the default catalog for databases that support the concept of catalogs if this property is not specified the default catalog defined by the jdbc driver is used default driver default �connectioninitsql this property sets a sql statement that will be executed after every new connection creation before adding it to the pool if this sql is not valid or throws an exception it will be treated as a connection failure and the standard retry logic will be followed default none �driverclassname hikaricp will attempt to resolve a driver through the drivermanager based solely on the jdbcurl but for some older drivers the driverclassname must also be specified omit this property unless you get an obvious error message indicating that the driver was not found default none �transactionisolation this property controls the default transaction isolation level of connections returned from the pool if this property is not specified the default transaction isolation level defined by the jdbc driver is used only use this property if you have specific isolation requirements that are common for all queries the value of this property is the constant name from the connection class such as transaction read committed transaction repeatable read etc default driver default ⌚validationtimeout this property controls the maximum amount of time that a connection will be tested for aliveness this value must be less than the connectiontimeout the lowest accepted validation timeout is 1000ms 1 second default 5000 ⌚leakdetectionthreshold this property controls the amount of time that a connection can be out of the pool before a message is logged indicating a possible connection leak a value of 0 means leak detection is disabled lowest acceptable value for enabling leak detection is 2000 2 secs default 0 ➡datasource this property is only available via programmatic configuration or ioc container this property allows you to directly set the instance of the datasource to be wrapped by the pool rather than having hikaricp construct it via reflection this can be useful in some dependency injection frameworks when this property is specified the datasourceclassname property and all datasource specific properties will be ignored default none ➡threadfactory this property is only available via programmatic configuration or ioc container this property allows you to set the instance of the java util concurrent threadfactory that will be used for creating all threads used by the pool it is needed in some restricted execution environments where threads can only be created through a threadfactory provided by the application container default none missing knobs hikaricp has plenty of knobs to turn as you can see above but comparatively less than some other pools this is a design philosophy the hikaricp design aesthetic is minimalism in keeping with the simple is better or less is more design philosophy some configuration axis are intentionally left out statement cache many connection pools including apache dbcp vibur cp30 and others offer preparedstatement caching hikaricp does not why at the connection pool layer preparedstatements can only be cached per connection if your application has 250 commonly executed queries and a pool of 20 connections you are asking your database to hold on to 5000 query execution plans and similarly the pool must cache this many preparedstatements and their related graph of objects most major database jdbc drivers already have a statement cache that can be configured including postgresql oracle derby mysql db2 and many others jdbc drivers are in a unique position to exploit database specific features and nearly all of the caching implementations are capable of sharing execution plans across connections this means that instead of 5000 statements in memory and associated execution plans your 250 commonly executed queries result in exactly 250 execution plans in the database clever implementations do not even retain preparedstatement objects in memory at the driver level but instead merely attach new instances to existing plan ids using a statement cache at the pooling layer is an anti pattern and will negatively impact your application performance compared to driver provided caches log statement text slow query logging like statement caching most major database vendors support statement logging through properties of their own driver this includes oracle mysql derby mssql and others some even support slow query logging for those few databases that do not support it log4jdbc or jdbcdslog exp are good options initialization you can use the hikariconfig class like so java hikariconfig config new hikariconfig config setjdbcurl jdbc mysql localhost 3306 simpsons config setusername bart config setpassword 51mp50n config adddatasourceproperty cacheprepstmts true config adddatasourceproperty prepstmtcachesize 250 config adddatasourceproperty prepstmtcachesqllimit 2048 hikaridatasource ds new hikaridatasource config or directly instantiate a hikaridatasource like so java hikaridatasource ds new hikaridatasource ds setjdbcurl jdbc mysql localhost 3306 simpsons ds setusername bart ds setpassword 51mp50n or property file based java hikariconfig config new hikariconfig some path hikari properties hikaridatasource ds new hikaridatasource config example property file ini datasourceclassname org postgresql ds pgsimpledatasource datasource user test datasource password test datasource databasename mydb datasource portnumber 5432 datasource servername localhost or java util properties based java properties props new properties props setproperty datasourceclassname org postgresql ds pgsimpledatasource props setproperty datasource user test props setproperty datasource password test props setproperty datasource databasename mydb props put datasource logwriter new printwriter system out hikariconfig config new hikariconfig props hikaridatasource ds new hikaridatasource config there is also a system property available hikaricp configurationfile that can be used to specify the location of a properties file if you intend to use this option construct a hikariconfig or hikaridatasource instance using the default constructor and the properties file will be loaded popular datasource class names we recommended using datasourceclassname instead of jdbcurl but both are acceptable well say that again both are acceptable note spring boot auto configuration users you need to use jdbcurl based configuration here is a list of jdbc datasource classes for popular databases database driver datasource class apache derby derby org apache derby jdbc clientdatasource firebird jaybird org firebirdsql pool fbsimpledatasource h2 h2 org h2 jdbcx jdbcdatasource hsqldb hsqldb org hsqldb jdbc jdbcdatasource ibm db2 ibm jcc com ibm db2 jcc db2simpledatasource ibm informix ibm informix com informix jdbcx ifxdatasource ms sql server microsoft com microsoft sqlserver jdbc sqlserverdatasource mysql connector j com mysql jdbc jdbc2 optional mysqldatasource mysql mariadb mariadb org mariadb jdbc mysqldatasource oracle oracle oracle jdbc pool oracledatasource orientdb orientdb com orientechnologies orient jdbc orientdatasource postgresql pgjdbc ng com impossibl postgres jdbc pgdatasource postgresql postgresql org postgresql ds pgsimpledatasource sap maxdb sap com sap dbtech jdbc driversapdb sqlite xerial org sqlite sqlitedatasource sybase jconnect com sybase jdbc4 jdbc sybdatasource play framework plugin note play 2 4 now uses hikaricp by default a new plugin has come up for the the play framework play hikaricp if youre using the excellent play framework your application deserves hikaricp thanks edulify team clojure wrapper a new clojure wrapper has been created by tomekw and can be found here support � google discussion group hikaricp here growing faq wiki dont forget the wiki for additional information such as faq hibernate 4 x configuration mysql configuration tips etc requirements ⇒ java 7 and above ⇒ slf4j library sponsors yourkit supports open source projects with its full featured java profiler click the yourkit logo below to learn more contributions please perform changes and submit pull requests from the dev branch instead of master please set your editor to use spaces instead of tabs and adhere to the apparent style of the code you are editing the dev branch is always more current than the master if you are looking to live life on the edge