pjax pushstate ajax pjax is a jquery plugin that uses ajax and pushstate to deliver a fast browsing experience with real permalinks page titles and a working back button pjax works by fetching html from your server via ajax and replacing the content of a container element on your page with the loaded html it then updates the current url in the browser using pushstate this results in faster page navigation for two reasons no page resources js css get re executed or re applied if the server is configured for pjax it can render only partial page contents and thus avoid the potentially costly full layout render status of this project jquery pjax is largely unmaintained at this point it might continue to receive important bug fixes but its feature set is frozen and its unlikely that it will get new features or enhancements installation pjax depends on jquery 1 8 or higher npm npm install jquery pjax standalone script download and include jquery pjax js in your web page curl lo https raw github com defunkt jquery pjax master jquery pjax js usage fn pjax the simplest and most common use of pjax looks like this javascript document pjax a pjax container this will enable pjax on all links on the page and designate the container as pjax container if you are migrating an existing site you probably dont want to enable pjax everywhere just yet instead of using a global selector like a try annotating pjaxable links with data pjax then use a data pjax as your selector or try this selector that matches any a data pjax href links inside a div data pjax container javascript document pjax data pjax a a data pjax pjax container server side configuration ideally your server should detect pjax requests by looking at the special x pjax http header and render only the html meant to replace the contents of the container element pjax container in our example without the rest of the page layout here is an example of how this might be done in ruby on rails ruby def index if request headers x pjax render layout false end end if youd like a more automatic solution than pjax for rails check out turbolinks check if there is a pjax plugin for your favorite server framework also check out railscasts 294 playing with pjax arguments the synopsis for the fn pjax function is javascript document pjax selector container options selector is a string to be used for click event delegation container is a string selector that uniquely identifies the pjax container options is an object with keys described below pjax options key default description timeout 650 ajax timeout in milliseconds after which a full refresh is forced push true use pushstate to add a browser history entry upon navigation replace false replace url without adding browser history entry maxcachelength 20 maximum cache size for previous container contents version a string or function returning the current pjax version scrollto 0 vertical position to scroll to after navigation to avoid changing scroll position pass false type get see ajax datatype html see ajax container css selector for the element where content should be replaced url link href a string or function that returns the url for the ajax request target link eventually the relatedtarget value for pjax events fragment css selector for the fragment to extract from ajax response you can change the defaults globally by writing to the pjax defaults object javascript pjax defaults timeout 1200 pjax click this is a lower level function used by fn pjax itself it allows you to get a little more control over the pjax event handling this example uses the current click context to set an ancestor element as the container javascript if support pjax document on click a data pjax function event var container this closest data pjax container var containerselector container id pjax click event container containerselector note use the explicit support pjax guard we arent using fn pjax so we should avoid binding this event handler unless the browser is actually going to use pjax pjax submit submits a form via pjax javascript document on submit form data pjax function event pjax submit event pjax container pjax reload initiates a request for the current url to the server using pjax mechanism and replaces the container with the response does not add a browser history entry javascript pjax reload pjax container options pjax manual pjax invocation used mainly when you want to start a pjax request in a handler that didnt originate from a click if you can get access to a click event consider pjax click event instead javascript function applyfilters var url urlforfilters pjax url url container pjax container events all pjax events except pjax click pjax clicked are fired from the pjax container element event cancel arguments notes event lifecycle upon following a pjaxed link pjax click ✔︎ options fires from a link that got activated cancel to prevent pjax pjax beforesend ✔︎ xhr options can set xhr headers pjax start xhr options pjax send xhr options pjax clicked options fires after pjax has started from a link that got clicked pjax beforereplace contents options before replacing html with content loaded from the server pjax success data status xhr options after replacing html content loaded from the server pjax timeout ✔︎ xhr options fires after options timeout will hard refresh unless canceled pjax error ✔︎ xhr textstatus error options on ajax error will hard refresh unless canceled pjax complete xhr textstatus options always fires after ajax regardless of result pjax end xhr options event lifecycle on browser back forward navigation pjax popstate event direction property back forward pjax start null options before replacing content pjax beforereplace contents options right before replacing html with content from cache pjax end null options after replacing content pjax send pjax complete are a good pair of events to use if you are implementing a loading indicator theyll only be triggered if an actual xhr request is made not if the content is loaded from cache javascript document on pjax send function loading show document on pjax complete function loading hide an example of canceling a pjax timeout event would be to disable the fallback timeout behavior if a spinner is being shown javascript document on pjax timeout function event prevent default timeout redirection behavior event preventdefault advanced configuration reinitializing plugins widget on new page content the whole point of pjax is that it fetches and inserts new content without refreshing the page however other jquery plugins or libraries that are set to react on page loaded event such as domcontentloaded will not pick up on these changes therefore its usually a good idea to configure these plugins to reinitialize in the scope of the updated page content this can be done like so js document on ready pjax end function event event target initializemyplugin this will make fn initializemyplugin be called at the document level on normal page load and on the container level after any pjax navigation either after clicking on a link or going back in the browser response types that force a reload by default pjax will force a full reload of the page if it receives one of the following responses from the server page content that includes html when fragment selector wasnt explicitly configured pjax presumes that the servers response hasnt been properly configured for pjax if fragment pjax option is given pjax will extract the content based on that selector page content that is blank pjax assumes that the server is unable to deliver proper pjax contents http response code that is 4xx or 5xx indicating some server error affecting the browser url if the server needs to affect the url which will appear in the browser url after pjax navigation like http redirects work for normal requests it can set the x pjax url header ruby def index request headers x pjax url http example com hello end layout reloading layouts can be forced to do a hard reload when assets or html changes first set the initial layout version in your header with a custom meta tag html meta http equiv x pjax version content v123 then from the server side set the x pjax version header to the same ruby if request headers x pjax response headers x pjax version v123 end deploying a deploy bumping the version constant to force clients to do a full reload the next request getting the new layout and assets