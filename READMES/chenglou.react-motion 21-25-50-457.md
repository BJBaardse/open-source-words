react motion js import motion spring from react motion in your render motion defaultstyle x 0 style x spring 10 value div value x div motion animate a counter from 0 to 10 for more advanced usage see below install npm npm install save react motion bower do not install with bower install react motion it wont work use bower install save https unpkg com react motion bower zip or in bower json json dependencies react motion https unpkg com react motion bower zip then include as html script src bower components react motion build react motion js script 1998 script tag html script src https unpkg com react motion build react motion js script module exposed as reactmotion works with react native v0 18 demos simple transition chat heads draggable balls todomvc list transition photo gallery spring parameters chooser water ripples draggable list check the wiki for more try the demos locally sh git clone https github com chenglou react motion git cd react motion npm install with hot reloading slow development version run npm start without hot reloading faster production version run npm run build demos and open the static demos demo name index html file directly dont forget to use production mode when testing your animations performance to build the repo yourself npm run prepublish what does this library try to solve my react europe talk for 95 of use cases of animating components we dont have to resort to using hard coded easing curves and duration set up a stiffness and damping for your ui element and let the magic of physics take care of the rest this way you dont have to worry about petty situations such as interrupted animation behavior it also greatly simplifies the api this library also provides an alternative more powerful api for reacts transitiongroup api exports spring motion staggeredmotion transitionmotion presets heres the well annotated public flow type definition file you dont have to use flow with react motion but the types help document the api below p s using typescript here are the react motion typescript definitions helpers spring val number config springhelperconfig opaqueconfig used in conjunction with the components below specifies the how to animate to the destination value e g spring 10 stiffness 120 damping 17 means animate to value 10 with a spring of stiffness 120 and damping 17 val the value config optional for further adjustments possible fields stiffness optional defaults to 170 damping optional defaults to 26 precision optional defaults to 0 01 specifies both the rounding of the interpolated value and the speed internal its normal not to feel how stiffness and damping affect your spring use spring parameters chooser to get a feeling usually youd just use the list of tasteful stiffness damping presets below presets for stiffness damping commonly used spring configurations used like so spring 10 presets wobbly or spring 20 presets gentle precision 0 1 see here motion usage jsx motion defaultstyle x 0 style x spring 10 interpolatingstyle div style interpolatingstyle motion props style style required the style type is an object that maps to either a number or an opaqueconfig returned by spring above must keep the same keys throughout components existence the meaning of the values an opaqueconfig returned from spring x interpolate to x a number x jump to x do not interpolate defaultstyle plainstyle optional the plainstyle type maps to numbers defaults to an object with the same keys as style above whose values are the initial numbers youre interpolating on note that during subsequent renders this prop is ignored the values will interpolate from the current ones to the destination ones specified by style children interpolatedstyle plainstyle reactelement required function interpolatedstyle the interpolated style object passed back to you e g if you gave style x spring 10 y spring 20 youll receive as interpolatedstyle at a certain time x 5 2 y 12 1 which you can then apply on your div or something else return must return one react element to render onrest void optional the callback that fires when the animation comes to a rest staggeredmotion animates a collection of fixed length items whose values depend on each other creating a natural springy staggering effect like so this is preferred over hard coding a delay for an array of motions to achieve a similar but less natural looking effect usage jsx staggeredmotion defaultstyles h 0 h 0 h 0 styles previnterpolatedstyles previnterpolatedstyles map i return i 0 h spring 100 h spring previnterpolatedstyles i 1 h interpolatingstyles div interpolatingstyles map style i div key i style border 1px solid height style h div staggeredmotion aka the current springs destination value is the interpolating value of the previous spring imagine a spring dragging another physics it works props styles previousinterpolatedstyles array plainstyle array style required function dont forget the s previousinterpolatedstyles the previously interpolating array of styles undefined at first render unless defaultstyles is provided return must return an array of styles containing the destination values e g x spring 10 x spring 20 defaultstyles array plainstyle optional similar to motions defaultstyle but an array of them children interpolatedstyles array plainstyle reactelement required function similar to motions children but accepts the array of interpolated styles instead e g x 5 x 6 4 x 8 1 no onrest for staggeredmotion because we havent found a good semantics for it yet voice your support in the issues section transitionmotion helps you to do mounting and unmounting animation usage you have items a b c with their respective style configuration given to transitionmotions styles in its children function youre passed the three interpolated styles as params you map over them and produce three components all is good during next render you give only a and b indicating that you want c gone but that youd like to animate it reaching value 0 before killing it for good fortunately transitionmotion has kept c around and still passes it into the children function param so when youre mapping over these three interpolated styles youre still producing three components itll keep interpolating while checking cs current value at every frame once c reaches the specified 0 transitionmotion will remove it for good from the interpolated styles passed to your children function this time when mapping through the two remaining interpolated styles youll produce only two components c is gone for real jsx import createreactclass from create react class const demo createreactclass getinitialstate return items key a size 10 key b size 20 key c size 30 componentdidmount this setstate items key a size 10 key b size 20 remove c willleave triggered when cs gone keeping c until its width height reach 0 return width spring 0 height spring 0 render return key item key style width item size height item size interpolatedstyles first render a b c second still a b c only last ones a b interpolatedstyles map config return props first two type definitions to ease the comprehension transitionstyle an object of the format key string data any style style key required the id that transitionmotion uses to track which configuration is which across renders even when things are reordered typically reused as the component key when you map over the interpolated styles data optional anything youd like to carry along this is so that when the previous section examples c disappears you still get to access cs related data such as the text to display along with it style required the actual starting style configuration similar to what you provide for motions style maps keys to either a number or an opaqueconfig returned by spring transitionplainstyle similar to above except the style fields value is of type plainstyle aka an object that maps to numbers styles array transitionstyle previousinterpolatedstyles array transitionplainstyle array transitionstyle required accepts either an array of transitionstyle configs e g key a style x spring 0 key b style x spring 10 a function similar to staggeredmotion taking the previously interpolating styles undefined at first call unless defaultstyles is provided and returning the previously mentioned array of configs you can do staggered mounting animation with this defaultstyles array transitionplainstyle optional similar to the other components defaultstyle defaultstyles children interpolatedstyles array transitionplainstyle reactelement required function similar to other two components children receive back an array similar to what you provided for defaultstyles only that each style objects number value represent the currently interpolating value willleave stylethatleft transitionstyle style optional defaults to null the magic sauce property stylethatleft the e g key data style object from the styles array identified by key that was present during a previous render and that is now absent thus triggering the call to willleave note that the style property is exactly what you passed in styles and is not interpolated for example if you passed a spring for x you will receive an object like x stiffness damping val precision return null to indicate you want the transitionstyle gone immediately a style object to indicate you want to reach transition to the specified value s before killing the transitionstyle didleave stylethatleft key string data any void optional defaults to stylethatleft the key data that was removed after the finished transition willenter stylethatentered transitionstyle plainstyle optional defaults to stylethatentered stripstyle stylethatentered style where stripstyle turns x spring 10 y spring 20 into x 10 y 20 stylethatentered similar to willleaves except the transitionstyle represents the object whose key value was absent during the last render and that is now present return a defaultstyle like plainstyle configuration e g x 0 y 0 that serves as the starting values of the animation under this light the default provided means a style config that has the same starting values as the destination values note that willenter and defaultstyles serve different purposes willenter only triggers when a previously inexistent transitionstyle inside styles comes into the new render no onrest for transitionmotion because we havent found a good semantics for it yet voice your support in the issues section faq how do i set the duration of my animation hard coded duration goes against fluid interfaces if your animation is interrupted mid way youd get a weird completion animation if you hard coded the time that being said in the demo section theres a great spring parameters chooser for you to have a feel of what spring is appropriate rather than guessing a duration in the dark how do i unmount the transitionmotion container itself you dont unless you put it in another transitionmotion how do i do staggering chained animation where items animate in one after another see staggeredmotion my ref doesnt work in the children function react string refs wont work jsx motion style currentvalue div ref stuff motion this is how react works heres the callback ref solution