crouton chromium os universal chroot environment crouton is a set of scripts that bundle up into an easy to use chromium os centric chroot generator currently ubuntu and debian are supported using debootstrap behind the scenes but chromium os debian ubuntu and probably other distros eventually chroot environment doesnt acronymize as well crodupodece is admittedly pretty fun to say though crouton an acronym it stands for chromium os universal chroot environment or something like that do capitals really matter if caps lock has been mostly banished and the keycaps are all lower case moving on whos this for anyone who wants to run straight linux on their chromium os device and doesnt care about physical security youre also better off having some knowledge of linux tools and the command line in case things go funny but its not strictly necessary whats a chroot like virtualization chroots provide the guest os with their own segregated file system to run in allowing applications to run in a different binary environment from the host os unlike virtualization you are not booting a second os instead the guest os is running using the chromium os system the benefit to this is that there is zero speed penalty since everything is run natively and you arent wasting ram to boot two oses at the same time the downside is that you must be running the correct chroot for your hardware the software must be compatible with chromium oss kernel and machine resources are inextricably tied between the host chromium os and the guest os what this means is that while the chroot cannot directly access files outside of its view it can access all of your hardware devices including the entire contents of memory a root exploit in your guest os will essentially have unfettered access to the rest of chromium os but hey you can run tuxracer prerequisites you need a device running chromium os that has been switched to developer mode for instructions on how to do that go to this chromium os wiki page click on your device model and follow the steps in the entering developer mode section note that developer mode in its default configuration is completely insecure so dont expect a password in your chroot to keep anyone from your data crouton does support encrypting chroots but the encryption is only as strong as the quality of your passphrase consider this your warning its also highly recommended that you install the crouton extension which when combined with the extension or xiwi targets provides much improved integration with chromium os thats it surprised usage crouton is a powerful tool and there are a lot of features but basic usage is as simple as possible by design if youre just here to use crouton you can grab the latest release from https goo gl fd3zc download it pop open a shell ctrl alt t type shell and hit enter and run sh downloads crouton to see the help text see the examples section for some usage examples if youre modifying crouton youll probably want to clone or download the repo and then either run installer main sh directly or use make to build your very own crouton you can also download the latest release cd into the downloads folder and run sh crouton x to extract out the juicy scripts contained within but youll be missing build time stuff like the makefile crouton uses the concept of targets to decide what to install while you will have apt get in your chroot some targets may need minor hacks to avoid issues when running in the chrooted environment as such if you expect to want something that is fulfilled by a target install that target when you make the chroot and youll have an easier time dont worry if you forget to include a target you can always update the chroot later and add it you can see the list of available targets by running sh downloads crouton t help once youve set up your chroot you can easily enter it using the newly installed enter chroot command or one of the target specific start commands ta da that was easy examples the easy way assuming you want an ubuntu lts with xfce download crouton open a shell ctrl alt t type shell and hit enter and run sudo sh downloads crouton t xfce wait patiently and answer the prompts like a good person done you can jump straight to your xfce session by running sudo enter chroot startxfce4 or as a special shortcut sudo startxfce4 cycle through chromium os and your running graphical chroots using ctrl alt shift back and ctrl alt shift forward exit the chroot by logging out of xfce with encryption add the e parameter when you run crouton to create an encrypted chroot or encrypt a non encrypted chroot you can get some extra protection on your chroot by storing the decryption key separately from the place the chroot is stored use the k parameter to specify a file or directory to store the keys in such as a usb drive or sd card when you create the chroot beware that if you lose this file your chroot will not be decryptable thats kind of the point of course hey now ubuntu 16 04 is pretty old im young and hip the r parameter specifies which distro release you want to use run sh downloads crouton r list to list the recognized releases and which distros they belong to wasteful redundancies are wasteful one clipboard one browser one window install the crouton extension into chromium os add the extension or xiwi version to your chroot try some copy pasta or uninstall all your web browsers from the chroot installing the extension and its target gives you synchronized clipboards the option of using chromium os to handle urls and allows chroots to create graphical sessions as chromium os windows i dont always use linux but when i do i use cli you can save a chunk of space by ditching x and just installing command line tools using t core or t cli extra enter the chroot in as many crosh shells as you want simultaneously using sudo enter chroot use the crosh window extension to keep chromium os from eating standard keyboard shortcuts if you installed cli extra startcli will launch a new vt right into the chroot a new version of crouton came out my chroot is therefore obsolete and sad check for updates download the latest version and see whats new by running croutonversion u d c from the chroot run croutonversion h to see what those parameters actually do exit the chroot and run sudo sh downloads crouton u n chrootname it will update all installed targets i want to open my desktop in a window or a tab but i dont have the xiwi target xmethod add xiwi or any other target to an existing chroot with the u option using sudo sh downloads crouton t xiwi u n chrootname this will also make xiwi the default xmethod if you want to keep the xorg xmethod as the default then enter it first using sudo sh downloads crouton t xorg xiwi u n chrootname a backup a day keeps the price gouging data restoration services away sudo edit chroot b chrootname backs up your chroot to a timestamped tarball in the current directory chroots are named either via the n parameter when created or by the release name if n was not specified sudo edit chroot r chrootname restores the chroot from the most recent timestamped tarball you can explicitly specify the tarball with f if your machine is new powerwashed or held upside down and shaken you can use the crouton installer to restore a chroot and relevant scripts sudo sh downloads crouton f mybackup tar gz unlike with chromium os the data in your chroot isnt synced to the cloud this chroots name location password existence sucks how to fix check out the edit chroot command it likely does what you need it to do if you set a chromium os root password you can change it with sudo chromeos setdevpasswd you can change the password inside your chroot with passwd i want to install the chroot to another location use p to specify the directory in which to install the chroot and scripts be sure to quote or escape spaces when entering the chroot either specify the full path of the enter chroot or start scripts i e sudo sh path to enter chroot or use the c parameter to explicitly specify the chroots directory downloading bootstrap files over and over again is a waste of time download crouton open a shell ctrl alt t type shell and hit enter and run sudo sh downloads crouton d f downloads mybootstrap tar bz2 include the r parameter if you want to specify for which release to prepare a bootstrap you can then create chroots using the tarball by running sudo sh downloads crouton f downloads mybootstrap tar bz2 make sure you also specify the target environment with t this is the quickest way to create multiple chroots at once since you wont have to determine and download the bootstrap files every time targets are cool abusing them for fun and profit is even cooler you can make your own target files start by copying one of the existing ones and then use them with any version of crouton via the t parameter this is great for automating common tasks when creating chroots help ive created a monster that must be slain the delete chroot command is your sword shield and only true friend sudo delete chroot evilchroot its actually just a shortcut to sudo edit chroot d evilchroot which i suppose makes it a bit of a deceptive swiss army knife friend still good tips chroots are cheap create multiple ones using n break them then make new better ones you can change the distro mirror from the default by using m want to use a proxy p lets you specify one or disable it a script is installed in your chroot called brightness you can assign this to keyboard shortcuts to adjust the brightness of the screen e g brightness up or keyboard e g brightness k down multiple monitors will work fine in the chroot but you may have to switch to chromium os and back to enable them you can make commands run in the background so that you can close the terminal this is particularly useful for desktop environments try running sudo startxfce4 b want to disable chromium oss power management run croutonpowerd i only want power management disabled for the duration of a command croutonpowerd i command and arguments will automatically stop inhibiting power management when the command exits have a pixel or two or 4 352 million t touch improves touch support want to share some files and or folders between chromeos and your chroot check out the etc crouton shares file or read all about it in the wiki want more tips check the wiki issues running another os in a chroot is a pretty messy technique although its hidden behind very pretty scripts and these scripts are relatively new so problems are not surprising check the issue tracker and file a bug if your issue isnt there when filing a new bug include the output of croutonversion run from inside the chroot or if you cannot mount your chroot include the output of cat etc lsb release from crosh i want to be a contributor thats great but before your code can be merged youll need to have signed the individual contributor license agreement dont worry it only takes a minute and youll definitely get to keep your firstborn probably if youve already signed it for contributing to chromium or chromium os youre already done if you dont know what to do with your time as an official contributor heres some suggestions really like a certain desktop environment fork crouton add the target and create a pull request feel like hacking around with chromium os integration fork crouton improve integration and create a pull request is your distro underrepresented want to contribute to the elusive and mythical beast known as croagh fork crouton add the distro and create a pull request discovered a bug lurking within the scripts or a papercut that bothers you just enough to make you want to actually do something about it you guessed it fork crouton fix everything and create a pull request are most bugs too high level for you to defeat grind up some exp by using your fork to eat pie are there other non contributory ways i can help yes but how theres a way for everyone to help something broken file a bug bonus points if you try to fix it it helps if you provide the output of croutonversion or the output of cat etc lsb release from crosh when you submit the bug want to try and break something look through requests for testing and then do your best to brutally rip the authors work to shreds look through open issues and see if theres a topic or application you happen to have experience with and then preferably share that experience with others find issues that need wiki entries and add the relevant info to the wiki or just add things to improve things in the wiki in general but do try to keep it relevant and organized really like a certain desktop environment but not up for coding open or comment on a bug with steps to get things working well hang out in the crouton irc channel on freenode net license crouton including this eloquently written readme is copyright © 2016 the crouton authors all rights reserved use of the source code included here is governed by a bsd style license that can be found in the license file in the source tree