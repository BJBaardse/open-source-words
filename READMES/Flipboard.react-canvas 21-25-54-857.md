react canvas introductory blog post react canvas adds the ability for react components to render to canvas rather than dom this project is a work in progress though much of the code is in production on flipboard com the react canvas bindings are relatively new and the api is subject to change motivation having a long history of building interfaces geared toward mobile devices we found that the reason mobile web apps feel slow when compared to native apps is the dom css animations and transitions are the fastest path to smooth animations on the web but they have several limitations react canvas leverages the fact that most modern mobile browsers now have hardware accelerated canvas while there have been other attempts to bind canvas drawing apis to react they are more focused on visualizations and games where react canvas differs is in the focus on building application user interfaces the fact that it renders to canvas is an implementation detail react canvas brings some of the apis web developers are familiar with and blends them with a high performance drawing engine installation react canvas is available through npm npm install react canvas react canvas components react canvas provides a set of standard react components that abstract the underlying rendering implementation surface surface is the top level component think of it as a drawing canvas in which you can place other components layer layer is the the base component by which other components build upon common styles and properties such as top width left height backgroundcolor and zindex are expressed at this level group group is a container component because react enforces that all components return a single component in render groups can be useful for parenting a set of child components the group is also an important component for optimizing scrolling performance as it allows the rendering engine to cache expensive drawing operations text text is a flexible component that supports multi line truncation something which has historically been difficult and very expensive to do in dom image image is exactly what you think it is however it adds the ability to hide an image until it is fully loaded and optionally fade it in on load gradient gradient can be used to set the background of a group or surface javascript render return group style this getstyle gradient style this getgradientstyle colorstops this getgradientcolors group getgradientcolors return color transparent position 0 color 000 position 1 listview listview is a touch scrolling container that renders a list of elements in a column think of it like uitableview for the web it leverages many of the same optimizations that make table views on ios and list views on android fast events react canvas components support the same event model as normal react components however not all event types are currently supported for a full list of supported events see eventtypes building components here is a very simple component that renders text below an image javascript var react require react var reactcanvas require react canvas var surface reactcanvas surface var image reactcanvas image var text reactcanvas text var mycomponent react createclass render function var surfacewidth window innerwidth var surfaceheight window innerheight var imagestyle this getimagestyle var textstyle this gettextstyle return surface width surfacewidth height surfaceheight left 0 top 0 image style imagestyle src text style textstyle here is some text below an image text surface getimageheight function return math round window innerheight 2 getimagestyle function return top 0 left 0 width window innerwidth height this getimageheight gettextstyle function return top this getimageheight 10 left 0 width window innerwidth height 20 lineheight 20 fontsize 12 listview many mobile interfaces involve an infinitely long scrolling list of items react canvas provides the listview component to do just that because listview virtualizes elements outside of the viewport passing children to it is different than a normal react component where children are declared in render the numberofitemsgetter itemheightgetter and itemgetter props are all required javascript var listview reactcanvas listview var myscrollinglistview react createclass render function return getnumberofitems function return the total number of items in the list getitemheight function return the height of a single item renderitem function index render the item at the given index usually a see the timeline example for a more complete example currently listview requires that each item is of the same height future versions will support variable height items text sizing react canvas provides the measuretext function for computing text metrics the page component in the timeline example contains an example of using measuretext to achieve precise multi line ellipsized text custom fonts are not currently supported but will be added in a future version css layout there is experimental support for using css layout to style react canvas components this is a more expressive way of defining styles for a component using standard css styles and flexbox future versions may not support css layout out of the box the performance implications need to be investigated before baking this in as a core layout principle see the css layout example accessibility this area needs further exploration using fallback content the canvas dom sub tree should allow screen readers such as voiceover to interact with the content weve seen mixed results with the ios devices weve tested additionally there is a standard for focus management that is not supported by browsers yet one approach that was raised by bespin in 2009 is to keep a parallel dom in sync with the elements rendered in canvas running the examples npm install npm start this will start a live reloading server on port 8080 to override the default server and live reload ports run npm start with port and or reload port environment variables a note on node env and react running the examples with node env production will noticeably improve scrolling performance this is because react skips proptype validation in production mode using with webpack the brfs transform is required in order to use the project with webpack bash npm install g brfs npm install save dev transform loader brfs then add the brfs transform to your webpack config javascript module postloaders loader transform brfs contributing we welcome pull requests for bug fixes new features and improvements to react canvas contributors to the main repository must accept flipboards apache style individual contributor license agreement cla before any changes can be merged