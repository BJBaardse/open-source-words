blessed a curses like library with a high level terminal interface api for node js blessed is over 16 000 lines of code and terminal goodness its completely implemented in javascript and its goal consists of two things reimplement ncurses entirely by parsing and compiling terminfo and termcap and exposing a program object which can output escape sequences compatible with any terminal implement a widget api which is heavily optimized for terminals the blessed renderer makes use of csr change scroll region and bce back color erase it draws the screen using the painters algorithm and is sped up with smart cursor movements and a screen damage buffer this means rendering of your application will be extremely efficient blessed only draws the changes damage to the screen blessed is arguably as accurate as ncurses but even more optimized in some ways the widget library gives you an api which is reminiscent of the dom anyone is able to make an awesome terminal application with blessed there are terminal widget libraries for other platforms primarily python and perl but blessed is possibly the most dom like dare i say the most user friendly blessed has been used to implement other popular libraries and programs examples include the slap text editor and blessed contrib the blessed api itself has gone on to inspire termui for go install bash npm install blessed example this will render a box with line borders containing the text hello world perfectly centered horizontally and vertically note it is recommend you use either smartcsr or fastcsr as a blessed screen option this will enable csr when scrolling text in elements or when manipulating lines js var blessed require blessed create a screen object var screen blessed screen smartcsr true screen title my window title create a box perfectly centered horizontally and vertically var box blessed box top center left center width 50 height 50 content hello bold world bold tags true border type line style fg white bg magenta border fg f0f0f0 hover bg green append our box to the screen screen append box add a png icon to the box var icon blessed image parent box top 0 left 0 type overlay width shrink height shrink file dirname my program icon png search false if our box is clicked change the content box on click function data box setcontent center some different red fg content red fg center screen render if box is focused handle enter return and give us some more content box key enter function ch key box setcontent right even different black fg content black fg right \n box setline 1 bar box insertline 1 foo screen render quit on escape q or control c screen key escape q c c function ch key return process exit 0 focus our element box focus render the screen screen render documentation widgets base nodes node abstract screen element abstract boxes box text line scrollablebox deprecated scrollabletext deprecated bigtext lists list filemanager listtable listbar forms form input abstract textarea textbox button checkbox radioset radiobutton prompts prompt question message loading data display progressbar log table special elements terminal image ansiimage overlayimage video layout other helpers mechanics content tags colors attributes alignment escaping sgr sequences style colors attributes transparency shadow effects events event bubbling poisitioning rendering artificial cursors multiple screens server side usage notes windows compatibility low level usage testing examples faq widgets blessed comes with a number of high level widgets so you can avoid all the nasty low level terminal stuff base nodes node from eventemitter the base node which everything inherits from options screen the screen to be associated with parent the desired parent children an arrray of children properties inherits all from eventemitter type type of the node e g box options original options object parent parent node screen parent screen children array of nodes children data an object for any miscellanous user data index render index document order index of the last render call events inherits all from eventemitter adopt received when node is added to a parent remove received when node is removed from its current parent reparent received when node gains a new parent attach received when node is attached to the screen directly or somewhere in its ancestry detach received when node is detached from the screen directly or somewhere in its ancestry methods inherits all from eventemitter prepend node prepend a node to this nodes children append node append a node to this nodes children remove node remove child node from node insert node i insert a node to this nodes children at index i insertbefore node refnode insert a node to this nodes children before the reference node insertafter node refnode insert a node from node after the reference node detach remove node from its parent emitdescendants type args iterator emit event for element and recursively emit same event for all descendants get name default get user property with a potential default value set name value set user property to value screen from node the screen on which every other node renders options program the blessed program to be associated with will be automatically instantiated if none is provided smartcsr attempt to perform csr optimization on all possible elements not just full width ones elements with uniform cells to their sides this is known to cause flickering with elements that are not full width however it is more optimal for terminal rendering fastcsr do csr on any element within 20 cols of the screen edge on either side faster than smartcsr but may cause flickering depending on what is on each side of the element usebce attempt to perform back color erase optimizations for terminals that support it it will also work with terminals that dont support it but only on lines with the default background color as it stands with the current implementation its uncertain how much terminal performance this adds at the cost of overhead within node resizetimeout amount of time in ms to redraw the screen after the terminal is resized default 300 tabsize the width of tabs within an elements content autopadding automatically position child elements with border and padding in mind note this is a recommended option it may become default in the future cursor artificial have blessed draw a custom cursor and hide the terminal cursor experimental cursor shape shape of the cursor can be block underline or line cursor blink whether the cursor blinks cursor color color of the color accepts any valid color value null is default log create a log file see log method dump dump all output and input to desired file can be used together with log option if set as a boolean debug debug mode enables usage of the debug method also creates a debug console which will display when pressing f12 it will display all log and debug messages ignorelocked array of keys in their full format e g c c to ignore when keys are locked or grabbed useful for creating a key that will always exit no matter whether the keys are locked dockborders automatically dock borders with other elements instead of overlapping depending on position experimental for example these border overlapped elements ┌─────────┌─────────┐ │ box1 │ box2 │ └─────────└─────────┘ become ┌─────────┬─────────┐ │ box1 │ box2 │ └─────────┴─────────┘ ignoredockcontrast normally dockable borders will not dock if the colors or attributes are different this option will allow them to dock regardless it may produce some odd looking multi colored borders though fullunicode allow for rendering of east asian double width characters utf 16 surrogate pairs and unicode combining characters this allows you to display text above the basic multilingual plane this is behind an option because it may affect performance slightly negatively without this option enabled all double width surrogate pair and combining characters will be replaced by respectively note iterm2 cannot display combining characters properly blessed simply removes them from an elements content if iterm2 is detected sendfocus send focus events after mouse is enabled warnings display warnings such as the output not being a tty similar to ncurses forceunicode force blessed to use unicode even if it is not detected via terminfo env variables or windows code page if value is true unicode is forced if value is false non unicode is forced default null input output input and output streams process stdin process stdout by default however it could be a net socket if you want to make a program that runs over telnet or something of that nature terminal term name used for terminfo parsing the term env variable is used by default title set the terminal window title if possible properties inherits all from node program the blessed program object tput the blessed tput object only available if you passed tput true to the program constructor focused top of the focus history stack width width of the screen same as program cols height height of the screen same as program rows cols same as screen width rows same as screen height left relative left offset always zero right relative right offset always zero top relative top offset always zero bottom relative bottom offset always zero aleft absolute left offset always zero aright absolute right offset always zero atop absolute top offset always zero abottom absolute bottom offset always zero grabkeys whether the focused element grabs all keypresses lockkeys prevent keypresses from being received by any element hover the currently hovered element only set if mouse events are bound terminal set or get terminal name set calls screen setterminal internally title set or get window title events inherits all from node resize received on screen resize mouse received on mouse events keypress received on key events element name global events received for all elements key name received on key event for name focus blur received when the terminal window focuses blurs requires a terminal supporting the focus protocol and focus needs to be passed to program enablemouse prerender received before render render received on render warning received when blessed notices something untoward output is not a tty terminfo not found etc destroy received when the screen is destroyed only useful when using multiple screens methods inherits all from node log msg write string to the log file if one was created debug msg same as the log method but only gets called if the debug option was set alloc allocate a new pending screen buffer and a new output screen buffer realloc reallocate the screen buffers and clear the screen draw start end draw the screen based on the contents of the screen buffer render render all child elements writing all data to the screen buffer and drawing the screen clearregion x1 x2 y1 y2 clear any region on the screen fillregion attr ch x1 x2 y1 y2 fill any region with a character of a certain attribute focusoffset offset focus element by offset of focusable elements focusprevious focus previous element in the index focusnext focus next element in the index focuspush element push element on the focus stack equivalent to screen focused el focuspop pop element off the focus stack savefocus save the focused element restorefocus restore the saved focused element rewindfocus rewind focus to the last visible and attached element key name listener bind a keypress listener for a specific key oncekey name listener bind a keypress listener for a specific key once unkey name listener remove a keypress listener for a specific key spawn file args options spawn a process in the foreground return to blessed app after exit exec file args options callback spawn a process in the foreground return to blessed app after exit executes callback on error or exit readeditor options callback read data from text editor seteffects el fel over out effects temp set effects based on two events and attributes insertline n y top bottom insert a line into the screen using csr this bypasses the output buffer deleteline n y top bottom delete a line from the screen using csr this bypasses the output buffer insertbottom top bottom insert a line at the bottom of the screen inserttop top bottom insert a line at the top of the screen deletebottom top bottom delete a line at the bottom of the screen deletetop top bottom delete a line at the top of the screen enablemouse el enable mouse events for the screen and optionally an element automatically called when a form of on mouse is bound enablekeys el enable keypress events for the screen and optionally an element automatically called when a form of on keypress is bound enableinput el enable key and mouse events calls bot enablemouse and enablekeys copytoclipboard text attempt to copy text to clipboard using iterm2s proprietary sequence returns true if successful cursorshape shape blink attempt to change cursor shape will not work in all terminals see artificial cursors for a solution to this returns true if successful cursorcolor color attempt to change cursor color returns true if successful cursorreset attempt to reset cursor returns true if successful screenshot xi xl yi yl take an sgr screenshot of the screen within the region returns a string containing only characters and sgr codes can be displayed by simply echoing it in a terminal destroy destroy the screen object and remove it from the global list also remove all global events relevant to the screen object if all screen objects are destroyed the node process is essentially reset to its initial state setterminal term reset the terminal to term reloads terminfo element from node the base element options fg bg bold underline attributes style may contain attributes in the format of js fg blue bg black border fg blue scrollbar bg blue focus bg red hover bg red border border object see below content elements text content clickable element is clickable input keyable element is focusable and can receive key input focused element is focused hidden whether the element is hidden label a simple text label for the element hovertext a floating text label for the element which appears on mouseover align text alignment left center or right valign vertical text alignment top middle or bottom shrink shrink flex grow to content and child elements width height during render padding amount of padding on the inside of the element can be a number or an object containing the properties left right top and bottom width height width height of the element can be a number percentage 0 100 or keyword half or shrink percentages can also have offsets 50 1 50 1 left right top bottom offsets of the element relative to its parent can be a number percentage 0 100 or keyword center right and bottom do not accept keywords percentages can also have offsets 50 1 50 1 position can contain the above options scrollable whether the element is scrollable or not ch background character default is whitespace draggable allow the element to be dragged with the mouse shadow draw a translucent offset shadow behind the element properties inherits all from node name name of the element useful for form submission border border object type type of border line or bg bg by default ch character to use if bg type default is space bg fg border foreground and background must be numbers 1 for default bold underline border attributes style contains attributes e g fg bg underline see above position raw width height and offsets content raw text content hidden whether the element is hidden or not visible whether the element is visible or not detached whether the element is attached to a screen in its ancestry somewhere fg bg foreground and background must be numbers 1 for default bold underline attributes width calculated width height calculated height left calculated relative left offset right calculated relative right offset top calculated relative top offset bottom calculated relative bottom offset aleft calculated absolute left offset aright calculated absolute right offset atop calculated absolute top offset abottom calculated absolute bottom offset draggable whether the element is draggable set to true to allow dragging events inherits all from node blur focus received when an element is focused or unfocused mouse received on mouse events for this element mousedown mouseup mouse button was pressed or released wheeldown wheelup wheel was scrolled down or up mouseover mouseout element was hovered or unhovered mousemove mouse was moved somewhere on this element click element was clicked slightly smarter than mouseup keypress received on key events for this element move received when the element is moved resize received when the element is resized key name received on key event for name prerender received before a call to render render received after a call to render hide received when element becomes hidden show received when element is shown destroy received when element is destroyed methods inherits all from node note if the scrollable option is enabled element inherits all methods from scrollablebox render write content and children to the screen buffer hide hide element show show element toggle toggle hidden shown focus focus element key name listener bind a keypress listener for a specific key oncekey name listener bind a keypress listener for a specific key once unkey name listener remove a keypress listener for a specific key onscreenevent type handler same asel on screen except this will automatically keep track of which listeners are bound to the screen object for use with removescreenevent free and destroy removescreenevent type handler same asel removelistener screen except this will automatically keep track of which listeners are bound to the screen object for use with onscreenevent free and destroy free free up the element automatically unbind all events that may have been bound to the screen object this prevents memory leaks for use with onscreenevent removescreenevent and destroy destroy same as the detach method except this will automatically call free and unbind any screen events to prevent memory leaks for use with onscreenevent removescreenevent and free setindex z set the z index of the element changes rendering order setfront put the element in front of its siblings setback put the element in back of its siblings setlabel text options set the label text for the top left corner example options text foo side left removelabel remove the label completely sethover text options set a hover text box to follow the cursor similar to the title dom attribute in the browser example options text foo removehover remove the hover label completely enablemouse enable mouse events for the element automatically called when a form of on mouse is bound enablekeys enable keypress events for the element automatically called when a form of on keypress is bound enableinput enable key and mouse events calls bot enablemouse and enablekeys enabledrag enable dragging of the element disabledrag disable dragging of the element screenshot xi xl yi yl take an sgr screenshot of the element within the region returns a string containing only characters and sgr codes can be displayed by simply echoing it in a terminal content methods methods for dealing with text content line by line useful for writing a text editor irc client etc note all of these methods deal with pre aligned pre wrapped text if you use deletetop on a box with a wrapped line at the top it may remove 3 4 real lines rows depending on how long the original line was the lines parameter can be a string or an array of strings the line parameter must be a string setcontent text set the content note when text is input it will be stripped of all non sgr escape codes tabs will be replaced with 8 spaces and tags will be replaced with sgr codes if enabled getcontent return content slightly different from el content assume the above formatting settext text similar to setcontent but ignore tags and remove escape codes gettext similar to getcontent but return content with tags and escape codes removed insertline i lines insert a line into the boxs content deleteline i delete a line from the boxs content getline i get a line from the boxs content getbaseline i get a line from the boxs content from the visible top setline i line set a line in the boxs content setbaseline i line set a line in the boxs content from the visible top clearline i clear a line from the boxs content clearbaseline i clear a line from the boxs content from the visible top inserttop lines insert a line at the top of the box insertbottom lines insert a line at the bottom of the box deletetop delete a line at the top of the box deletebottom delete a line at the bottom of the box unshiftline lines unshift a line onto the top of the content shiftline i shift a line off the top of the content pushline lines push a line onto the bottom of the content popline i pop a line off the bottom of the content getlines an array containing the content lines getscreenlines an array containing the lines as they are displayed on the screen strwidth text get a strings displayed width taking into account double width surrogate pairs combining characters tags and sgr escape codes boxes box from element a box element which draws a simple box containing content or other elements options inherits all from element properties inherits all from element events inherits all from element methods inherits all from element text from element an element similar to box but geared towards rendering simple text elements options inherits all from element fill fill the entire line with chosen bg until parent bg ends even if there is not enough text to fill the entire width deprecated align text alignment left center or right inherits all options properties events and methods from element line from box a simple line which can be line or bg styled options inherits all from box orientation can be vertical or horizontal type bg fg ch treated the same as a border object attributes can be contained in style inherits all options properties events and methods from box scrollablebox from box deprecated use box with the scrollable option instead a box with scrollable content options inherits all from box baselimit a limit to the childbase default is infinity alwaysscroll a option which causes the ignoring of childoffset this in turn causes the childbase to change every time the element is scrolled scrollbar object enabling a scrollbar scrollbar style style of the scrollbar scrollbar track style of the scrollbar track if present takes regular style options properties inherits all from box childbase the offset of the top of the scroll content childoffset the offset of the chosen item line events inherits all from box scroll received when the element is scrolled methods scroll offset scroll the content by a relative offset scrollto index scroll the content to an absolute index setscroll index same as scrollto setscrollperc perc set the current scroll index in percentage 0 100 getscroll get the current scroll index in lines getscrollheight get the actual height of the scrolling area getscrollperc get the current scroll index in percentage resetscroll reset the scroll index to its initial state scrollabletext from scrollablebox deprecated use box with the scrollable and alwaysscroll options instead a scrollable text box which can display and scroll text as well as handle pre existing newlines and escape codes options inherits all from scrollablebox mouse whether to enable automatic mouse support for this element keys use predefined keys for navigating the text vi use vi keys with the keys option properties inherits all from scrollablebox events inherits all from scrollablebox methods inherits all from scrollablebox bigtext from box a box which can render content drawn as 8x14 cell characters using the terminus font options inherits all from box font bdf json font file to use see ttystudio for instructions on compiling bdfs to json fontbold bdf json bold font file to use see ttystudio for instructions on compiling bdfs to json fch foreground character default properties inherits all from box events inherits all from box methods inherits all from box lists list from box a scrollable list which can display selectable items options inherits all from box style selected style for a selected item style item style for an unselected item mouse whether to automatically enable mouse support for this list allows clicking items keys use predefined keys for navigating the list vi use vi keys with the keys option items an array of strings which become the lists items search a function that is called when vi mode is enabled and the key is pressed this function accepts a callback function which should be called with the search string the search string is then used to jump to an item that is found in items interactive whether the list is interactive and can have items selected default true invertselected whether to automatically override tags and invert fg of item when selected default true properties inherits all from box events inherits all from box select received when an item is selected cancel list was canceled when esc is pressed with the keys option action either a select or a cancel event was received methods inherits all from box add additem text add an item based on a string removeitem child removes an item from the list child can be an element index or string pushitem child push an item onto the list popitem pop an item off the list unshiftitem child unshift an item onto the list shiftitem shift an item off the list insertitem i child inserts an item to the list child can be an element index or string getitem child returns the item element child can be an element index or string setitem child content set item to content spliceitem i n item1 remove and insert items to the list clearitems clears all items from the list setitems items sets the list items to multiple strings getitemindex child returns the item index from the list child can be an element index or string select index select an index of an item move offset select item based on current offset up amount select item above selected down amount select item below selected pick callback show focus list and pick an item the callback is executed with the result fuzzyfind string regex callback find an item based on its text content filemanager from list a very simple file manager for selecting files options inherits all from list cwd current working directory properties inherits all from list cwd current working directory events inherits all from list cd directory was selected and navigated to file file was selected methods inherits all from list refresh cwd callback refresh the file list perform a readdir on cwd and update the list items pick cwd callback pick a single file and return the path in the callback reset cwd callback reset back to original cwd listtable from list a stylized table of text elements with a list options inherits all from list rows data array of array of strings representing rows pad spaces to attempt to pad on the sides of each cell 2 by default one space on each side only useful if the width is shrunken nocellborders do not draw inner cells style header header style style cell cell style properties inherits all from list events inherits all from list methods inherits all from list setrows setdata rows set rows in table array of arrays of strings js table setdata animals foods elephant apple bird orange listbar from box a horizontal list useful for a main menu bar options inherits all from box style selected style for a selected item style item style for an unselected item commands items set buttons using an object with keys as titles of buttons containing of objects containing keys of keys and callback autocommandkeys automatically bind list buttons to keys 0 9 properties inherits all from box events inherits all from box methods inherits all from box setitems commands set commands see commands option above add additem appenditem item callback append an item to the bar select offset select an item on the bar removeitem child remove item from the bar move offset move relatively across the bar moveleft offset move left relatively across the bar moveright offset move right relatively across the bar selecttab index select button and execute its callback forms form from box a form which can contain form elements options inherits all from box keys allow default keys tab vi keys enter vi allow vi keys properties inherits all from box submission last submitted data events inherits all from box submit form is submitted receives a data object cancel form is discarded reset form is cleared methods inherits all from box focusnext focus next form element focusprevious focus previous form element submit submit the form cancel discard the form reset clear the form input from box a form input textarea from input a box which allows multiline text input options inherits all from input keys use pre defined keys i or enter for insert e for editor c e for editor while inserting mouse use pre defined mouse events right click for editor inputonfocus call readinput when the element is focused automatically unfocus properties inherits all from input value the input text read only events inherits all from input submit value is submitted enter cancel value is discared escape action either submit or cancel methods inherits all from input submit submit the textarea emits submit cancel cancel the textarea emits cancel readinput callback grab key events and start reading text from the keyboard takes a callback which receives the final value readeditor callback open text editor in editor read the output from the resulting file takes a callback which receives the final value getvalue the same as this value for now clearvalue clear input setvalue text set value textbox from textarea a box which allows text input options inherits all from textarea secret completely hide text censor replace text with asterisks properties inherits all from textarea secret completely hide text censor replace text with asterisks events inherits all from textarea methods inherits all from textarea button from input a button which can be focused and allows key and mouse input options inherits all from input properties inherits all from input events inherits all from input press received when the button is clicked pressed methods inherits all from input press press button emits press checkbox from input a checkbox which can be used in a form element options inherits all from input checked whether the element is checked or not mouse enable mouse support properties inherits all from input text the text next to the checkbox do not use setcontent use check text checked whether the element is checked or not value same as checked events inherits all from input check received when element is checked uncheck received when element is unchecked methods inherits all from input check check the element uncheck uncheck the element toggle toggle checked state radioset from box an element wrapping radiobuttons radiobuttons within this element will be mutually exclusive with each other options inherits all from box properties inherits all from box events inherits all from box methods inherits all from box radiobutton from checkbox a radio button which can be used in a form element options inherits all from checkbox properties inherits all from checkbox events inherits all from checkbox methods inherits all from checkbox prompts prompt from box a prompt box containing a text input okay and cancel buttons automatically hidden options inherits all from box properties inherits all from box events inherits all from box methods inherits all from box input setinput readinput text value callback show the prompt and wait for the result of the textbox set text and initial value question from box a question box containing okay and cancel buttons automatically hidden options inherits all from box properties inherits all from box events inherits all from box methods inherits all from box ask question callback ask a question callback will yield the result message from box a box containing a message to be displayed automatically hidden options inherits all from box properties inherits all from box events inherits all from box methods inherits all from box log display text time callback display a message for a time default is 3 seconds set time to 0 for a perpetual message that is dismissed on keypress error text time callback display an error in the same way loading from box a box with a spinning line to denote loading automatically hidden options inherits all from box properties inherits all from box events inherits all from box methods inherits all from box load text display the loading box with a message will lock keys until stop is called stop hide loading box unlock keys data display progressbar from input a progress bar allowing various styles this can also be used as a form input options inherits all from input orientation can be horizontal or vertical style bar style of the bar contents itself pch the character to fill the bar with default is space filled the amount filled 0 100 value same as filled keys enable key support mouse enable mouse support properties inherits all from input events inherits all from input reset bar was reset complete bar has completely filled methods inherits all from input progress amount progress the bar by a fill amount setprogress amount set progress to specific amount reset reset the bar log from scrollabletext a log permanently scrolled to the bottom options inherits all from scrollabletext scrollback amount of scrollback allowed default infinity scrolloninput scroll to bottom on input even if the user has scrolled up default false properties inherits all from scrollabletext scrollback amount of scrollback allowed default infinity scrolloninput scroll to bottom on input even if the user has scrolled up default false events inherits all from scrollabletext log emitted on a log line passes in line methods inherits all from scrollabletext log add text add a log line table from box a stylized table of text elements options inherits all from box rows data array of array of strings representing rows pad spaces to attempt to pad on the sides of each cell 2 by default one space on each side only useful if the width is shrunken nocellborders do not draw inner cells fillcellborders fill cell borders with the adjacent background color style header header style style cell cell style properties inherits all from box events inherits all from box methods inherits all from box setrows setdata rows set rows in table array of arrays of strings js table setdata animals foods elephant apple bird orange special elements terminal from box a box which spins up a pseudo terminal and renders the output useful for writing a terminal multiplexer or something similar to an mc like file manager requires term js and pty js to be installed see example multiplex js for an example terminal multiplexer options inherits all from box handler handler for input data shell name of shell shell by default args args for shell cursor can be line underline and block terminal terminal name default xterm env object for process env other options similar to term js properties inherits all from box term reference to the headless term js terminal pty reference to the pty js pseudo terminal events inherits all from box title window title from terminal other events similar to scrollablebox methods inherits all from box write data write data to the terminal screenshot xi xl yi xl nearly identical to element screenshot however the specified region includes the terminals entire scrollback rather than just what is visible on the screen other methods similar to scrollablebox image from box display an image in the terminal jpeg png gif using either blesseds internal png gif to terminal renderer using a ansiimage element or using w3mimgdisplay using a overlayimage element options inherits all from box file path to image type ansi or overlay whether to render the file as ansi art or using w3m to overlay see the ansiimage element for more information options default ansi properties inherits all from box see ansiimage element see overlayimage element events inherits all from box see ansiimage element see overlayimage element methods inherits all from box see ansiimage element see overlayimage element ansiimage from box convert any png file or gif see below to an ansi image and display it as an element this differs from the overlayimage element in that it uses blesseds internal png gif parser and does not require external dependencies blessed uses an internal from scratch png gif reader because no other javascript png reader supports adam7 interlaced images much less pass the png test suite the blessed png reader supports adam7 deinterlacing animation apng all color types bit depths 1 32 alpha alpha palettes and outputs scaled bitmaps cellmaps in blessed for efficient rendering to the screen buffer it also uses some code from libcaca libcucul to add density ascii characters in order to give the image more detail in the terminal if a corrupt png or a non png is passed in blessed will display error text in the element gif files are also supported via a javascript implementation they are internally converted to bitmaps and fed to the png renderer any other image format is support only if the user has imagemagick convert and identify installed options inherits all from box file url or path to png gif file can also be a buffer scale scale cellmap down 0 1 0 from its original pixel width height default 1 0 width height this differs from other elements width or height in that only one of them is needed blessed will maintain the aspect ratio of the image as it scales down to the proper number of cells note png gifs are always automatically shrunken to size based on scale if a width or height is not given ascii add various density ascii characters over the rendering to give the image more detail similar to libcaca libcucul the library mplayer uses to display videos in the terminal animate whether to animate if the image is an apng animating gif if false only display the first frame or idat default true speed set the speed of animation slower 0 0 1 0 faster 1 1000 it cannot go faster than 1 frame per millisecond so 1000 is the fastest default 1 0 optimization mem or cpu if optimizing for memory animation frames will be rendered to bitmaps as the animation plays using less memory optimizing for cpu will precompile all bitmaps beforehand which may be faster but might also oom the process on large images default mem properties inherits all from box img image object from the png reader img width pixel width img height pixel height img bmp image bitmap img cellmap image cellmap bitmap scaled down to cell size events inherits all from box methods inherits all from box setimage file set the image in the box to a new path file can be a path url or buffer clearimage clear the image play play animation if it has been paused or stopped pause pause animation stop stop animation overlayimage from box display an image in the terminal jpeg png gif using w3mimgdisplay requires w3m to be installed x11 required works in xterm urxvt and possibly other terminals options inherits all from box file path to image ansi render the file as ansi art instead of using w3m to overlay internally uses the ansiimage element see the ansiimage element for more information options default true w3m path to w3mimgdisplay if a proper w3mimgdisplay path is not given blessed will search the entire disk for the binary search whether to search usr bin and lib for w3mimgdisplay default true properties inherits all from box events inherits all from box methods inherits all from box setimage img callback set the image in the box to a new path clearimage callback clear the current image imagesize img callback get the size of an image file in pixels termsize callback get the size of the terminal in pixels getpixelratio callback get the pixel to cell ratio for the terminal note all methods above can be synchronous as long as the host version of node supports spawnsync video from box a box which spins up a pseudo terminal in order to render a video via mplayer vo caca or mpv vo caca requires mplayer or mpv to be installed with libcaca support options inherits all from box file video to play start start time in seconds properties inherits all from box tty the terminal element running mplayer or mpv events inherits all from box methods inherits all from box layout from element a layout which can position children automatically based on a renderer method experimental the mechanics of this element may be changed in the future by default the layout element automatically positions children as if they were display inline block in css options inherits all from element renderer a callback which is called right before the children are iterated over to be rendered should return an iterator callback which is called on each child element iterator el i layout using the default renderer it provides two layouts inline and grid inline is the default and will render akin to inline block grid will create an automatic grid based on element dimensions the grid cells width and height are always determined by the largest children in the layout properties inherits all from element events inherits all from element methods inherits all from element renderer coords a callback which is called right before the children are iterated over to be rendered should return an iterator callback which is called on each child element iterator el i isrendered el check to see if a previous child element has been rendered and is visible on screen this is only useful for checking child elements that have already been attempted to be rendered see the example below getlast i get the last rendered and visible child element based on an index this is useful for basing the position of the current child element on the position of the last child element getlastcoords i get the last rendered and visible child element coords based on an index this is useful for basing the position of the current child element on the position of the last child element see the example below rendering a layout for child elements notes you must always give layout a width and height this is a chicken and egg problem blessed cannot calculate the width and height dynamically before the children are positioned border and padding are already calculated into the coords object the renderer receives so there is no need to account for it in your renderer try to set position for children using el position el position is the most primitive to be rendered way to set coordinates setting el left directly has more dynamic behavior which may interfere with rendering some definitions for coords otherwise known as el lpos coords xi the absolute x coordinate of the left side of a rendered element it is absolute relative to the screen itself coords xl the absolute x coordinate of the right side of a rendered element it is absolute relative to the screen itself coords yi the absolute y coordinate of the top side of a rendered element it is absolute relative to the screen itself coords yl the absolute y coordinate of the bottom side of a rendered element it is absolute relative to the screen itself note again the coords the renderer receives for the layout already has border and padding subtracted so you do not have to account for these the children do not example here is an example of how to provide a renderer note that this is also the default renderer if none is provided this renderer will render each child as though they were display inline block in css as if there were a dynamically sized horizontal grid from left to right js var layout blessed layout parent screen top center left center width 50 height 50 border line style bg red border fg blue note this is already the default renderer if none is provided renderer function coords var self this the coordinates of the layout element var width coords xl coords xi height coords yl coords yi xi coords xi xl coords xl yi coords yi yl coords yl the current row offset in cells which row are we on var rowoffset 0 the index of the first child in the row var rowindex 0 return function iterator el i make our children shrinkable if they dont have a height for example calculate it for them el shrink true find the previous rendered childs coordinates var last self getlastcoords i if there is no previously rendered element we are on the first child if last el position left 0 el position top 0 else otherwise figure out where to place this child well start by setting its left x coordinate to right after the previous rendered element this child will end up directly to the right of it el position left last xl xi if our child does not overlap the right side of the layout set its top y to the current rowoffset the coordinate for the current row if el position left el width width el position top rowoffset else otherwise we need to start a new row and calculate a new rowoffset and rowindex the index of the child on the current row rowoffset self children slice rowindex i reduce function out el if self isrendered el return out out math max out el lpos yl el lpos yi return out 0 rowindex i el position left 0 el position top rowoffset if our child overflows the layout do not render it disable this feature for now if el position top el height height returning false tells blessed to ignore this child return false for var i 0 i 10 i blessed box parent layout width i 2 0 10 20 height i 2 0 5 10 border line other helpers all helpers reside on blessed helpers or blessed merge a b merge objects a and b into object a asort obj sort array alphabetically by name prop hsort obj sort array numerically by index prop findfile start target find a file at start directory with name target escape text escape contents tags to be passed into el setcontent example box setcontent escaped tag blessed escape bold bold parsetags text parse tags into sgr escape codes generatetags style text generate text tags based on style object attrtobinary style element convert style attributes to binary format striptags text strip text of tags and sgr sequences cleantags text strip text of tags sgr escape code and leading trailing whitespace dropunicode text drop text of any u ffff characters mechanics content tags every element can have text content via setcontent if tags true was passed to the elements constructor the content can contain tags for example js box setcontent hello red fg green bg bold world bold green bg red fg to make this more concise cancels all character attributes js box setcontent hello red fg green bg bold world colors blessed tags support the basic 16 colors for colors as well as up to 256 colors js box setcontent hello red fg green bg world tags can also use hex colors which will be reduced to the most accurate terminal color js box setcontent hello ff0000 fg 00ff00 bg world attributes blessed supports all terminal attributes including bold underline blink inverse and invisible js box setcontent hello bold world bold alignment newlines and alignment are also possible in content js box setcontent hello\n right world right \n center foo center \n left right this will produce a box that looks like hello world foo left right escaping escaping can either be done using blessed escape box setcontent here is an escaped tag blessed escape bold bold or with the special open and close tags box setcontent here is an escaped tag open bold close open bold close either will produce here is an escaped tag bold bold sgr sequences content can also handle sgr escape codes this means if you got output from a program say git log for example you can feed it directly to an elements content and the colors will be parsed appropriately this means that while red fg foo red fg produces 31mfoo 39m you could just feed 31mfoo 39m directly to the content style the style option controls most of the visual aspects of an element js style fg blue bg black bold true underline false blink false inverse false invisible false transparent false border fg blue bg red scrollbar bg blue focus bg red hover bg red colors colors can be the names of any of the 16 basic terminal colors along with hex values e g ff0000 for 256 color terminals if 256 or 88 colors is not supported blessed with reduce the color to whatever is available attributes blessed supports all terminal attributes including bold underline blink inverse and invisible attributes are represented as bools in the style object transparency blessed can set the opacity of an element to 50 using style transparent true while this seems like it normally shouldnt be possible in a terminal blessed will use a color blending algorithm to blend the element of the foremost element with the background behind it obviously characters cannot be blended but background colors can shadow translucent shadows are also an option when it comes to styling an element this option will create a 50 opacity 2 cell wide 1 cell high shadow offset to the bottom right js shadow true effects blessed supports hover and focus styles hover is only useful is mouse input is enabled js style hover bg red focus border fg blue scrollbar on scrollable elements blessed will support style options for the scrollbar such as js style scrollbar bg red fg blue as a main option scrollbar will either take a bool or an object js scrollbar ch or js scrollbar true events events in blessed work similar to the traditional node js model with one important difference they have a concept of a tree and event bubbling event bubbling events can bubble in blessed for example receiving all click events for box a normal event listener js box on click function mouse box setcontent you clicked mouse x mouse y screen render receiving all click events for box as well as all of its children js box on element click function el mouse box setcontent you clicked el type at mouse x mouse y screen render if el box return false cancel propagation el gets passed in as the first argument it refers to the target element the event occurred on returning false will cancel propagation up the tree positioning offsets may be a number a percentage e g 50 or a keyword e g center dimensions may be a number or a percentage e g 50 positions are treated almost exactly the same as they are in css cssom when an element has the position absolute css property when an element is created it can be given coordinates in its constructor js var box blessed box left center top center bg yellow width 50 height 50 this tells blessed to create a box perfectly centered relative to its parent 50 as wide and 50 as tall as its parent percentages can also have offsets applied to them js height 50 1 left 45 1 to access the calculated offsets relative to the parent js console log box left console log box top to access the calculated offsets absolute relative to the screen js console log box aleft console log box atop overlapping offsets and dimensions greater than parents this still needs to be tested a bit but it should work rendering to actually render the screen buffer you must call render js box setcontent hello 0fe1ab fg world screen render elements are rendered with the lower elements in the children array being painted first in terms of the painters algorithm the lowest indicies in the array are the furthest away just like in the dom artificial cursors terminal cursors can be tricky they all have different custom escape codes to alter as an experimental alternative blessed can draw a cursor for you allowing you to have a custom cursor that you control js var screen blessed screen cursor artificial true shape line blink true color null null for default thats it its controlled the same way as the regular cursor to create a custom cursor js var screen blessed screen cursor artificial true shape bg red fg white bold true ch blink true multiple screens blessed supports the ability to create multiple screens this may not seem useful at first but if youre writing a program that serves terminal interfaces over http telnet or any other protocol this can be very useful server side usage a simple telnet server might look like this see examples blessed telnet js for a full example js var blessed require blessed var telnet require telnet2 telnet tty true function client client on term function terminal screen terminal terminal screen render client on size function width height client columns width client rows height client emit resize var screen blessed screen smartcsr true input client output client terminal xterm 256color fullunicode true client on close function if screen destroyed screen destroy screen key c c q function ch key screen destroy screen on destroy function if client writable client destroy screen data main blessed box parent screen left center top center width 80 height 90 border line content welcome to my server here is your own private session screen render listen 2300 once youve written something similar and started it you can simply telnet into your blessed app bash telnet localhost 2300 creating a netcat server would also work as long as you disable line buffering and terminal echo on the commandline via stty stty icanon echo ncat localhost 2300 stty icanon echo or by using netcats t option ncat t localhost 2300 creating a streaming http 1 1 server than runs in the terminal is possible by curling it with special arguments curl ssnt localhost 8080 there are currently no examples of netcat nc ncat or http curl servers yet the blessed screen constructor can accept input output and term arguments to aid with this the multiple screens will be managed internally by blessed the programmer just has to keep track of the references however to avoid ambiguity its possible to explicitly dictate which screen a node is part of by using the screen option when creating an element the screen destroy method is also crucial this will clean up all event listeners the screen has bound and make sure it stops listening on the event loop make absolutely certain to remember to clean up your screens once youre done with them a tricky part is making sure to include the ability for the client to send the term which is reset on the serverside and the terminal size which is should also be reset on the serverside both of these capabilities are demonstrated above for a working example of a blessed telnet server see examples blessed telnet js notes windows compatibility currently there is no mouse or resize event support on windows windows users will need to explicitly set term when creating a screen like so note this is no longer necessary as of the latest versions of blessed this is now handled automatically js var screen blessed screen terminal windows ansi low level usage this will actually parse the xterm terminfo and compile every string capability to a javascript function js var blessed require blessed var tput blessed tput terminal xterm 256color extended true process stdout write tput setaf 4 hello tput sgr0 \n to play around with it on the command line it works just like tput bash tput js setaf 2 tput js sgr0 echo tput js setaf 2 hello world tput js sgr0 the main functionality is exposed in the main blessed module js var blessed require blessed program blessed program program key q function ch key program clear program disablemouse program showcursor program normalbuffer process exit 0 program on mouse function data if data action mousemove program move data x data y program bg red program write x program bg red program alternatebuffer program enablemouse program hidecursor program clear program move 1 1 program bg black program write hello world blue fg program setx program cols 2 0 4 program down 5 program write hi again program bg black program feed testing most tests contained in the test directory are interactive its up to the programmer to determine whether the test is properly displayed in the future it might be better to do something similar to vttest examples examples can be found in examples faq why doesnt the linux console render lines correctly on ubuntu you need to install the ncurses base package and the ncurses term package 98 why do vertical lines look chopped up in iterm2 all acs vertical lines look this way in iterm2 with the default font why cant i use my mouse in terminal app terminal app does not support mouse events why doesnt the overlayimage element appear in my terminal the overlayimage element uses w3m to display images this generally only works on x11 xterm urxvt but it may work on other unix terminals why cant my mouse clicks register beyond 255 cells older versions of vte do not support any modern mouse protocol on top of that the old x10 protocol it does implement is bugged through several workarounds weve managed to get the cell limit from 127 to 255 if youre not happy with this you may want to look into using xterm or urxvt or a terminal which uses a modern vte like gnome terminal is blessed efficient yes blessed implements csr and uses the painters algorithm to render the screen it maintains two screen buffers so it only needs to render what has changed on the terminal screen will blessed work with all terminals yes blessed has a terminfo termcap parser and compiler that was written from scratch it should work with every terminal as long as a terminfo file is provided if you notice any compatibility issues in your termial do not hesitate to post an issue what is curses and ncurses curses was an old library written in the early days of unix which allowed a programmer to easily manipulate the cursor in order to render the screen ncurses is a free reimplementation of curses it improved upon it quite a bit by focusing more on terminal compatibility and is now the standard library for implementing terminal programs blessed uses neither of these and instead handles terminal compatibility itself what is the difference between blessed and blessed contrib blessed is a major piece of code which reimplements curses from the ground up a ui api is then layered on top of this blessed contrib is a popular library built on top of blessed which makes clever use of modules to implement useful widgets like graphs ascii art and so on are there blessed like solutions for non javascript platforms yes there are some fantastic solutions out there perl curses ui python urwid go termui termbox go contribution and license agreement if you contribute code to this project you are implicitly allowing your code to be distributed under the mit license you are also implicitly verifying that all code is your original work legalese license copyright c 2013 2015 christopher jeffrey mit license see license for more info