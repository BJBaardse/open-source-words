forever a simple cli tool for ensuring that a given script runs continuously i e forever installation bash sudo npm install forever g note if you are using forever programmatically you should install forever monitor bash cd path to your project sudo npm install forever monitor usage there are two ways to use forever through the command line or by using forever in your code note if you are using forever programatically you should install forever monitor command line usage you can use forever to run scripts continuously whether it is written in node js or not example forever start app js options forever help usage forever action options script script options monitors the script specified in the current process or as a daemon actions start start script as a daemon stop stop the daemon script by id uid pid index script stopall stop all running forever scripts restart restart the daemon script restartall restart all running forever scripts list list all running forever scripts config lists all forever user configuration set sets the specified forever config clear clears the specified forever config logs lists log files for all forever processes logs tails the logs for columns add adds the specified column to the output in forever list columns rm removed the specified column from the output in forever list columns set set all columns for the output in forever list cleanlogs careful deletes all historical forever log files options m max only run the specified script max times l logfile logs the forever output to logfile o outfile logs stdout from child script to outfile e errfile logs stderr from child script to errfile p path base path for all forever related files pid files etc c command command to execute defaults to node a append append logs f fifo stream logs to stdout n number number of log lines to print pidfile the pid file uid deprecated process uid useful as a namespace for processes must wrap in a string e g forever start uid production app js forever stop production id deprecated process id similar to uid useful as a namespace for processes must wrap in a string e g forever start id test app js forever stop test sourcedir the source directory for which script is relative to workingdir the working directory in which script will execute minuptime minimum uptime millis for a script to not be considered spinning spinsleeptime time to wait millis between launches of a spinning script colors no colors will disable output coloring plain disable command line colors d debug forces forever to log debug output v verbose turns on the verbose messages from forever s silent run the child script silencing stdout and stderr w watch watch for file changes watchdirectory top level directory to watch from watchignore to ignore pattern when watch is enabled multiple option is allowed t killtree kills the entire child process tree on stop killsignal support exit signal customization default is sigkill used for restarting script gracefully e g killsignal sigterm h help youre staring at it long running process the forever process will continue to run outputting log messages to the console ex forever o out log e err log my script js daemon the forever process will run as a daemon which will make the target process start in the background this is extremely useful for remote starting simple node js scripts without using nohup it is recommended to run start with o l e ex forever start l forever log o out log e err log my daemon js forever stop my daemon js there are several examples designed to test the fault tolerance of forever heres a simple usage example bash forever m 5 examples error on timer js json configuration files in addition to passing forever the path to a script along with accompanying options described above you may also pass forever the path to a json file containing these options for example consider an application with the following file structure ├── forever │ └── development json └── index js forever development json comments are supported uid app append true watch true script index js sourcedir home myuser app this application could be started with forever as shown below bash forever start forever development json absolute paths to such configuration files are also supported bash forever start home myuser app forever development json note forever parses json configuration files using shush allowing the use of in line comments within such files multi app configuration files json configuration files can also be used to define the startup options for multiple applications as shown below app1 uid app1 append true watch true script index js sourcedir home myuser app1 app2 uid app2 append true watch true script index js sourcedir home myuser app2 args port 8081 using in your code the forever module exposes some useful methods to use in your code each method returns an instance of an eventemitter which emits when complete see the forever cli commands for sample usage remark as of forever 0 6 0 processes will not automatically be available in forever list in order to get your processes into forever list or forever list you must instantiate the forever socket server js forever startserver child this method takes multiple forever monitor instances which are defined in the forever monitor dependency forever load config synchronously sets the specified configuration config for the forever module there are two important options option description default root directory to put all default forever log files forever root pidpath directory to put all forever pid files root pids sockpath directory for sockets for ipc between workers root sock loglength number of logs to return in forever tail 100 columns array of columns to display when format is true forever config get columns debug boolean value indicating to run in debug mode false stream boolean value indicating if logs will be streamed false forever start file options starts a script with forever the options object is what is expected by the monitor of forever monitor forever startdaemon file options starts a script with forever as a daemon warning will daemonize the current process the options object is what is expected by the monitor of forever monitor forever stop index stops the forever daemon script at the specified index these indices are the same as those returned by forever list this method returns an eventemitter that raises the stop event when complete forever stopall format stops all forever scripts currently running this method returns an eventemitter that raises the stopall event when complete the format parameter is a boolean value indicating whether the returned values should be formatted according to the configured columns which can set with forever columns or programmatically forever config set columns forever list format callback returns a list of metadata objects about each process that is being run using forever this method will return the list of metadata as such only processes which have invoked forever startserver will be available from forever list the format parameter is a boolean value indicating whether the returned values should be formatted according to the configured columns which can set with forever columns or programmatically forever config set columns forever tail target options callback responds with the logs from the target script s from tail there are two options length numeric is is used as the n parameter to tail stream boolean is is used as the f parameter to tail forever cleanup cleans up any extraneous forever pid files that are on the target system this method returns an eventemitter that raises the cleanup event when complete forever cleanlogssync processes removes all log files from the root forever directory that do not belong to current running forever processes processes are the value returned from monitor data in forever monitor forever startserver monitor0 monitor1 monitorn starts the forever http server for communication with the forever cli note this will change your process title this method takes multiple forever monitor instances which are defined in the forever monitor dependency logging and output file locations by default forever places all of the files it needs into home forever if you would like to change that location just set the forever root environment variable when you are running forever forever root etc forever forever start index js make sure that the user running the process has the appropriate privileges to read write to this directory run tests bash npm test license mit author charlie robbins contributors fedor indutny james halliday charlie mcconnell maciej malecki john lancaster