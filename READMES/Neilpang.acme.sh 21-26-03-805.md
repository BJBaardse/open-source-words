an acme shell script acme sh an acme protocol client written purely in shell unix shell language full acme protocol implementation support acme v1 and acme v2 support acme v2 wildcard certs simple powerful and very easy to use you only need 3 minutes to learn it bash dash and sh compatible simplest shell script for lets encrypt free certificate client purely written in shell with no dependencies on python or the official lets encrypt client just one script to issue renew and install your certificates automatically does not require root sudoer access docker friendly ipv6 support its probably the easiest smartest shell script to automatically issue renew the free certificates from lets encrypt wiki https github com neilpang acme sh wiki for docker fans acme sh two hearts docker twitter neilpangxa 中文说明 who freebsd org ruby china org proxmox pfsense webfaction loadbalancer org discourse org centminmod splynx archlinux opnsense org centos web panel lnmp org more tested os no status platform 1 ubuntu 2 debian 3 centos 4 windows cygwin with curl openssl and crontab included 5 freebsd 6 pfsense 7 opensuse 8 alpine linux with curl 9 archlinux 10 fedora 11 kali linux 12 oracle linux 13 proxmox https pve proxmox com wiki httpscertificateconfiguration let 27s encrypt using acme sh 14 cloud linux https github com neilpang le issues 111 15 openbsd 16 mageia 17 openwrt tested and working see wiki page 18 sunos solaris 19 gentoo linux 20 mac osx for all build statuses check our weekly build project https github com neilpang acmetest supported modes webroot mode standalone mode apache mode nginx mode dns mode dns alias mode stateless mode 1 how to install 1 install online check this project https github com neilpang get acme sh bash curl https get acme sh sh or bash wget o https get acme sh sh 2 or install from git clone this project and launch installation bash git clone https github com neilpang acme sh git cd acme sh acme sh install you dont have to be root then although it is recommended advanced installation https github com neilpang acme sh wiki how to install the installer will perform 3 actions create and copy acme sh to your home dir home acme sh all certs will be placed in this folder too create alias for acme sh acme sh acme sh create daily cron job to check and renew the certs if needed cron entry example bash 0 0 home user acme sh acme sh cron home home user acme sh dev null after the installation you must close the current terminal and reopen it to make the alias take effect ok you are ready to issue certs now show help message sh root v1 acme sh h 2 just issue a cert example 1 single domain bash acme sh issue d example com w home wwwroot example com or bash acme sh issue d example com w home username public html or bash acme sh issue d example com w var www html example 2 multiple domains in the same cert bash acme sh issue d example com d www example com d cp example com w home wwwroot example com the parameter home wwwroot example com or home username public html or var www html is the web root folder where you host your website files you must have write access to this folder second argument example com is the main domain you want to issue the cert for you must have at least one domain there you must point and bind all the domains to the same webroot dir home wwwroot example com the certs will be placed in acme sh example com the certs will be renewed automatically every 60 days more examples https github com neilpang acme sh wiki how to issue a cert 3 install the cert to apache nginx etc after the cert is generated you probably want to install copy the cert to your apache nginx or other servers you must use this command to copy the certs to the target files do not use the certs files in acme sh folder they are for internal use only the folder structure may change in the future apache example bash acme sh install cert d example com \ cert file path to certfile in apache cert pem \ key file path to keyfile in apache key pem \ fullchain file path to fullchain certfile apache fullchain pem \ reloadcmd service apache2 force reload nginx example bash acme sh install cert d example com \ key file path to keyfile in nginx key pem \ fullchain file path to fullchain nginx cert pem \ reloadcmd service nginx force reload only the domain is required all the other parameters are optional the ownership and permission info of existing files are preserved you can pre create the files to define the ownership and permission install copy the cert key to the production apache or nginx path the cert will be renewed every 60 days by default which is configurable once the cert is renewed the apache nginx service will be reloaded automatically by the command service apache2 force reload or service nginx force reload please take care the reloadcmd is very important the cert can be automatically renewed but without a correct reloadcmd the cert may not be flushed to your server like nginx or apache then your website will not be able to show renewed cert in 60 days 4 use standalone server to issue cert requires you to be root sudoer or have permission to listen on port 80 tcp port 80 tcp must be free to listen on otherwise you will be prompted to free it and try again bash acme sh issue standalone d example com d www example com d cp example com more examples https github com neilpang acme sh wiki how to issue a cert 5 use apache mode requires you to be root sudoer since it is required to interact with apache server if you are running a web server apache or nginx it is recommended to use the webroot mode particularly if you are running an apache server you can use apache mode instead this mode doesnt write any files to your web root folder just set string apache as the second argument and it will force use of apache plugin automatically sh acme sh issue apache d example com d www example com d cp example com this apache mode is only to issue the cert it will not change your apache config files you will need to configure your website config files to use the cert by yourself we dont want to mess your apache server dont worry more examples https github com neilpang acme sh wiki how to issue a cert 6 use nginx mode requires you to be root sudoer since it is required to interact with nginx server if you are running a web server apache or nginx it is recommended to use the webroot mode particularly if you are running an nginx server you can use nginx mode instead this mode doesnt write any files to your web root folder just set string nginx as the second argument it will configure nginx server automatically to verify the domain and then restore the nginx config to the original version so the config is not changed sh acme sh issue nginx d example com d www example com d cp example com this nginx mode is only to issue the cert it will not change your nginx config files you will need to configure your website config files to use the cert by yourself we dont want to mess your nginx server dont worry more examples https github com neilpang acme sh wiki how to issue a cert 7 automatic dns api integration if your dns provider supports api access we can use that api to automatically issue the certs you dont have to do anything manually currently acme sh supports cloudflare com api dnspod cn api cloudxns com api godaddy com api powerdns com api ovh kimsufi soyoustart and runabove api nsupdate api luadns com api dnsmadeeasy com api aws route 53 aliyun com 阿里云 api ispconfig 3 1 api alwaysdata com api linode com api freedns https freedns afraid org cyon ch domain offensive resellerinterface domainrobot api gandi livedns api knot dns api digitalocean api native cloudns net api infoblox nios api https www infoblox com vscale https vscale io dynu api https www dynu com dnsimple api ns1 com api duckdns org api name com api dyn managed dns api yandex pdd api https pdd yandex ru hurricane electric dns service https dns he net unoeuro api https www unoeuro com inwx https www inwx de servercow https servercow de namesilo https www namesilo com internetx autodns api https internetx com azure dns selectel com selectel ru dns api zonomi com dns api dreamhost com api directadmin api kinghost https www kinghost com br zilore https zilore com loopia se api acme dns https github com joohoi acme dns tele3 https www tele3 cz and lexicon dns api https github com neilpang acme sh wiki how to use lexicon dns api digitalocean dnsimple dnsmadeeasy dnspark easydns namesilo ns1 pointhq rage4 and vultr etc more apis coming soon if your dns provider is not on the supported list above you can write your own dns api script easily if you do please consider submitting a pull request and contribute it to the project for more details how to use dns api 8 use dns manual mode see https github com neilpang acme sh wiki dns manual mode first if your dns provider doesnt support any api access you can add the txt record by your hand bash acme sh issue dns d example com d www example com d cp example com you should get an output like below sh add the following txt record domain acme challenge example com txt value 9ihdbjyftexayeds4dbueuto18kbzwvtejunswd32 c add the following txt record domain acme challenge www example com txt value 9ihdbjxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx please add those txt records to the domains waiting for the dns to take effect then just rerun with renew argument bash acme sh renew d example com ok its done take care this is dns manual mode it can not be renewed automatically you will have to add a new txt record to your domain by your hand when you renew your cert please use dns api mode instead 9 issue ecc certificates lets encrypt can now issue ecdsa certificates and we support them too just set the keylength parameter with a prefix ec for example single domain ecc certificate bash acme sh issue w home wwwroot example com d example com keylength ec 256 san multi domain ecc certificate bash acme sh issue w home wwwroot example com d example com d www example com keylength ec 256 please look at the keylength parameter above valid values are ec 256 prime256v1 ecdsa p 256 ec 384 secp384r1 ecdsa p 384 ec 521 secp521r1 ecdsa p 521 which is not supported by lets encrypt yet 10 issue wildcard certificates its simple just give a wildcard domain as the d parameter sh acme sh issue d example com d example com dns dns cf 11 how to renew the certs no you dont need to renew the certs manually all the certs will be renewed automatically every 60 days however you can also force to renew a cert sh acme sh renew d example com force or for ecc cert sh acme sh renew d example com force ecc 12 how to stop cert renewal to stop renewal of a cert you can execute the following to remove the cert from the renewal list sh acme sh remove d example com ecc the cert key file is not removed from the disk you can remove the respective directory e g acme sh example com by yourself 13 how to upgrade acme sh acme sh is in constant development so its strongly recommended to use the latest code you can update acme sh to the latest code sh acme sh upgrade you can also enable auto upgrade sh acme sh upgrade auto upgrade then acme sh will be kept up to date automatically disable auto upgrade sh acme sh upgrade auto upgrade 0 14 issue a cert from an existing csr https github com neilpang acme sh wiki issue a cert from existing csr 15 under the hood speak acme language using shell directly to lets encrypt todo 16 acknowledgments acme tiny https github com diafygi acme tiny acme protocol https github com ietf wg acme acme 17 license others license is gplv3 please star and fork me issues and pull requests are welcome 18 donate your donation makes acme sh better paypal alipay 支付宝 wechat 微信 https donate acme sh donate list