lottie for ios macos and android and react native table of contents introduction installing lottie ios sample app macos sample app objective c examples swift examples debugging lottie ios view controller transitioning changing animations at runtime animated controls and switches adding subviews to animation supported after effects features currently unsupported after effects features community contributions alternatives why is it called lottie contributing issues or feature requests introduction lottie is a mobile library for android and ios that parses adobe after effects animations exported as json with bodymovin and renders the vector animations natively on mobile and through react native for the first time designers can create and ship beautiful animations without an engineer painstakingly recreating it by hand since the animation is backed by json they are extremely small in size but can be large in complexity animations can be played resized looped sped up slowed down reversed and even interactively scrubbed lottie can play or loop just a portion of the animation as well the possibilities are endless animations can even be changed at runtime in various ways change the color position or any keyframable value lottie also supports native uiviewcontroller transitions out of the box here is just a small sampling of the power of lottie installing lottie github repo you can pull the lottie github repo and include the lottie xcodeproj to build a dynamic or static library cocoapods get cocoapods add the pod to your podfile pod lottie ios run pod install after installing the cocoapod into your project import lottie with objective c import lottie lottie h swift import lottie carthage get carthage add lottie to your cartfile github airbnb lottie ios master run carthage update in your application targets “general” tab under the “linked frameworks and libraries” section drag and drop lottie ios framework from the carthage build ios directory that carthage update produced ios sample app clone this repo and try out the sample app the repo can build a macos example and an ios example the ios example app demos several of the features of lottie the animation explorer allows you to scrub play loop and resize animations animations can be loaded from the app bundle or from lottie files using the built in qr code reader macos sample app clone this repo and try out the sample app the repo can build a macos example and an ios example the lottie viewer for macos allows you to drag and drop json files to open play scrub and loop animations this app is backed by the same animation code as the ios app so you will get an accurate representation of mac and ios animations objective c examples lottie animations can be loaded from bundled json or from a url to bundle json just add it and any images that the animation requires to your target in xcode objective c lotanimationview animation lotanimationview animationnamed lottie self view addsubview animation animation playwithcompletion bool animationfinished do something if you are working with multiple bundles you can use objective c lotanimationview animation lotanimationview animationnamed lottie inbundle nsbundle your bundle self view addsubview animation animation playwithcompletion bool animationfinished do something or you can load it programmatically from a nsurl objective c lotanimationview animation lotanimationview alloc initwithcontentsofurl nsurl urlwithstring url self view addsubview animation lottie supports the ios uiviewcontentmodes aspectfit aspectfill and scalefill you can also set the animation progress interactively objective c cgpoint translation gesture gettranslationinview self view cgfloat progress translation y self view bounds size height animationview animationprogress progress or you can play just a portion of the animation objective c lottieanimation playfromprogress 0 25 toprogress 0 5 withcompletion bool animationfinished do something swift examples lottie animations can be loaded from bundled json or from a url to bundle json just add it and any images that the animation requires to your target in xcode swift let animationview lotanimationview name lottielogo self view addsubview animationview animationview play finished in do something if your animation is in another bundle you can use swift let animationview lotanimationview name lottielogo bundle yourbundle self view addsubview animationview animationview play or you can load it asynchronously from a url swift let animationview lotanimationview contentsof weburl self view addsubview animationview animationview play you can also set the animation progress interactively swift let translation gesture gettranslationinview self view let progress translation y self view bounds size height animationview animationprogress progress or you can play just a portion of the animation swift animationview play fromprogress 0 25 toprogress 0 5 withcompletion nil ios view controller transitioning lottie comes with a uiviewcontroller animation controller for making custom viewcontroller transitions just become the delegate for a transition objective c void showtransitiona toanimationviewcontroller vc toanimationviewcontroller alloc init vc transitioningdelegate self self presentviewcontroller vc animated yes completion null and implement the delegate methods with a lotanimationtransitioncontroller objective c pragma mark view controller transitioning id animationcontrollerforpresentedcontroller uiviewcontroller presented presentingcontroller uiviewcontroller presenting sourcecontroller uiviewcontroller source lotanimationtransitioncontroller animationcontroller lotanimationtransitioncontroller alloc initwithanimationnamed vctransition1 fromlayernamed outlayer tolayernamed inlayer applyanimationtransform no return animationcontroller id animationcontrollerfordismissedcontroller uiviewcontroller dismissed lotanimationtransitioncontroller animationcontroller lotanimationtransitioncontroller alloc initwithanimationnamed vctransition2 fromlayernamed outlayer tolayernamed inlayer applyanimationtransform no return animationcontroller by setting applyanimationtransform to yes you can make the lottie animation move the from and to view controllers they will be positioned at the origin of the layer when set to no lottie just masks the view controller with the specified layer while resepecting z order debugging lottie has a couple of debugging features to know about when an animation is loaded unsupported features are logged out in the console with their function names if you checkout lothelpers h you will see two debug flags enable debug logging and enable debug shapes enable debug logging increases the verbosity of lottie logging it logs anytime an animation node is set during animation if your animation if not working turn this on and play your animation the console log might give you some clues as to whats going on enable debug shapes draws a colored square for the anchor point of every layer and shape this is helpful to see if anything is on screen keypaths lotanimationview provides void loghierarchykeypaths which will recursively log all settable keypaths for the animation this is helpful for changing animationations at runtime adding views to an animation at runtime not only can you change animations at runtime with lottie you can also add custom ui to a lotanimation at runtime the example below shows some advance uses of this to create a dynamic image loader a dynamic image loading spinner the example above shows a single lotanimationview that is set with a loading spinner animation the loading spinner loops a portion of its animation while an image is downloaded asynchronously when the download is complete the image is added to the animation and the rest of the animation is played seamlessly the image is cleanly animated in and a completion block is called now the animation has been changed by a designer and needs to be updated all that is required is updating the json file in the bundle no code change needed here the design has decided to add a dark mode to the app just a few lines of code change the color of the animation at runtime pretty powerful eh check out the code below for an example swift import uikit import lottie class viewcontroller uiviewcontroller var animationview lotanimationview lotanimationview name spinnerspin override func viewdidload super viewdidload setup our animaiton view animationview contentmode scaleaspectfill animationview frame cgrect x 20 y 20 width 200 height 200 self view addsubview animationview lets change some of the properties of the animation we arent going to use the masklayer so lets just hide it animationview setvalue 0 forkeypath masklayer ellipse 1 transform opacity atframe 0 all of the strokes and fills are white lets make them darkgrey animationview setvalue uicolor darkgray forkeypath outerring stroke color atframe 0 animationview setvalue uicolor darkgray forkeypath innerring stroke color atframe 0 animationview setvalue uicolor darkgray forkeypath innerring fill color atframe 0 lets turn looping on since we want it to repeat while the image is downloading animationview loopanimation true now play from 0 to 0 5 progress and loop indefinitely animationview play fromprogress 0 toprogress 0 5 withcompletion nil lets simulate a download that finishes in 4 seconds let dispatchtime dispatchtime now 4 0 dispatchqueue main asyncafter deadline dispatchtime self simulateimagedownloaded func simulateimagedownloaded our downloaded image let image uiimage named avatar jpg let imageview uiimageview image image we want the image to show up centered in the animation view at 150px150p convert that rect to the animations coordinate space the origin is set to 75 75 because the origin is centered in the animation view let imagerect animationview convert cgrect x 75 y 75 width 150 height 150 tolayernamed nil setup our image view with the rect and add rounded corners imageview frame imagerect imageview layer maskstobounds true imageview layer cornerradius imagerect width 2 now we set the completion block on the currently running animation animationview completionblock result bool in add the image view to the layer named transformlayer self animationview addsubview imageview tolayernamed transformlayer applytransform true now play the last half of the animation self animationview play fromprogress 0 5 toprogress 1 withcompletion complete bool in now the animation has finished and our image is displayed on screen print image downloaded and displayed turn looping off once the current loop finishes the animation will stop and the completion block will be called animationview loopanimation false changing animations at runtime lottie can do more than just play beautiful animations lottie allows you to change animations at runtime say we want to create 4 toggle switches its easy to create the four switches and play them swift let animationview lotanimationview name toggle self view addsubview animationview animationview frame origin x 40 animationview frame origin y 20 animationview autoreverseanimation true animationview loopanimation true animationview play let animationview2 lotanimationview name toggle self view addsubview animationview2 animationview2 frame origin x 40 animationview2 frame origin y animationview frame maxy 4 animationview2 autoreverseanimation true animationview2 loopanimation true animationview2 play let animationview3 lotanimationview name toggle self view addsubview animationview3 animationview3 frame origin x 40 animationview3 frame origin y animationview2 frame maxy 4 animationview3 autoreverseanimation true animationview3 loopanimation true animationview3 play let animationview4 lotanimationview name toggle self view addsubview animationview4 animationview4 frame origin x 40 animationview4 frame origin y animationview3 frame maxy 4 animationview4 autoreverseanimation true animationview4 loopanimation true animationview4 play now lets change their colors swift animationview2 setvalue uicolor green forkeypath bg on group 1 fill 1 color atframe 0 animationview3 setvalue uicolor red forkeypath bg on group 1 fill 1 color atframe 0 animationview4 setvalue uicolor orange forkeypath bg on group 1 fill 1 color atframe 0 objective c animationview2 setvalue uicolor greencolor forkeypath bg on group 1 fill 1 color atframe 0 the keypath is a dot separated path of layer and property names from after effects lotanimationview provides void loghierarchykeypaths which will recursively log all settable keypaths for the animation bg on group 1 fill 1 color now lets change a couple of properties swift animationview2 setvalue uicolor green forkeypath bg on group 1 fill 1 color atframe 0 animationview2 setvalue uicolor red forkeypath bg off group 1 fill 1 color atframe 0 lottie allows you to change any property that is animatable in after effects if a keyframe does not exist a linear keyframe is created for you if a keyframe does exist then just its data is replaced animated controls and switches lottie also has a custom subclass of uicontrol for creating custom animatable interactive controls currently lottie has lotanimatedswitch which is a toggle style switch control tapping on the switch plays either the on off or off on animation and sends out a uicontrolstatevaluechanged broadcast to all targets it is used in the same way uiswitch is used with a few additions to setup the animation with lottie you initialize the switch either using the conveneince method or by supplying the animation directly convenience lotanimatedswitch toggle1 lotanimatedswitch switchnamed switch manually lotcomposition comp lotcomposition animationnamed switch lotanimatedswitch toggle1 lotanimatedswitch alloc initwithframe cgrectzero toggle1 setanimationcomp comp you can also specify a specific portion of the animations timeline for the on and off animation by default lotanimatedswitch will play the animation forward for on and backwards for off lets say that the supplied animation animates on from 0 5 1 progress and off from 0 0 5 on animation is 0 5 to 1 progress toggle1 setprogressrangeforonstate 0 5 toprogress 1 off animation is 0 to 0 5 progress toggle1 setprogressrangeforoffstate 0 toprogress 0 5 also all lotanimatedcontrols add support for changing appearance for state changes this requires some setup in after effects lottie will switch visible animated layers based on the controls state this can be used to have disabled selected or highlighted states these states are associated with layer names in after effects and are dynamically displayed as the control changes states lets say we have a toggle switch with a normal and disabled state in effects we have a composition that contains precomps of the regular button and disabled disabled states they have different visual styles now in code we can associate uicontrolstate with these layers specify the layer names for different states statefulswitch setlayername button forstate uicontrolstatenormal statefulswitch setlayername disabled forstate uicontrolstatedisabled changes visual appearance by switching animation layer to disabled statefulswitch enabled no changes visual appearance by switching animation layer to button statefulswitch enabled yes supported after effects features keyframe interpolation linear interpolation bezier interpolation hold interpolation rove across time spatial bezier solids transform anchor point transform position transform scale transform rotation transform opacity masks path opacity multiple masks additive subtractive and intersection track mattes alpha matte parenting multiple parenting nulls shape layers anchor point position scale rotation opacity path group transforms anchor point position scale etc rectangle all properties eclipse all properties multiple paths in one group even odd winding paths reverse fill rule stroke shape layer stroke color stroke opacity stroke width line cap dashes now animated fill shape layer fill color fill opacity trim paths shape layer trim paths start trim paths end trim paths offset repeaters supports repeater transforms offset currently not supported gradients support for linear gradients support for radial gradients polystar and polygon supported theres a known bug if the roundness is greater than 100 percent layer features precomps image layers shape layers null layers solid layers parenting layers alpha matte layers currently unsupported after effects features merge shapes alpha inverted masks trim shapes individually feature of trim paths expressions 3d layer support time remapping layer reverse layer blend modes layer effects community contributions xamarin bindings nativescript bindings appcelerator titanium bindings macos support added by alex pawlowski alternatives build animations by hand building animations by hand is a huge time commitment for design and engineering across android and ios its often hard or even impossible to justify spending so much time to get an animation right facebook keyframes keyframes is a wonderful new library from facebook that they built for reactions however keyframes doesnt support some of lotties features such as masks mattes trim paths dash patterns and more gifs gifs are more than double the size of a bodymovin json and are rendered at a fixed size that cant be scaled up to match large and high density screens png sequences png sequences are even worse than gifs in that their file sizes are often 30 50x the size of the bodymovin json and also cant be scaled up why is it called lottie lottie is named after a german film director and the foremost pioneer of silhouette animation her best known films are the adventures of prince achmed 1926 – the oldest surviving feature length animated film preceding walt disneys feature length snow white and the seven dwarfs 1937 by over ten years the art of lotte reineger contributing contributors are more than welcome just upload a pr with a description of your changes if you would like to add more json files feel free to do so issues or feature requests file github issues for anything that is unexpectedly broken if an after effects file is not working please attach it to your issue debugging without the original file is much more difficult lottie is developed and maintained by brandon withrow feel free to reach out via email or twitter roadmap in no particular order add support for interactive animated transitions