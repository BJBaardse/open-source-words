record replay and stub http interactions polly js is a standalone framework agnostic javascript library that enables recording replaying and stubbing http interactions polly taps into native browser apis to mock requests and responses with little to no configuration while giving you the ability to take full control of each request with a simple powerful and intuitive api interested in contributing or just seeing polly in action head over to contributing md to learn how to spin up the project why polly keeping fixtures and factories in parity with your apis can be a time consuming process polly alleviates this by recording and maintaining actual server responses without foregoing flexibility record your test suites http interactions and replay them during future test runs for fast deterministic accurate tests use pollys client side server to modify or intercept requests and responses to simulate different application states e g loading error etc features üöÄ fetch xhr support ‚ö°Ô∏èÔ∏è simple powerful intuitive api üíé first class mocha qunit test helpers üî• intercept pass through and attach events üìº record to disk or local storage ‚è± slow down or speed up time getting started check out the quick start documentation to get started usage lets take a look at what an example test case would look like using polly js import polly from pollyjs core describe netflix homepage function it should be able to sign in async function create a new polly instance by default polly will connect to both fetch and xhr browser apis and will record any requests that it hasnt yet seen while replaying ones it has already recorded const polly new polly sign in const server polly intercept all google analytic requests and respond with a 200 server get google analytics path intercept req res res sendstatus 200 pass through all get requests to coverage server get coverage passthrough start pseudo test code await visit login await fillin email polly netflix com await fillin password pollyjs await submit end pseudo test code expect location pathname to equal browse calling stop will persist requests as well as disconnect from any connected browser apis e g fetch or xhr await polly stop the above test case would generate the following recording har which polly will use to replay the sign in request response when the test is rerun json log recordingname sign in browser name chrome version 67 0 creator name polly js version 0 5 0 entries id 06f06e6d125cbb80896c41786f9a696a order 0 cache request bodysize 51 cookies headers name content type value application json charset utf 8 headerssize 97 httpversion http 1 1 method post postdata mimetype application json charset utf 8 text \ email\ \ polly netflix com\ \ password\ \ pollyjs\ querystring url https netflix com api v1 login response bodysize 0 content mimetype text plain charset utf 8 size 0 cookies headers headerssize 0 httpversion http 1 1 redirecturl status 200 statustext ok starteddatetime 2018 06 29t17 31 55 348z time 11 timings blocked 1 connect 1 dns 1 receive 0 send 0 ssl 1 wait 11 pages version 1 2 credits in alphabetical order jason mitchell creator maintainer offir golan creator maintainer sophinie som branding logo were hiring join the netflix studio content engineering teams to help us build projects like this open roles senior ui engineer content platform engineering senior ui engineer globalization technologies infrastructure senior ui engineer partner workforce license copyright c 2018 netflix inc licensed under the apache license version 2 0 the license you may not use this file except in compliance with the license you may obtain a copy of the license at http www apache org licenses license 2 0 unless required by applicable law or agreed to in writing software distributed under the license is distributed on an as is basis without warranties or conditions of any kind either express or implied see the license for the specific language governing permissions and limitations under the license