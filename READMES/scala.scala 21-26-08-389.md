welcome this is the official repository for the scala programming language how to contribute to contribute to the scala standard library scala compiler and scala language specification please send us a pull request from your fork of this repository we do have to ask you to sign the scala cla before we can merge any of your work into our code base to protect its open source nature for more information on building and developing the core of scala make sure to read the rest of this readme in order to get in touch with other scala contributors join scala contributors gitter or post on contributors scala lang org discourse reporting issues please report bugs at the scala bug issue tracker we use the scala scala dev tracker for coordinating bigger work items get in touch if you need some help with your pr at any time please feel free to mention anyone from the list below and we will do our best to help you out username talk to me about adriaanm type checker pattern matcher infrastructure language spec sethtisue build developer docs community build jenkins library the welcome to scala experience retronym compiler performance weird compiler bugs java 8 lambdas repl ichoran collections library performance lrytz optimizer named default arguments vladureche specialization scaladoc tool densh quasiquotes parser string interpolators macros in standard library xeno by macros and reflection heathermiller documentation dragos specialization back end axel22 collections concurrency specialization janekdb documentation p s if you have some spare time to help out around here we would be delighted to add your name to this list repository structure scala build sbt the main sbt build script lib pre compiled libraries for the build src all sources library scala standard library reflect scala reflection compiler scala compiler intellij intellij project templates spec the scala language specification scripts scripts for the ci jobs including building releases test the scala test suite files partest tests junit junit tests build generated build output directory get ready to contribute requirements you need the following tools java sdk the baseline version is 8 for both 2 12 x and 2 13 x it may be possible to use a later sdk for local development but the ci will verify against the baseline version sbt we recommend the sbt extras runner script it provides sensible default jvm options stack and heap size mac os x and linux work windows may work if you use cygwin community help with keeping the build working on windows is appreciated tools we use we are grateful for the following oss licenses jprofiler java profiler yourkit java profiler intellij idea build setup basics during ordinary development a new scala build is built by the previously released version for short we call the previous release starr the stable reference scala release building with starr is sufficient for most kinds of changes however a full build of scala a bootstrap as performed by our ci requires two layers this guarantees that every scala version can build itself if you change the code generation part of the scala compiler your changes will only show up in the bytecode of the library and compiler after a bootstrap see below for how to do a bootstrap build locally for history on how the current scheme was arrived at see https groups google com d topic scala internals gp5jsm1e0fo discussion using the sbt build once youve started an sbt session you can run one of the core commands compile compiles all sub projects library reflect compiler scaladoc etc scala scalac run the repl compiler directly from sbt accept options arguments dist mkbin generates runner scripts scala scalac etc in build quick bin dist mkpack creates a build in the scala distribution format in build pack test runs the junit test testonly immutable listtest runs a subset partest runs partest tests accepts options try partest help publishlocal publishes a distribution locally can be used as scalaversion in other sbt projects optionally set baseversionsuffix bin abcd123 snapshot where abcd123 is the git hash of the revision being published you can also use something custom like bin mypatch this changes the version number from 2 12 2 snapshot to something more stable 2 12 2 bin abcd123 snapshot note that the bin string marks the version binary compatible using it in sbt will cause the scalabinaryversion to be 2 12 if the version is not binary compatible we recommend using pre e g 2 13 0 pre abcd123 snapshot optionally set publishartifact in compile packagedoc in thisbuild false to skip generating publishing api docs speeds up the process if a command results in an error message like a module is not authorized to depend on itself it may be that a global sbt plugin such as ensime is resulting in a cyclical dependency try disabling global sbt plugins perhaps by temporarily commenting them out in sbt 0 13 plugins plugins sbt sandbox we recommend to keep local test files in the sandbox directory which is listed in the gitignore of the scala repo incremental compilation note that sbts incremental compilation is often too coarse for the scala compiler codebase and re compiles too many files resulting in long build times check sbt 1104 for progress on that front in the meantime you can enable ant mode in which sbt only re compiles source files that were modified create a file local sbt containing the line antstyle true use intellij idea for incremental compiles see ide setup below its incremental compiler is a bit less conservative but usually correct bootstrapping locally to perform a bootstrap using sbt first a build is published either locally or on a temporary repository then a separate invocation of sbt using the previously built version as starr is used to build publish the actual build assume the current starr version is 2 12 0 defined in versions properties and the current version is 2 12 0 snapshot defined in build sbt to perform a local bootstrap run publishlocal you may want to specify a custom version suffix and skip generating api docs see above quit sbt and start a new sbt instance using sbt dstarr version version where version is the version number you published locally if the version number you published is not binary compatible with the current starr set every scalabinaryversion 2 12 0 m4 this is not required if the version you published locally is binary compatible i e if the current starr is a 2 12 x release and not a milestone rc the last step is required to resolve modules scala partest etc it assumes that the module releases for the current starr work in terms of binary compatibility with the local starr that you published locally a full bootstrap requires re building the all the modules on our ci this is handled by the bootstrap script but it currently cannot be easily executed locally ide setup you may use intellij idea see src intellij readme md or ensime see this page on the ensime site support for eclipse has decayed and been removed but could be resurrected by a volunteer in order to use intellijs incremental compiler run dist mkbin in sbt to get a build and the runner scripts in build quick bin run build make project in intellij now you can edit and build in intellij and use the scripts compiler repl to directly test your changes you can also run the scala scalac and partest commands in sbt enable ant mode explained above to prevent sbts incremental compiler from re compiling too many files before each partest invocation coding guidelines our guidelines for contributing are explained in contributing md it contains useful information on our coding standards testing documentation how we use git and github and how to get your code reviewed you may also want to check out the following resources the scala hacker guide covers some of the same ground as this readme but in greater detail and in a more tutorial style using a running example scala documentation site scala ci once you submit a pr your commits will be automatically tested by the scala ci if you see a spurious build failure you can post rebuild as a pr comment the scabot readme lists all available commands if youd like to test your patch before having everything polished for review feel free to submit a pr and add the wip label in case your wip branch contains a large number of commits that you didnt clean up squash yet for review consider adding ci last only to the pr title that way only the last commit will be tested saving some energy and ci resources note that inactive wip prs will be closed eventually which does not mean the change is being rejected ci performs a full bootstrap the first task validate publish core publishes a build of your commit to the temporary repository https scala ci typesafe com artifactory scala pr validation snapshots note that this build is not yet bootstrapped its bytecode is built using the current starr the version number is 2 12 2 bin abcd123 snapshot where abcd123 is the commit hash for binary incompatible builds the version number is 2 13 0 pre abcd123 snapshot you can use scala builds in the validation repository locally by adding a resolver and specifying the corresponding scalaversion sbt set resolvers pr at https scala ci typesafe com artifactory scala pr validation snapshots set scalaversion 2 12 2 bin abcd123 snapshot console note that the scala modules are currently not built published against the tested version during ci validation nightly builds the scala ci builds nightly download releases including all modules and publishes them to the following locations 2 12 x 2 13 x the ci also publishes nightly api docs 2 12 x symlink to the latest 2 13 x symlink to the latest using a nightly build in sbt is explained in this stack overflow answer scala ci internals the scala ci runs as a jenkins instance on scala ci typesafe com configured by a chef cookbook at scala scala jenkins infra the build bot that watches prs triggers testing builds and applies the reviewed label after an lgtm comment is in the scala scabot repo community build the scala community build is a central element for testing scala releases a community build can be launched for any scala commit even before the commits pr has been merged that commit is then used to build a large number of open source projects from source and run their test suites to request a community build run on your pr just ask in a comment on the pr and a scala team member will take care of it details community builds run on the scala jenkins instance the jobs are named integrate community build see the scala community builds repo