memo while there are some legitimate bugs and differences in state handling even in modern browsers they are relatively small enough now that you can just use the native html5 history api if you intend to support legacy browsers then history js is your bet this notice is here as history js does not receive enough funding to be maintained so it exists only in legacy condition for legacy browsers perhaps it still works for modern browsers but it could really do with maintenance maintenance is very difficult as the library requires manual testing in html5 and html4 modes and for each adapter and for each browser so that means 2 of adapters of browsers and their versions tests that need to be run by a human tests need to be run by a human as certain failures require browser interactions such as navigating from the test suite to a different domain and back again or clicking the physical back buttons or checking if the physical back buttons actually work this takes a lot of time despite history js being one of the most popular javascript libraries there is and has been used by even multi million user companies in its time the reality of economy and company practices seems to be that companies prefer to fork their own internal versions and fix locally with their own devs rather than fund open source maintainers what they would pay their own devs to make things better for everyone including themselves which would be cheaper but no that would require too many tiers of company approval that dont understand the need as such if you are an open source developer id recommend just working on open source projects that are paid for by your own consulting work or your own company e g every successful open source project as otherwise when they become popular you better hope they are easily maintainable and testable otherwise the cost of maintenance is higher than the free time of the maintainers so with all that said this repo still exists for archival purposes legacy browsers and a hub for anarachistic issue fork maintenance cheers benjamin lupton founder of bevry creator of history js welcome to history js v1 8b2 june 22 2013 badges badges news 22 06 2013 beta 2 of v1 8 is released fixes and uncompressed bundled files 31 05 2013 beta 1 of v1 8 is released fixes 14 02 2013 alpha 4 of v1 8 is released fixes 05 02 2013 alpha 3 of v1 8 is released tests updated 21 01 2013 alpha 2 of v1 8 is released correct statechange behaviour 19 01 2013 alpha 1 of v1 8 is released started to categorize old baluptons issues history see the history md file for a detailed list of features changes solved issues and bugs involve please create an issue if something doesnt work or if there is a browser specific bug ill try to fix it as soon as possible please send me your pull requests if you have a nice solution im also going to review old issues in baluptons repository and try to solve them too aims follow the html5 history api as much as possible provide a cross compatible experience for all html5 browsers they all implement the html5 history api a little bit differently causing different behaviours and sometimes bugs history js fixes this ensuring the experience is as expected the same great throughout the html5 browsers provide a backwards compatible experience for all html4 browsers using a hash fallback including continued support for the html5 history apis data title pushstate and replacestate with the option to remove html4 support if it is not right for your application provide a forwards compatible experience for html4 states to html5 states so if a hash fallbacked url is accessed by a html5 browser it is naturally transformed into its non hashed url equivalent provide support for as many javascript frameworks as possible via adapters especially dojo extjs jquery mootools right js and zepto quick install via ajaxify script to ajaxify your entire website with the html5 history api history js and jquery the ajaxify script is all you need its that easy via ajaxify extension if you dont have access to your server or just want to try out the ajaxify script first you can install the history js it google chrome extension to try out history js via ajaxify on select websites without actually installing history js ajaxify on your server via ruby on rails gem if you are using rails then the easiest way for you to try history js would be to use wiselinks gem wiselinks integrates into rails application and allows you to start using history js with three lines of code direct install working with history js directly javascript function window undefined bind to statechange event history adapter bind window statechange function note we are using statechange instead of popstate var state history getstate note we are using history getstate instead of event state change our states history pushstate state 1 state 1 state 1 logs state 1 state 1 state 1 history pushstate state 2 state 2 state 2 logs state 2 state 2 state 2 history replacestate state 3 state 3 state 3 logs state 3 state 3 state 3 history pushstate null null state 4 logs state 4 history back logs state 3 state 3 state 3 history back logs state 1 state 1 state 1 history back logs home page history go 2 logs state 3 state 3 state 3 window how would the above operations look in a html5 browser www mysite com www mysite com state 1 www mysite com state 2 www mysite com state 3 www mysite com state 4 www mysite com state 3 www mysite com state 1 www mysite com www mysite com state 3 note these urls also work in html4 browsers and search engines so no need for the hashbang fragment identifier that google recommends how would they look in a html4 browser www mysite com www mysite com state 1 suid 1 www mysite com state 2 suid 2 www mysite com state 3 suid 3 www mysite com state 4 www mysite com state 3 suid 3 www mysite com state 1 suid 1 www mysite com www mysite com state 3 suid 3 note 1 these urls also work in html5 browsers we use replacestate to transform these html4 states into their html5 equivalents so the user wont even notice note 2 these urls will be automatically url encoded in ie6 to prevent certain browser specific bugs note 3 support for html4 browsers this hash fallback is optional why supporting html4 browsers could be either good or bad based on my apps use cases whats the deal with the suids used in the html4 states suids state unique identifiers are used when we utilise a title and or data in our state adding a suid allows us to associate particular states with data and titles while keeping the urls as simple as possible dont worry its all tested working and a lot smarter than im making it out to be if you arent utilising title or data then we dont even include a suid as there is no need for it as seen by state 4 above we also shrink the urls to make sure that the smallest url will be used for instance we will adjust http www mysite com http www mysite com projects history js to become http www mysite com projects history js automatically again tested working and smarter it works with domains subdomains subdirectories whatever doesnt matter where you put it its smart safari 5 will also have a suid appended to the url it is entirely transparent but just a visible side effect it is required to fix a bug with safari 5 is there a working demo sure is give it a download and navigate to the demo directory in your browser if you are after something a bit more adventurous than a end user demo open up the tests directory in your browser and editor itll rock your world and show all the vast use cases that history js supports download installation download history js and upload it to your webserver download links tar gz or zip include history js for dojo v1 8 html script src http www yourwebsite com history js scripts bundled html4 html5 dojo history js script for extjs v1 8 html script src http www yourwebsite com history js scripts bundled html4 html5 extjs history js script for jquery v1 3 html script src http www yourwebsite com history js scripts bundled html4 html5 jquery history js script for mootools v1 3 html script src http www yourwebsite com history js scripts bundled html4 html5 mootools history js script for right js v2 2 html script src http www yourwebsite com history js scripts bundled html4 html5 right history js script for zepto v0 5 html script src http www yourwebsite com history js scripts bundled html4 html5 zepto history js script for everything else html script src http www yourwebsite com history js scripts bundled html4 html5 native history js script note if you want to only support html5 browsers and not html4 browsers so no hash fallback support then just change the html4 html5 part in the urls to just html5 see why supporting html4 browsers could be either good or bad based on my apps use cases get updates for commit rss atom updates you can subscribe via the github commit atom feed for github news feed updates you can click the watch button up the top right of history jss github project page get support history js is maintained by people like you if you find a bug report it to the github issue tracker if youve fixed a bug submit a pull request and add your fork to the network wiki page if you would like paid support and trainings or have job offers then refer to the network wiki page if you are qualified with history js then be sure to add your details to that page too if your company uses history js on your projects and would like to see it grow and prosper better documentation bugfixes upgrades maintenance etc and would love to become a corporate sponsor then do email sponsor bevry me if you would like free support for history js then post your question on stackoverflow and be sure to use the history js tag when asking your question if youve created a website that uses history js or know of one be sure to add it to the showcase wiki page if youd love to 1 or like this project then be sure to tweet about it and click the watch button up the top of its project page for anything else refer to the history js github wiki site thanks every bit of help really does make a difference browsers tested and working in html5 browsers firefox 4 chrome 8 opera 11 5 safari 5 0 safari ios 4 3 html4 browsers ie 6 7 8 9 10 firefox 3 opera 10 11 0 safari 4 safari ios 4 2 4 1 4 0 3 2 exposed api functions states history pushstate data title url pushes a new state to the browser data can be null or an object title can be null or a string url must be a string history replacestate data title url replaces the existing state with a new state to the browser data can be null or an object title can be null or a string url must be a string history getstate gets the current state of the browser returns an object with data title and url history getstatebyindex gets a state by the index history getcurrentindex gets the current index history gethash gets the current hash of the browser adapter history adapter bind element event callback a framework independent event binder you may either use this or your frameworks native event binder history adapter trigger element event a framework independent event trigger you may either use this or your frameworks native event trigger history adapter ondomload callback a framework independent ondomload binder you may either use this or your frameworks native ondomload binder navigation history back go back once through the history same as hitting the browsers back button history forward go forward once through the history same as hitting the browsers forward button history go x if x is negative go back through history x times if x is positive go forwards through history x times debug history log logs messages to the console the log element and fallbacks to alert if neither of those two exist history debug same as history log but only runs if history options debug true options history options hashchangeinterval how long should the interval be before hashchange checks history options safaripollinterval how long should the interval be before safari poll checks history options doublecheckinterval how long should the interval be before we perform a double check history options disablesuid force history not to append suid history options storeinterval how long should we wait between store calls history options busydelay how long should we wait between busy events history options debug if true will enable debug messages to be logged history options initialtitle what is the title of the initial state history options html4mode if true will force html4 mode hashtags history options delayinit want to override default options and call init manually events window onstatechange fired when the state of the page changes does not include hash changes window onanchorchange fired when the anchor of the page changes does not include state hashes known issues opera 11 fails to create history entries when under stressful loads events fire perfectly just the history events fail there is nothing we can do about this mercury ios fails to apply url changes hashes and html5 history api states there is nothing we can do about this notes on compatibility history js solves the following browser bugs html5 browsers chrome 8 sometimes does not contain the correct state data when traversing back to the initial state safari 5 safari ios 4 and firefox 3 and 4 do not fire the onhashchange event when the page is loaded with a hash safari 5 and safari ios 4 do not fire the onpopstate event when the hash has changed unlike the other browsers safari 5 and safari ios 4 fail to return to the correct state once a hash is replaced by a replacestate call bug report safari 5 and safari ios 4 sometimes fail to apply the state change under busy conditions bug report google chrome 8 9 10 and firefox 4 prior to the rc will always fire onpopstate once the page has loaded change recommendation safari ios 4 0 4 1 4 2 have a working html5 history api although the actual back buttons of the browsers do not work therefore we treat them as html4 browsers none of the html5 browsers actually utilise the title argument to the pushstate and replacestate calls html4 browsers old browsers like msie 6 7 and firefox 2 do not have a onhashchange event msie 6 and 7 sometimes do not apply a hash even it was told to requiring a second call to the apply function non opera html4 browsers sometimes do not apply the hash when the hash is not urlencoded all browsers state data and titles do not persist once the site is left and then returned includes page refreshes state titles are never applied to the document title replacestate functionality is emulated in html4 browsers by discarding the replaced state so when the discarded state is accessed it is skipped using the appropriate history back history forward call data persistance and synchronisation works like so every second or so the suids and urls of the states will synchronise between the store and the local session when a new session opens a familiar state via the suid or the url and it is not found locally then it will attempt to load the last known stored state with that information urls will be unescaped to the maximum so for instance the url key a 20b 252c will become key a b c this is to ensure consistency between browser url encodings changing the hash of the page causes onpopstate to fire this is expected standard functionality to ensure correct compatibility between html5 and html4 browsers the following events have been created window onstatechange this is the same as the onpopstate event except it does not fire for traditional anchors window onanchorchange this is the same as the onhashchange event except it does not fire for states license licensed under the new bsd license copyright © 2014 bevry pty ltd us bevry me copyright © 2011 2013 benjamin arthur lupton b lupton cc for support see the getting support section