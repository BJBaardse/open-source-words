 mediumeditor this is a clone of medium com inline editor toolbar mediumeditor has been written using vanilla javascript no additional frameworks required browser support basic usage demo demo http yabwe github io medium editor installation via npm run in your console npm install medium editor via bower bower install medium editor via an external cdn using jsdelivr for the latest version html script src cdn jsdelivr net npm medium editor latest dist js medium editor min js script link rel stylesheet href cdn jsdelivr net npm medium editor latest dist css medium editor min css type text css media screen charset utf 8 for a custom one html script src cdn jsdelivr net npm medium editor 5 23 2 dist js medium editor min js script link rel stylesheet href cdn jsdelivr net npm medium editor 5 23 2 dist css medium editor min css type text css media screen charset utf 8 using cdnjs manual installation download the latest release and attach medium editors stylesheets to your page find the files to below mentioned linking in the dist folder medium editor dist html link rel stylesheet href css medium editor css core link rel stylesheet href css themes default css or any other theme usage the next step is to reference the editors script html script src js medium editor js script you can now instantiate a new mediumeditor object html script var editor new mediumeditor editable script the above code will transform all the elements with the editable class into html5 editable contents and add the medium editor toolbar to them you can also pass a list of html elements javascript var elements document queryselectorall editable editor new mediumeditor elements mediumeditor also supports textarea if you provide a textarea element the script will create a new div with contenteditable true hide the textarea and link the textarea value to the div html content integrating with various frameworks people have contributed wrappers around mediumeditor for integrating with different frameworks and tech stacks take a look at the list of existing wrappers and integrations that have already been written for mediumeditor mediumeditor options view the mediumeditor options documentation on all the various options for mediumeditor options to customize medium editor are passed as the second argument to the mediumeditor constructor example js var editor new mediumeditor editor options go here core options activebuttonclass css class added to active buttons in the toolbar default medium editor button active buttonlabels type of labels on the buttons values false fontawesome default false note using fontawesome as the buttonlabels requires version 4 1 0 of the fontawesome css to be on the page to ensure all icons will be displayed correctly delay time in milliseconds to show the toolbar or anchor tag preview default 0 disablereturn enables disables the use of the return key you can also set specific element behavior by using setting a data disable return attribute default false disabledoublereturn allows disallows two or more empty new lines you can also set specific element behavior by using setting a data disable double return attribute default false disableextraspaces when set to true it disallows spaces at the beginning and end of the element also it disallows entering 2 consecutive spaces between 2 words default false disableediting enables disables adding the contenteditable behavior useful for using the toolbar with customized buttons actions you can also set specific element behavior by using setting a data disable editing attribute default false elementscontainer specifies a dom node to contain mediumeditors toolbar and anchor preview elements default document body extensions extension to use see custom buttons and extensions for more default spellcheck enable disable native contenteditable automatic spellcheck default true targetblank enables disables target blank for anchor tags default false toolbar options the toolbar for mediumeditor is implemented as a built in extension which automatically displays whenever the user selects some text the toolbar can hold any set of defined built in buttons but can also hold any custom buttons passed in as extensions options for the toolbar are passed as an object that is a member of the outer options object example javascript var editor new mediumeditor editable toolbar these are the default options for the toolbar if nothing is passed this is what is used allowmultiparagraphselection true buttons bold italic underline anchor h2 h3 quote diffleft 0 difftop 10 firstbuttonclass medium editor button first lastbuttonclass medium editor button last relativecontainer null standardizeselectionstart false static false options which only apply when static is true align center sticky false updateonemptyselection false allowmultiparagraphselection enables disables whether the toolbar should be displayed when selecting multiple paragraphs block elements default true buttons the set of buttons to display on the toolbar default bold italic underline anchor h2 h3 quote see button options for details on more button options diffleft value in pixels to be added to the x axis positioning of the toolbar default 0 difftop value in pixels to be added to the y axis positioning of the toolbar default 10 firstbuttonclass css class added to the first button in the toolbar default medium editor button first lastbuttonclass css class added to the last button in the toolbar default medium editor button last relativecontainer domelement to append the toolbar to instead of the body when passed the toolbar will also be positioned relative instead of absolute default null standardizeselectionstart enables disables standardizing how the beginning of a range is decided between browsers whenever the selected text is analyzed for updating toolbar buttons status default false static enable disable the toolbar always displaying in the same location relative to the medium editor element default false options which only apply when the static option is being used align left center right when the static option is true this aligns the static toolbar relative to the medium editor element default center sticky when the static option is true this enables disables the toolbar sticking to the viewport and staying visible on the screen while the page scrolls default false updateonemptyselection when the static option is true this enables disables updating the state of the toolbar buttons even when the selection is collapsed there is no selection just a cursor default false to disable the toolbar which also disables the anchor preview extension set the value of the toolbar option to false javascript var editor new mediumeditor editable toolbar false button options button behavior can be modified by passing an object into the buttons array instead of a string this allow for overriding some of the default behavior of buttons the following options are some of the basic parts of buttons that you may override but any part of the mediumeditor extension prototype can be overridden via these button options check out the source code for buttons to see what all can be overridden name name of the button being overridden action argument to pass to mediumeditor execaction when the button is clicked aria value to add as the aria label attribute of the button element displayed in the toolbar this is also used as the tooltip for the button tagnames array of element tag names that would indicate that this button has already been applied if this action has already been applied the button will be displayed as active in the toolbar example for bold if the text is ever within a b or strong tag that indicates the text is already bold so the array of tagnames for bold would be b strong note this is not used if usequerystate is set to true style a pair of css property value s that indicate that this button has already been applied if this action has already been applied the button will be displayed as active in the toolbar example for bold if the text is ever within an element with a font weight style property set to 700 or bold that indicates the text is already bold so the style object for bold would be prop font weight value 700 bold note this is not used if usequerystate is set to true properties of the style object prop name of the css property value value s of the css property multiple values can be separated by a usequerystate enables disables whether this button should use the built in document querycommandstate method to determine whether the action has already been applied if the action has already been applied the button will be displayed as active in the toolbar example for bold if this is set to true the code will call document querycommandstate bold which will return true if the browser thinks the text is already bold and false otherwise contentdefault default innerhtml to put inside the button contentfa the innerhtml to use for the content of the button if the buttonlabels option for mediumeditor is set to fontawesome classlist an array of classnames strings to be added to the button attrs a set of key value pairs to add to the button as custom attributes to the button element example of overriding buttons here the goal is to mimic medium by having h1 and h2 buttons which actually produce h2 and h3 tags respectively javascript var editor new mediumeditor editable toolbar buttons bold italic name h1 action append h2 aria header type 1 tagnames h2 contentdefault b h1 b classlist custom class h1 attrs data custom attr attr value h1 name h2 action append h3 aria header type 2 tagnames h3 contentdefault b h2 b classlist custom class h2 attrs data custom attr attr value h2 justifycenter quote anchor anchor preview options the anchor preview is a built in extension which automatically displays a tooltip when the user is hovering over a link in the editor the tooltip will display the href of the link and when click will open the anchor editing form in the toolbar options for the anchor preview tooltip are passed as an object that is a member of the outer options object example javascript var editor new mediumeditor editable anchorpreview these are the default options for anchor preview if nothing is passed this is what it used hidedelay 500 previewvalueselector a hidedelay time in milliseconds to show the anchor tag preview after the mouse has left the anchor tag default 500 previewvalueselector the default selector to locate where to put the activeanchor value in the preview you should only need to override this if youve modified the way in which the anchor preview extension renders default a showwhentoolbarisvisible determines whether the anchor tag preview shows up when the toolbar is visible you should set this value to true if the static option for the toolbar is true and you want the preview to show at the same time default false showonemptylinks determines whether the anchor tag preview shows up on link with href as or something you should set this value to false if you do not want the preview to show up in such use cases default true to disable the anchor preview set the value of the anchorpreview option to false javascript var editor new mediumeditor editable anchorpreview false note if the toolbar is disabled via toolbar false option or data disable toolbar attribute the anchor preview is automatically disabled if the anchor editing form is not enabled clicking on the anchor preview will not allow the href of the link to be edited placeholder options the placeholder handler is a built in extension which displays placeholder text when the editor is empty options for placeholder are passed as an object that is a member of the outer options object example javascript var editor new mediumeditor editable placeholder this example includes the default options for placeholder if nothing is passed this is what it used text type your text hideonclick true text defines the default placeholder for empty contenteditables when placeholder is not set to false you can overwrite it by setting a data placeholder attribute on the editor elements default type your text hideonclick causes the placeholder to disappear as soon as the field gains focus default true to hide the placeholder only after starting to type and to show it again as soon as field is empty set this option to false to disable the placeholder set the value of the placeholder option to false javascript var editor new mediumeditor editable placeholder false anchor form options the anchor form is a built in button extension which allows the user to add edit remove links from within the editor when anchor is passed in as a button in the list of buttons this extension will be enabled and can be triggered by clicking the corresponding button in the toolbar options for the anchor form are passed as an object that is a member of the outer options object example javascript var editor new mediumeditor editable toolbar buttons bold italic underline anchor anchor these are the default options for anchor form if nothing is passed this is what it used customclassoption null customclassoptiontext button linkvalidation false placeholdertext paste or type a link targetcheckbox false targetcheckboxtext open in new window customclassoption custom class name the user can optionally have added to their created links ie button if passed as a non empty string a checkbox will be displayed allowing the user to choose whether to have the class added to the created link or not default null customclassoptiontext text to be shown in the checkbox when the customclassoption is being used default button linkvalidation enables disables check for common url protocols on anchor links converts invalid url characters ie spaces to valid characters using encodeuri default false placeholdertext text to be shown as placeholder of the anchor input default paste or type a link targetcheckbox enables disables displaying a open in new window checkbox which when checked changes the target attribute of the created link default false targetcheckboxtext text to be shown in the checkbox enabled via the targetcheckbox option default open in new window paste options the paste handler is a built in extension which attempts to filter the content when the user pastes how the paste handler filters is configurable via specific options options for paste handling are passed as an object that is a member of the outer options object example javascript var editor new mediumeditor editable paste this example includes the default options for paste if nothing is passed this is what it used forceplaintext true cleanpastedhtml false cleanreplacements cleanattrs class style dir cleantags meta unwraptags forceplaintext forces pasting as plain text default true cleanpastedhtml cleans pasted content from different sources like google docs etc default false precleanreplacements custom pairs 2 element arrays of regexp and replacement text to use during paste when forceplaintext or cleanpastedhtml are true or when calling cleanpaste text helper method these replacements are executed before builtin replacements default cleanreplacements custom pairs 2 element arrays of regexp and replacement text to use during paste when forceplaintext or cleanpastedhtml are true or when calling cleanpaste text helper method these replacements are executed after builtin replacements default cleanattrs list of element attributes to remove during paste when cleanpastedhtml is true or when calling cleanpaste text or pastehtml html options helper methods default class style dir cleantags list of element tag names to remove during paste when cleanpastedhtml is true or when calling cleanpaste text or pastehtml html options helper methods default meta unwraptags list of element tag names to unwrap remove the element tag but retain its child elements during paste when cleanpastedhtml is true or when calling cleanpaste text or pastehtml html options helper methods default keyboardcommands options the keyboard commands handler is a built in extension for mapping key combinations to actions to execute in the editor options for keyboardcommands are passed as an object that is a member of the outer options object example javascript var editor new mediumeditor editable keyboardcommands this example includes the default options for keyboardcommands if nothing is passed this is what it used commands command bold key b meta true shift false alt false command italic key i meta true shift false alt false command underline key u meta true shift false alt false commands array of objects describing each command and the combination of keys that will trigger it required for each object command argument passed to editor execaction when key combination is used if defined as false the shortcut will be disabled key keyboard character that triggers this command meta whether the ctrl meta key has to be active or inactive shift whether the shift key has to be active or inactive alt whether the alt key has to be active or inactive to disable the keyboard commands set the value of the keyboardcommands option to false javascript var editor new mediumeditor editable keyboardcommands false auto link options the auto link handler is a built in extension which automatically turns urls entered into the text field into html anchor tags similar to the functionality of markdown this feature is off by default to enable built in auto link support set the value of the autolink option to true javascript var editor new mediumeditor editable autolink true image dragging options the image dragging handler is a built in extension for handling dragging dropping images into the contenteditable this feature is on by default to disable built in image dragging set the value of the imagedragging option to false javascript var editor new mediumeditor editable imagedragging false disable file dragging to stop preventing drag drop events and disable file dragging in general provide a dummy imagedragging extension javascript var editor new mediumeditor editor extensions imagedragging due to the state of code in 5 0 0 the editor always prevented any drag and drop actions we will have a better way to disable file dragging in 6 options example javascript var editor new mediumeditor editable delay 1000 targetblank true toolbar buttons bold italic quote diffleft 25 difftop 10 anchor placeholdertext type a link customclassoption btn customclassoptiontext create button paste cleanpastedhtml true cleanattrs style dir cleantags label meta unwraptags sub sup anchorpreview hidedelay 300 placeholder text click to edit buttons by default mediumeditor supports buttons for most of the commands for document execcommand that are well supported across all its supported browsers default buttons mediumeditor by default will show only the buttons listed here to avoid a huge toolbar bold italic underline anchor built in support for collecting a url via the anchor extension h2 h3 quote all buttons these are all the built in buttons supported by mediumeditor bold italic underline strikethrough subscript superscript anchor image this simply converts selected text to an image tag quote pre orderedlist unorderedlist indent moves the selected text up one level outdent moves the selected text down one level justifyleft justifycenter justifyright justifyfull h1 h2 h3 h4 h5 h6 removeformat clears inline style formatting preserves blocks html parses selected html and converts into actual html elements themes check out the wiki page for a list of available themes https github com yabwe medium editor wiki themes api view the mediumeditor object api documentation on the wiki for details on all the methods supported on the mediumeditor object initialization methods mediumeditor elements options creates an instance of mediumeditor destroy tears down the editor if already setup removing all dom elements and event handlers setup rebuilds the editor if it has already been destroyed recreating dom elements and attaching event handlers addelements add elements to an already initialized instance of mediumeditor removeelements remove elements from an already initialized instance of mediumeditor event methods on target event listener usecapture attach a listener to a dom event which will be detached when mediumeditor is deactivated off target event listener usecapture detach a listener to a dom event that was attached via on subscribe event listener attaches a listener to a custom medium editor event unsubscribe event listener detaches a listener from a custom medium editor event trigger name data editable manually triggers a custom medium editor event selection methods checkselection manually trigger an update of the toolbar and extensions based on the current selection exportselection return a data representation of the selected text which can be applied via importselection importselection selectionstate restore the selection using a data representation of previously selected text ie value returned by exportselection getfocusedelement returns an element if any contenteditable element monitored by mediumeditor currently has focused getselectedparentelement range get the parent contenteditable element that contains the current selection restoreselection restore the selection to what was selected when saveselection was called saveselection internally store the set of selected text selectallcontents expands the selection to contain all text within the focused contenteditable selectelement element change selection to be a specific element and update the toolbar to reflect the selection stopselectionupdates stop the toolbar from updating to reflect the state of the selected text startselectionupdates put the toolbar back into its normal updating state editor action methods cleanpaste text convert text to plaintext and replace current selection with result createlink opts creates a link via the native document execcommand createlink command execaction action opts executes an built in action via document execcommand pastehtml html options replace the current selection with html querycommandstate action wrapper around the browsers built in document querycommandstate action for checking whether a specific action has already been applied to the selection helper methods delay fn delay any function from being executed by the amount of time passed as the delay option getcontent index gets the trimmed innerhtml of the element at index getextensionbyname name get a reference to an extension with the specified name resetcontent element reset the content of all elements or a specific element to its value when added to the editor initially serialize returns a json object with elements contents setcontent html index sets the innerhtml to html of the element at index static methods properties geteditorfromelement element retrieve the instance of mediumeditor that is monitoring the provided editor element version the version information for the mediumeditor library dynamically add remove elements to your instance it is possible to dynamically add new elements to your existing mediumeditor instance javascript var editor new mediumeditor editable editor subscribe editableinput this handleeditableinput bind this imagine an ajax fetch any other dynamic functionality which will add new editable elements to the dom editor addelements editable or editor addelements document getelementsbyclassname editable or editor addelements document queryselectorall editable passing an elements or array of elements to addelements elements will add the given element or array of elements to the internal this elements array ensure the element s are initialized with the proper attributes and event handlers as if the element had been passed during instantiation of the editor for any textarea elements hide the textarea create a new div contenteditable true element and add it to the elements array ensure the 2 elements remain syncd be intelligent enough to run the necessary code only once per element no matter how often you will call it removing elements dynamically straight forward just call removeelements with the element or array of elements you to want to tear down each element itself will remain a contenteditable it will just remove all event handlers and all references to it so you can safely remove it from dom javascript editor removeelements document queryselector myelement or editor removeelements document getelementbyid myelement or editor removeelements myelement in case you have jquery and dont exactly know when an element was removed for example after routing state change var removedelements editor elements foreach function element check if the element is still available in current dom if element parents body length removedelements push element editor removeelements removedelements capturing dom changes for observing any changes on contenteditable use the custom editableinput event exposed via the subscribe method js var editor new mediumeditor editable editor subscribe editableinput function event editable do some work this event is supported in all browsers supported by mediumeditor including ie9 and edge to help with cases when one instance of mediumeditor is monitoring multiple elements the 2nd argument passed to the event handler editable in the example above will be a reference to the contenteditable element that has actually changed this is handy when you need to capture any modifications to the contenteditable element including typing cutting pasting changes from clicking on buttons in the toolbar undo redo why is this interesting and why should you use this event instead of just attaching to the input event on the contenteditable element so for most modern browsers chrome firefox safari etc the input event works just fine in fact editableinput is just a proxy for the input event in those browsers however the input event is not supported for contenteditable elements in ie 9 11 and is mostly supported in microsoft edge but not fully so to properly support the editableinput event in internet explorer and microsoft edge mediumeditor uses a combination of the selectionchange and keypress events as well as monitoring calls to document execcommand extensions plugins check the documentation in order to learn how to develop extensions for mediumeditor a list of existing extensions and plugins such as images and media embeds tables and markdown can be found here development to run the demo locally clone this repo locally run npm install from your console at the root run node index js from the root navigate to http localhost 8088 demo index html to view the demo mediumeditor development tasks are managed by grunt to install all the necessary packages just invoke bash npm install to run all the test and build the dist files for testing on demo pages just invoke bash grunt these are the other available grunt tasks js runs jslint and jasmine tests and creates minified and concatenated versions of the script css runs autoprefixer and csslint test runs jasmine tests jslint and csslint watch watch for modifications on script scss files spec runs a task against a specified file the source files are located inside the src directory be sure to make changes to these files and not files in the dist directory contributing kill some bugs fork it create your feature branch git checkout b my new feature test your changes to the best of your ability update the documentation to reflect your changes if they add or changes current functionality commit your changes git commit am added some feature without files from the dist directory push to the branch git push origin my new feature create new pull request code consistency to help create consistent looking code throughout the project we use a few tools to help us they have plugins for most popular editors ides to make coding for our project but you should use them in your project as well jshint we use jshint on each build to find easy to catch errors and potential problems in our js you can find our jshint settings in the jshintrc file in the root of the project jscs we use jscs on each build to enforce some code style rules we have for our project you can find our jscs settings in the jscsrc file in the root of the project editorconfig we use editorconfig to maintain consistent coding styles between various editors and ides you can find our settings in the editorconfig file in the root of the project easy first bugs looking for something simple for a first contribution try fixing an easy first bug contributors 100 and counting https github com yabwe medium editor graphs contributors is your org using mediumeditor add your org here and we can add you to our landing page license mit https github com yabwe medium editor blob master license