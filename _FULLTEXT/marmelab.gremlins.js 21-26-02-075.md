gremlins js gremlins js is a monkey testing library written in javascript for node js and the browser use it to check the robustness of web applications by unleashing a horde of undisciplined gremlins kate what are they billy billy peltzer theyre gremlins kate just like mr futterman said purpose while developing an html5 application did you anticipate uncommon user interactions did you manage to detect and patch all memory leaks if not the application may break sooner or later if n random actions can make an application fail its better to acknowledge it during testing rather than letting users discover it gremlins js simulates random user actions gremlins click anywhere in the window enter random data in forms or move the mouse over elements that dont expect it their goal triggering javascript errors or making the application fail if gremlins cant break an application congrats the application is robust enough to be released to real users this practice also known as monkey testing or fuzz testing is very common in mobile application development see for instance the android monkey program now that frontend mv d3 js backbone js angular js etc and backend node js development use persistent javascript applications this technique becomes valuable for web applications basic usage a gremlins horde is an army of specialized gremlins ready to mess up your application unleash the gremlins to start the stress test js var horde gremlins createhorde horde unleash gremlins will act randomly at 10 ms interval 1000 times gremlins js provides several gremlin species some click everywhere on the page others enter data in form inputs others scroll the window in every possible direction etc you will see traces of the gremlins actions on the screen they leave red traces and in the console log gremlin formfiller input 5 in input type ​ number name ​ age ​ gremlin formfiller input pzdoyzshh0k9 o8cpskdb73nmi r7r in input type ​ email name ​ email ​ gremlin clicker click at 1219 301 gremlin scroller scroll to 100 25 a horde also contains mogwais which are harmless gremlins or you could say that gremlins are harmful mogwais mogwais only monitor the activity of the application and record it on the logger for instance the fps mogwai monitors the number of frame per second every 500ms mogwai fps 33 21 mogwai fps 59 45 mogwai fps 12 67 mogwais also report when gremlins break the application for instance if the number of frames per seconds drops below 10 the fps mogwai will log an error mogwai fps 12 67 mogwai fps 23 56 err mogwai fps 7 54 err mogwai fps 15 76 after 10 errors a special mogwai stops the test hes called gizmo and he prevents gremlins from breaking applications bad after all once gremlins have found the first 10 errors you already know what you have to do to make your application more robust if not stopped by gizmo the default horde stops after roughly 1 minute you can increase the number of gremlins actions to make the attack last longer js horde unleash nb 10000 gremlins will attack at 10 ms interval 10 000 times gremlins just like mogwais are simple javascript functions if gremlins js doesnt provide the gremlin that can break your application its very easy to develop it js add a new custom gremlin to blur the currently focused element horde gremlin function document activeelement blur check the examples directory for examples everything in gremlins js is configurable you will find it very easy to extend and adapt to you use cases installation in the browser the gremlins min js file can be used as a standalone library and adds gremlins to the global namespace html script src path to gremlins min js script script gremlins createhorde unleash script alternately you can include gremlins min js as a requirejs module leaving the global namespace clean js require config paths gremlins path to gremlins min require gremlins function gremlins gremlins createhorde unleash gremlins js is also available as a bookmarklet go to this page grab it and unleash hordes on any web page advanced usage setting gremlins and mogwais to use in a test by default all gremlins and mogwais species are added to the horde you can also choose to add only the gremlins species you want using the gremlin function of the horde object js gremlins createhorde gremlin gremlins species formfiller gremlin gremlins species clicker clicktypes click gremlin gremlins species toucher gremlin gremlins species scroller gremlin function window function unleash if you just want to add your own gremlins in addition to the default ones use the allgremlins function js gremlins createhorde allgremlins gremlin function window function unleash to add just the mogwais you want use the mogwai and allmogwais method the same way gremlins js currently provides a few gremlins and mogwais clickergremlin clicks anywhere on the visible area of the document touchergremlin touches anywhere on the visible area of the document formfillergremlin fills forms by entering data selecting options clicking checkboxes etc scrollergremlin scrolls the viewport to reveal another part of the document typergremlin types keys on the keyboard alertmogwai prevents calls to alert from blocking the test fpsmogwai logs the number of frames per seconds fps of the browser gizmomogwai can stop the gremlins when they go too far configuring gremlins all the gremlins and mogwais provided by gremlins js are configurable functions i e you can alter the way they work by calling methods on them for instance the clicker gremlin is a function that you can execute it directly js var clickergremlin gremlins species clicker clickergremlin trigger a random mouse event in the screen in javascript functions are objects and as such can have methods the clicker gremlin function offers customizing methods js gremlins species clicker clicktypes click which mouse event types will be triggered canclick function element only click elements in bar return element parents bar length when canclick returns false the gremlin will look for another element to click on until maxnbtries is reached showaction function x y by default the clicker gremlin shows its action by a red circle overriding showaction with an empty function makes the gremlin action invisible each particular gremlin or mogwai has its own customization methods check the source for details tip for more information on configurable functions check this blog post about service closures seeding the randomizer if you want the attack to be repeatable you need to seed the random number generator gremlins js depends on chance js for random data generation so it supports seeding js seed the randomizer horde seed 1234 executing code before or after the attack before starting the attack you may want to execute custom code this is especially useful to start a profiler disable some features to better target the test bootstrap the application for this usage the horde object provides a before method which accepts a callback js horde before function startprofiler console profile gremlins to clean up the test environment the horde object also provides an after method js horde after function stopprofiler console profileend both before and after support asynchronous callbacks js horde before function waitfiveseconds done window settimeout done 5000 setting up a strategy by default gremlins will attack in random order in a uniform distribution separated by a delay of 10ms this attack strategy is called the distribution strategy you can customize it using the horde strategy method js horde strategy gremlins strategies distribution delay 50 wait 50 ms between each action distribution 0 3 0 3 0 3 0 1 the first three gremlins have more chances to be executed than the last note that if using default gremlins there are five type of gremlins the previous example would give a 0 value to last gremlin specie you can also use another strategy a strategy is just a callback expecting three parameters an array of gremlins a parameter object the one passed to unleash and a final callback two other strategies are bundled alltogether and byspecies and it should be fairly easy to implement a custom strategy for more sophisticated attack scenarios stopping the attack the horde can stop the attack in case of emergency using the horde stop method gizmo uses this method to prevent further damages to the application after 10 errors and you can use it too if you dont want the attack to continue customizing the logger by default gremlins js logs all gremlin actions and mogwai observations in the console if you prefer using an alternative logging method for instance storing gremlins activity in localstorage and sending it in ajax once every 10 seconds just provide a logger object with 4 methods log info warn and error to the logger method js var customlogger log function msg info function msg warn function msg error function msg horde logger customlogger tip instead of reimplementing your custom logger you may want to look at minilog contributing your feedback about the usage of gremlins js in your specific context is valuable dont hesitate to open github issues for any problem or question you may have all contributions are welcome new gremlins new mogwais new strategies should all be tested against the two examples bundled in the application try to follow the functional programming style also dont forget to rebuild the minified version of the library using make while developing you can use the command make watch to prevent from rebuilding at each step in this case just include the library using html script src http localhost 8080 gremlins min js script to build library use make build license gremlins js is licensed under the mit licence courtesy of marmelab