redux persist persist and rehydrate a redux store quickstart npm install redux persist usage examples 1 basic usage 2 nested persists 3 hot module replacement 4 code splitting coming soon basic usage basic usage involves adding persistreducer and persiststore to your setup important every app needs to decide how many levels of state they want to merge the default is 1 level please read through the state reconciler docs for more information js configurestore js import createstore from redux import persiststore persistreducer from redux persist import storage from redux persist lib storage defaults to localstorage for web and asyncstorage for react native import rootreducer from reducers const persistconfig key root storage const persistedreducer persistreducer persistconfig rootreducer export default let store createstore persistedreducer let persistor persiststore store return store persistor if you are using react wrap your root component with persistgate this delays the rendering of your apps ui until your persisted state has been retrieved and saved to redux note the persistgate loading prop can be null or any react instance e g loading loading js import persistgate from redux persist integration react normal setup create store and persistor import components etc const app return api full api persistreducer config reducer arguments config object required config key storage notable other config whitelist blacklist version statereconciler debug reducer function any reducer will work typically this would be the top level reducer returned by combinereducers returns an enhanced reducer persiststore store config callback arguments store redux store the store to be persisted config object typically null callback function will be called after rehydration is finished returns persistor object persistor object the persistor object is returned by persiststore with the following methods purge purges state from disk and returns a promise flush immediately writes all pending state to disk and returns a promise pause pauses persistence persist resumes persistence state reconciler state reconcilers define how incoming state is merged in with initial state it is critical to choose the right state reconciler for your state there are three options that ship out of the box lets look at how each operates hardset import hardset from redux persist lib statereconciler hardset this will hard set incoming state this can be desirable in some cases where persistreducer is nested deeper in your reducer tree or if you do not rely on initialstate in your reducer incoming state foo incomingfoo initial state foo initialfoo bar initialbar reconciled state foo incomingfoo note bar has been dropped automergelevel1 default this will auto merge one level deep auto merge means if the some piece of substate was modified by your reducer during the rehydrate action it will skip this piece of state level 1 means it will shallow merge 1 level deep incoming state foo incomingfoo initial state foo initialfoo bar initialbar reconciled state foo incomingfoo bar initialbar note incomingfoo overwrites initialfoo automergelevel2 import automergelevel2 from redux persist lib statereconciler automergelevel2 this acts just like automergelevel1 except it shallow merges two levels incoming state foo incomingfoo initial state foo initialfoo bar initialbar reconciled state foo mergedfoo bar initialbar note initialfoo and incomingfoo are shallow merged example js import hardset from redux persist lib statereconciler hardset const persistconfig key root storage statereconciler hardset react integration redux persist ships with react integration as a conveinence the persistgate component is the recommended way to delay rendering until persistence is complete it works in one of two modes 1 loading prop the provided loading value will be rendered until persistence is complete at which point children will be rendered 2 function childen the function will be invoked with a single bootstrapped argument when bootstrapped is true persistence is complete and it is safe to render the full app this can be useful for adding transition animations blacklist whitelist by example js blacklist const persistconfig key root storage storage blacklist navigation navigation will not be persisted whitelist const persistconfig key root storage storage whitelist navigation only navigation will be persisted nested persists nested persist can be useful for including different storage adapters code splitting or deep filtering for example while blacklist and whitelist only work one level deep but we can use a nested persist to blacklist a deeper value js import combinereducers from redux import persistreducer from redux persist import storage from redux persist lib storage import authreducer otherreducer from reducers const rootpersistconfig key root storage storage blacklist auth const authpersistconfig key auth storage storage blacklist somethingtemporary const rootreducer combinereducers auth persistreducer authpersistconfig authreducer other otherreducer export default persistreducer rootpersistconfig rootreducer migrations persistreducer has a general purpose migrate config which will be called after getting stored state but before actually reconciling with the reducer it can be any function which takes state as an argument and returns a promise to return a new state object redux persist ships with createmigrate which helps create a synchronous migration for moving from any version of stored state to the current state version additional information transforms transforms allow you to customize the state object that gets persisted and rehydrated there are several libraries that tackle some of the common implementations for transforms immutable support immutable reducers compress compress your serialized state with lz string encrypt encrypt your serialized state with aes filter store or load a subset of your state filter immutable store or load a subset of your state with support for immutablejs expire expire a specific subset of your state based on a property when the state object gets persisted it first gets serialized with json stringify if parts of your state object are not mappable to json objects the serialization process may transform these parts of your state in unexpected ways for example the javascript set type does not exist in json when you try to serialize a set via json stringify it gets converted to an empty object probably not what you want below is a transform that successfully persists a set property which simply converts it to an array and back in this way the set gets converted to an array which is a recognized data structure in json when pulled out of the persisted store the array gets converted back to a set before being saved to the redux store js const mytransform createtransform transform state on its way to being serialized and persisted inboundstate key convert myset to an array return inboundstate myset inboundstate myset transform state being rehydrated outboundstate key convert myset back to a set return outboundstate myset new set outboundstate myset define which reducers this transform gets called for whitelist somereducer the createtransform function takes three parameters 1 an inbound function that gets called right before state is persisted 2 an outbound function that gets called right before state is rehydrated 3 config storage engines localstorage import storage from redux persist lib storage sessionstorage import storagesession from redux persist lib storage session asyncstorage react native import asyncstorage from react native localforage recommended for web electron storage electron support via electron store redux persist filesystem storage react native to mitigate storage size limitations in android 199 284 redux persist node storage for use in nodejs environments redux persist sensitive storage react native for sensitive information uses react native sensitive info redux persist expo securestore react native for sensitive information using expos securestore only available if using expo sdk expo create react native app standalone redux persist fs storage react native fs engine redux persist cookie storage cookie storage engine works in browser and node js for universal isomorphic apps redux persist weapp storage storage engine for wechat mini program also compatible with wepy custom any conforming storage api implementing the following methods setitem getitem removeitem nb these methods must support promises