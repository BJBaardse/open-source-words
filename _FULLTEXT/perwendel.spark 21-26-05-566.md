spark a tiny web framework for java 8 news spark 2 7 1 is out please try it out and report any bugs xml dependency groupid com sparkjava groupid artifactid spark core artifactid version 2 7 1 version dependency important there is a vulnerability in older versions of spark versions lower than 2 5 2 please upgrade to the latest version for documentation please go to http sparkjava com documentation for usage questions please use stack overflow with the “spark java” tag javadoc http javadoc io doc com sparkjava spark core getting started xml dependency groupid com sparkjava groupid artifactid spark core artifactid version 2 7 1 version dependency java import static spark spark public class helloworld public static void main string args get hello request response hello world view at http localhost 4567 hello check out and try the examples in the source code you can also check out the javadoc after getting the source from github run mvn javadoc javadoc the result is put in target site apidocs examples simple example showing some basic functionality java import static spark spark a simple example just showing some basic functionality public class simpleexample public static void main string args port 5678 uncomment this if you want spark to listen to port 5678 instead of the default 4567 get hello request response hello world post hello request response hello world request body get private request response response status 401 return go away get users name request response selected user request params name get news section request response response type text xml return xml version \ 1 0\ encoding \ utf 8\ news request params section news get protected request response halt 403 i dont think so return null get redirect request response response redirect news world return null get request response root a simple crud example showing how to create get update and delete book resources java import static spark spark import java util hashmap import java util map import java util random a simple crud example showing how to create get update and delete book resources public class books map holding the books private static map string book books new hashmap string book public static void main string args final random random new random creates a new book resource will return the id to the created resource author and title are sent in the post body as x www urlencoded values e g author foo title bar you get them by using request queryparams valuename post books request response string author request queryparams author string title request queryparams title book book new book author title int id random nextint integer max value books put string valueof id book response status 201 201 created return id gets the book resource for the provided id get books id request response book book books get request params id if book null return title book gettitle author book getauthor else response status 404 404 not found return book not found updates the book resource for the provided id with new information author and title are sent in the request body as x www urlencoded values e g author foo title bar you get them by using request queryparams valuename put books id request response string id request params id book book books get id if book null string newauthor request queryparams author string newtitle request queryparams title if newauthor null book setauthor newauthor if newtitle null book settitle newtitle return book with id id updated else response status 404 404 not found return book not found deletes the book resource for the provided id delete books id request response string id request params id book book books remove id if book null return book with id id deleted else response status 404 404 not found return book not found gets all available book resources ids get books request response string ids for string id books keyset ids id return ids public static class book public string author title public book string author string title this author author this title title public string getauthor return author public void setauthor string author this author author public string gettitle return title public void settitle string title this title title example showing a very simple and stupid authentication filter that is executed before all other resources java import static spark spark import java util hashmap import java util map example showing a very simple and stupid authentication filter that is executed before all other resources when requesting the resource with e g http localhost 4567 hello user some password guy the filter will stop the execution and the client will get a 401 unauthorized with the content you are not welcome here when requesting the resource with e g http localhost 4567 hello user foo password bar the filter will accept the request and the request will continue to the hello route note there is a second before filter that adds a header to the response note there is also an after filter that adds a header to the response public class filterexample private static map string string usernamepasswords new hashmap string string public static void main string args usernamepasswords put foo bar usernamepasswords put admin admin before request response string user request queryparams user string password request queryparams password string dbpassword usernamepasswords get user if password null password equals dbpassword halt 401 you are not welcome here before hello request response response header foo set by second before filter get hello request response hello world after hello request response response header spark added by after filter afterafter hello request response response header finally executed even if exception is throw afterafter request response response header finally executed after any route even if exception is throw example showing how to use attributes java import static spark spark after import static spark spark get example showing the use of attributes public class filterexampleattributes public static void main string args get hi request response request attribute foo bar return null after hi request response for string attr request attributes system out println attr attr after hi request response object foo request attribute foo response body asxml foo foo private static string asxml string name object value return xml version \ 1 0\ encoding \ utf 8\ name value name example showing how to serve static resources java import static spark spark public class staticresources public static void main string args will serve all static file are under public in classpath if the route isnt consumed by others routes when using maven the public folder is assumed to be in main resources staticfilelocation public get hello request response hello world example showing how to define content depending on accept type java import static spark spark public class jsonaccepttypeexample public static void main string args running curl i h accept application json http localhost 4567 hello json message is read running curl i h accept text html http localhost 4567 hello http 404 error is thrown get hello application json request response \ message\ \ hello world\ example showing how to render a view from a template note that we are using modelandview class for setting the object and name location of template first of all we define a class which handles and renders output depending on template engine used in this case freemarker java public class freemarkertemplateengine extends templateengine private configuration configuration protected freemarkertemplateengine this configuration createfreemarkerconfiguration override public string render modelandview modelandview try stringwriter stringwriter new stringwriter template template configuration gettemplate modelandview getviewname template process modelandview getmodel stringwriter return stringwriter tostring catch ioexception e throw new illegalargumentexception e catch templateexception e throw new illegalargumentexception e private configuration createfreemarkerconfiguration configuration retval new configuration retval setclassfortemplateloading freemarkertemplateengine class freemarker return retval then we can use it to generate our content note how we are setting model data and view name because we are using freemarker in this case a map and the name of the template is required java public class freemarkerexample public static void main string args get hello request response map string object attributes new hashmap attributes put message hello freemarker world the hello ftl file is located in directory src test resources spark examples templateview freemarker return modelandview attributes hello ftl new freemarkertemplateengine example of using transformer first of all we define the transformer class in this case a class which transforms an object to json format using gson api java public class jsontransformer implements responsetransformer private gson gson new gson override public string render object model return gson tojson model and then the code which return a simple pojo to be transformed to json java public class transformerexample public static void main string args get hello application json request response return new mymessage hello world new jsontransformer debugging see spark debug tools as a separate module