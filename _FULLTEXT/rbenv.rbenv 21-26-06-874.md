groom your apps ruby environment with rbenv use rbenv to pick a ruby version for your application and guarantee that your development environment matches production put rbenv to work with bundler for painless ruby upgrades and bulletproof deployments powerful in development specify your apps ruby version once in a single file keep all your teammates on the same page no headaches running apps on different versions of ruby just works™ from the command line and with app servers like pow override the ruby version anytime just set an environment variable rock solid in production your applications executables are its interface with ops with rbenv and bundler binstubs youll never again need to cd in a cron job or chef recipe to ensure youve selected the right runtime the ruby version dependency lives in one place—your app—so upgrades and rollbacks are atomic even when you switch versions one thing well rbenv is concerned solely with switching ruby versions its simple and predictable a rich plugin ecosystem lets you tailor it to suit your needs compile your own ruby versions or use the ruby build plugin to automate the process specify per application environment variables with rbenv vars see more plugins on the wiki why choose rbenv over rvm table of contents how it works understanding path understanding shims choosing the ruby version locating the ruby installation installation homebrew on macos upgrading with homebrew basic github checkout upgrading with git how rbenv hooks into your shell installing ruby versions installing ruby gems uninstalling ruby versions uninstalling rbenv command reference rbenv local rbenv global rbenv shell rbenv versions rbenv version rbenv rehash rbenv which rbenv whence environment variables development how it works at a high level rbenv intercepts ruby commands using shim executables injected into your path determines which ruby version has been specified by your application and passes your commands along to the correct ruby installation understanding path when you run a command like ruby or rake your operating system searches through a list of directories to find an executable file with that name this list of directories lives in an environment variable called path with each directory in the list separated by a colon usr local bin usr bin bin directories in path are searched from left to right so a matching executable in a directory at the beginning of the list takes precedence over another one at the end in this example the usr local bin directory will be searched first then usr bin then bin understanding shims rbenv works by inserting a directory of shims at the front of your path rbenv shims usr local bin usr bin bin through a process called rehashing rbenv maintains shims in that directory to match every ruby command across every installed version of ruby—irb gem rake rails ruby and so on shims are lightweight executables that simply pass your command along to rbenv so with rbenv installed when you run say rake your operating system will do the following search your path for an executable file named rake find the rbenv shim named rake at the beginning of your path run the shim named rake which in turn passes the command along to rbenv choosing the ruby version when you execute a shim rbenv determines which ruby version to use by reading it from the following sources in this order the rbenv version environment variable if specified you can use the rbenv shell command to set this environment variable in your current shell session the first ruby version file found by searching the directory of the script you are executing and each of its parent directories until reaching the root of your filesystem the first ruby version file found by searching the current working directory and each of its parent directories until reaching the root of your filesystem you can modify the ruby version file in the current working directory with the rbenv local command the global rbenv version file you can modify this file using the rbenv global command if the global version file is not present rbenv assumes you want to use the system ruby—i e whatever version would be run if rbenv werent in your path locating the ruby installation once rbenv has determined which version of ruby your application has specified it passes the command along to the corresponding ruby installation each ruby version is installed into its own directory under rbenv versions for example you might have these versions installed rbenv versions 1 8 7 p371 rbenv versions 1 9 3 p327 rbenv versions jruby 1 7 1 version names to rbenv are simply the names of the directories in rbenv versions installation compatibility note rbenv is incompatible with rvm please make sure to fully uninstall rvm and remove any references to it from your shell initialization files before installing rbenv homebrew on macos if youre on macos we recommend installing rbenv with homebrew install rbenv sh brew install rbenv note that this also installs ruby build so youll be ready to install other ruby versions out of the box set up rbenv in your shell sh rbenv init follow the printed instructions to set up rbenv shell integration close your terminal window and open a new one so your changes take effect verify that rbenv is properly set up using this rbenv doctor script sh curl fssl https github com rbenv rbenv installer raw master bin rbenv doctor bash checking for rbenv in path usr local bin rbenv checking for rbenv shims in path ok checkingrbenv install support usr local bin rbenv install ruby build 20170523 counting installed ruby versions none there arent any ruby versions installed under rbenv versions you can install ruby versions like so rbenv install 2 2 4 checking rubygems settings ok auditing installed plugins ok thats it installing rbenv includes ruby build so now youre ready to install some other ruby versions using rbenv install upgrading with homebrew to upgrade to the latest rbenv and update ruby build with newly released ruby versions upgrade the homebrew packages sh brew upgrade rbenv ruby build basic github checkout for a more automated install you can use rbenv installer if you prefer a manual approach follow the steps below this will get you going with the latest version of rbenv without needing a systemwide install clone rbenv into rbenv sh git clone https github com rbenv rbenv git rbenv optionally try to compile dynamic bash extension to speed up rbenv dont worry if it fails rbenv will still work normally cd rbenv src configure make c src add rbenv bin to your path for access to the rbenv command line utility for bash bash echo export path home rbenv bin path bash profile for ubuntu desktop bash echo export path home rbenv bin path bashrc for zsh zsh echo export path home rbenv bin path zshrc for fish shell fish set ux fish user paths home rbenv bin fish user paths set up rbenv in your shell sh rbenv bin rbenv init follow the printed instructions to set up rbenv shell integration restart your shell so that path changes take effect opening a new terminal tab will usually do it verify that rbenv is properly set up using this rbenv doctor script sh curl fssl https github com rbenv rbenv installer raw master bin rbenv doctor bash checking for rbenv in path usr local bin rbenv checking for rbenv shims in path ok checkingrbenv install support usr local bin rbenv install ruby build 20170523 counting installed ruby versions none there arent any ruby versions installed under rbenv versions you can install ruby versions like so rbenv install 2 2 4 checking rubygems settings ok auditing installed plugins ok optional install ruby build which provides the rbenv install command that simplifies the process of installing new ruby versions upgrading with git if youve installed rbenv manually using git you can upgrade to the latest version by pulling from github sh cd rbenv git pull how rbenv hooks into your shell skip this section unless you must know what every line in your shell profile is doing rbenv init is the only command that crosses the line of loading extra commands into your shell coming from rvm some of you might be opposed to this idea heres what rbenv init actually does sets up your shims path this is the only requirement for rbenv to function properly you can do this by hand by prepending rbenv shims to your path installs autocompletion this is entirely optional but pretty useful sourcing rbenv completions rbenv bash will set that up there is also a rbenv completions rbenv zsh for zsh users rehashes shims from time to time youll need to rebuild your shim files doing this automatically makes sure everything is up to date you can always run rbenv rehash manually installs the sh dispatcher this bit is also optional but allows rbenv and plugins to change variables in your current shell making commands like rbenv shell possible the sh dispatcher doesnt do anything invasive like override cd or hack your shell prompt but if for some reason you need rbenv to be a real script rather than a shell function you can safely skip it run rbenv init for yourself to see exactly what happens under the hood installing ruby versions the rbenv install command doesnt ship with rbenv out of the box but is provided by the ruby build project if you installed it either as part of github checkout process outlined above or via homebrew you should be able to sh list all available versions rbenv install l install a ruby version rbenv install 2 0 0 p247 alternatively to the install command you can download and compile ruby manually as a subdirectory of rbenv versions an entry in that directory can also be a symlink to a ruby version installed elsewhere on the filesystem rbenv doesnt care it will simply treat any entry in the versions directory as a separate ruby version installing ruby gems once youve installed some ruby versions youll want to install gems first ensure that the target version for your project is the one you want by checking rbenv version see command reference select another version using rbenv local 2 0 0 p247 for example then proceed to install gems as you normally would sh gem install bundler you dont need sudo to install gems typically the ruby versions will be installed and writeable by your user no extra privileges are required to install gems check the location where gems are being installed with gem env sh gem env home rbenv versions lib ruby gems uninstalling ruby versions as time goes on ruby versions you install will accumulate in your rbenv versions directory to remove old ruby versions simply rm rf the directory of the version you want to remove you can find the directory of a particular ruby version with the rbenv prefix command e g rbenv prefix 1 8 7 p357 the ruby build plugin provides an rbenv uninstall command to automate the removal process uninstalling rbenv the simplicity of rbenv makes it easy to temporarily disable it or uninstall from the system to disable rbenv managing your ruby versions simply remove the rbenv init line from your shell startup configuration this will remove rbenv shims directory from path and future invocations like ruby will execute the system ruby version as before rbenv rbenv will still be accessible on the command line but your ruby apps wont be affected by version switching to completely uninstall rbenv perform step 1 and then remove its root directory this will delete all ruby versions that were installed under rbenv root versions directory rm rf rbenv root if youve installed rbenv using a package manager as a final step perform the rbenv package removal for instance for homebrew brew uninstall rbenv command reference like git the rbenv command delegates to subcommands based on its first argument the most common subcommands are rbenv local sets a local application specific ruby version by writing the version name to a ruby version file in the current directory this version overrides the global version and can be overridden itself by setting the rbenv version environment variable or with the rbenv shell command rbenv local 1 9 3 p327 when run without a version number rbenv local reports the currently configured local version you can also unset the local version rbenv local unset rbenv global sets the global version of ruby to be used in all shells by writing the version name to the rbenv version file this version can be overridden by an application specific ruby version file or by setting the rbenv version environment variable rbenv global 1 8 7 p352 the special version name system tells rbenv to use the system ruby detected by searching your path when run without a version number rbenv global reports the currently configured global version rbenv shell sets a shell specific ruby version by setting the rbenv version environment variable in your shell this version overrides application specific versions and the global version rbenv shell jruby 1 7 1 when run without a version number rbenv shell reports the current value of rbenv version you can also unset the shell version rbenv shell unset note that youll need rbenvs shell integration enabled step 3 of the installation instructions in order to use this command if you prefer not to use shell integration you may simply set the rbenv version variable yourself export rbenv version jruby 1 7 1 rbenv versions lists all ruby versions known to rbenv and shows an asterisk next to the currently active version rbenv versions 1 8 7 p352 1 9 2 p290 1 9 3 p327 set by users sam rbenv version jruby 1 7 1 rbx 1 2 4 ree 1 8 7 2011 03 rbenv version displays the currently active ruby version along with information on how it was set rbenv version 1 9 3 p327 set by users sam rbenv version rbenv rehash installs shims for all ruby executables known to rbenv i e rbenv versions bin run this command after you install a new version of ruby or install a gem that provides commands rbenv rehash rbenv which displays the full path to the executable that rbenv will invoke when you run the given command rbenv which irb users sam rbenv versions 1 9 3 p327 bin irb rbenv whence lists all ruby versions with the given command installed rbenv whence rackup 1 9 3 p327 jruby 1 7 1 ree 1 8 7 2011 03 environment variables you can affect how rbenv operates with the following settings name default description rbenv version specifies the ruby version to be used also see rbenv shell rbenv root rbenv defines the directory under which ruby versions and shims reside also see rbenv root rbenv debug outputs debug information also as rbenv debug subcommand rbenv hook path see wiki colon separated list of paths searched for rbenv hooks rbenv dir pwd directory to start searching for ruby version files development the rbenv source code is hosted on github its clean modular and easy to understand even if youre not a shell hacker tests are executed using bats bats test bats test file bats please feel free to submit pull requests and file bugs on the issue tracker