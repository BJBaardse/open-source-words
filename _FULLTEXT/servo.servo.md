The Servo Parallel Browser Engine Project Servo is a prototype web browser engine written in the Rust language. It is currently developed on 64-bit macOS, 64-bit Linux, 64-bit Windows, and Android. Servo welcomes contribution from everyone. See CONTRIBUTING.md and HACKING_QUICKSTART.md for help getting started. Visit the Servo Project page for news and guides. Setting up your environment Rustup.rs Building servo requires rustup, version 1.8.0 or more recent. If you have an older version, run rustup self update. To install on Windows, download and run rustup-init.exe then follow the onscreen instructions. To install on other systems, run: sh curl https://sh.rustup.rs -sSf | sh This will also download the current stable version of Rust, which Servo wont use. To skip that step, run instead: curl https://sh.rustup.rs -sSf | sh -s -- --default-toolchain none See also Other installation methods Other dependencies Please select your operating system: macOS Debian-based Linuxes Fedora Arch Linux openSUSE Gentoo Linux Microsoft Windows Android macOS On macOS (homebrew) sh brew install automake pkg-config python cmake yasm pip install virtualenv On macOS (MacPorts) sh sudo port install python27 py27-virtualenv cmake yasm On macOS >= 10.11 (El Capitan), you also have to install OpenSSL ``` sh brew install openssl export OPENSSL_INCLUDE_DIR="$(brew --prefix openssl)/include" export OPENSSL_LIB_DIR="$(brew --prefix openssl)/lib" ./mach build ... ``` If youve already partially compiled servo but forgot to do this step, run ./mach clean, set the shell variables, and recompile. On Debian-based Linuxes sh sudo apt install git curl autoconf libx11-dev \ libfreetype6-dev libgl1-mesa-dri libglib2.0-dev xorg-dev \ gperf g++ build-essential cmake virtualenv python-pip \ libssl1.0-dev libbz2-dev libosmesa6-dev libxmu6 libxmu-dev \ libglu1-mesa-dev libgles2-mesa-dev libegl1-mesa-dev libdbus-1-dev \ libharfbuzz-dev ccache clang If you using a version prior to Ubuntu 17.04 or Debian Sid, replace libssl1.0-dev with libssl-dev. If you are using Ubuntu 16.04 run export HARFBUZZ_SYS_NO_PKG_CONFIG=1 before building to avoid an error with harfbuzz. If you are on Ubuntu 14.04 and encountered errors on installing these dependencies involving libcheese, see #6158 for a workaround. If virtualenv does not exist, try python-virtualenv. On Fedora sh sudo dnf install curl libtool gcc-c++ libXi-devel \ freetype-devel mesa-libGL-devel mesa-libEGL-devel glib2-devel libX11-devel libXrandr-devel gperf \ fontconfig-devel cabextract ttmkfdir python python-virtualenv python-pip expat-devel \ rpm-build openssl-devel cmake bzip2-devel libXcursor-devel libXmu-devel mesa-libOSMesa-devel \ dbus-devel ncurses-devel harfbuzz-devel ccache mesa-libGLU-devel clang clang-libs On CentOS sh sudo yum install curl libtool gcc-c++ libXi-devel \ freetype-devel mesa-libGL-devel mesa-libEGL-devel glib2-devel libX11-devel libXrandr-devel gperf \ fontconfig-devel cabextract ttmkfdir python python-virtualenv python-pip expat-devel \ rpm-build openssl-devel cmake3 bzip2-devel libXcursor-devel libXmu-devel mesa-libOSMesa-devel \ dbus-devel ncurses-devel python34 harfbuzz-devel ccache clang clang-libs llvm-toolset-7 Build inside llvm-toolset and devtoolset: sh scl enable devtoolset-7 llvm-toolset-7 bash with the following environmental variables set: sh export CMAKE=cmake3 export LIBCLANG_PATH=/opt/rh/llvm-toolset-7/root/usr/lib64 On openSUSE Linux sh sudo zypper install libX11-devel libexpat-devel libbz2-devel Mesa-libEGL-devel Mesa-libGL-devel cabextract cmake \ dbus-1-devel fontconfig-devel freetype-devel gcc-c++ git glib2-devel gperf \ harfbuzz-devel libOSMesa-devel libXcursor-devel libXi-devel libXmu-devel libXrandr-devel libopenssl-devel \ python-pip python-virtualenv rpm-build glu-devel ccache llvm-clang libclang On Arch Linux sh sudo pacman -S --needed base-devel git python2 python2-virtualenv python2-pip mesa cmake bzip2 libxmu glu \ pkg-config ttf-fira-sans harfbuzz ccache clang On Gentoo Linux sh sudo emerge net-misc/curl \ media-libs/freetype media-libs/mesa dev-util/gperf \ dev-python/virtualenv dev-python/pip dev-libs/openssl \ media-libs/harfbuzz dev-util/ccache \ x11-libs/libXmu media-libs/glu x11-base/xorg-server sys-devel/clang with the following environment variable set: sh export LIBCLANG_PATH="/usr/lib64/llvm/*/lib64" On Windows (MSVC) Install Python for Windows (https://www.python.org/downloads/release/python-2714/). The Windows x86-64 MSI installer is fine. You should change the installation to install the "Add python.exe to Path" feature. Install virtualenv. In a normal Windows Shell (cmd.exe or "Command Prompt" from the start menu), do: pip install virtualenv If this does not work, you may need to reboot for the changed PATH settings (by the python installer) to take effect. Install Git for Windows (https://git-scm.com/download/win). DO allow it to add git.exe to the PATH (default settings for the installer are fine). Install Visual Studio Community 2017 (https://www.visualstudio.com/vs/community/). You MUST add "Visual C++" to the list of installed components. It is not on by default. Visual Studio 2017 MUST installed to the default location or mach.bat will not find it. If you encountered errors with the environment above, do the following for a workaround: 1. Download and install Build Tools for Visual Studio 2017 2. Install python2.7 x86-x64 and virtualenv 3. Run mach.bat build -d. If you have troubles with x64 type prompt as mach.bat set by default: 1. you may need to choose and launch the type manually, such as x86_x64 Cross Tools Command Prompt for VS 2017 in the Windows menu.) 2. cd to/the/path/servo 3. python mach build -d Cross-compilation for Android Run ./mach bootstrap-android to get Android-specific tools. See wiki for details. The Rust compiler Servos build system uses rustup.rs to automatically download a Rust compiler. This is a specific version of Rust Nightly determined by the rust-toolchain file. Building Servo is built with Cargo, the Rust package manager. We also use Mozillas Mach tools to orchestrate the build and other tasks. Normal build To build Servo in development mode. This is useful for development, but the resulting binary is very slow. sh git clone https://github.com/servo/servo cd servo ./mach build --dev ./mach run tests/html/about-mozilla.html Or on Windows MSVC, in a normal Command Prompt (cmd.exe): cmd git clone https://github.com/servo/servo cd servo mach.bat build --dev For benchmarking, performance testing, or real-world use, add the --release flag to create an optimized build: sh ./mach build --release ./mach run --release tests/html/about-mozilla.html Checking for build errors, without building If youre making changes to one crate that cause build errors in another crate, consider this instead of a full build: sh ./mach check It will run cargo check, which runs the analysis phase of the compiler (and so shows build errors if any) but skips the code generation phase. This can be a lot faster than a full build, though of course it doesnt produce a binary you can run. Building for Android target For ARM (armv7-linux-androideabi, most phones): sh ./mach build --release --android ./mach package --release --android For x86 (typically for the emulator): sh ./mach build --release --target i686-linux-android ./mach package --release --target i686-linux-android Running Run Servo with the command: ```sh ./servo [url] [arguments] # if you run with nightly build ./mach run [url] [arguments] # if you run with mach For example ./mach run https://www.google.com ``` Commandline Arguments -p INTERVAL turns on the profiler and dumps info to the console every INTERVAL seconds -s SIZE sets the tile size for painting; defaults to 512 -z disables all graphical output; useful for running JS / layout tests -Z help displays useful output to debug servo Keyboard Shortcuts Ctrl+- zooms out Ctrl+= zooms in Alt+left arrow goes backwards in the history Alt+right arrow goes forwards in the history Esc exits servo Developing There are lots of mach commands you can use. You can list them with ./mach --help. The generated documentation can be found on http://doc.servo.org/servo/index.html