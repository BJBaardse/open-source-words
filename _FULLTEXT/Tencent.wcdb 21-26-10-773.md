wcdb 中文版本请参看这里 wcdb is an efficient complete easy to use mobile database framework used in the wechat application its currently available on ios macos and android wcdb for ios macos features easy to use through wcdb you can get objects from database in one line code winq wcdb language integrated query winq is a native data querying capability which frees developers from writing glue code to concatenate sql query strings orm object relational mapping wcdb provides a flexible easy to use orm for creating tables indices and constraints as well as crud through objc objects objective c database getobjectsofclass wctsampleconvenient class fromtable tablename where wctsampleconvenient intvalue 10 limit 20 efficient through the framework layer and sqlcipher source optimization wcdb have more efficient performance multi threaded concurrency wcdb supports concurrent read read and read write access via connection pooling batch write performance test for more benchmark data please refer to our benchmark complete encryption support wcdb supports database encryption via sqlcipher corruption recovery wcdb provides a built in repair kit for database corruption recovery anti injection wcdb provides a built in protection from sql injection getting started prerequisites apps using wcdb can target ios 7 or later macos 10 9 or later xcode 8 0 or later required objective c required installation via cocoapods install cocoapods run pod repo update to make cocoapods aware of the latest available wcdb versions in your podfile add pod wcdb to your app target from the command line run pod install use the xcworkspace file generated by cocoapods to work on your project add import wcdb wcdb h at the top of your objective c source files and start your wcdb journey since wcdb is an objective c framework for those files in your project that includes wcdb you should rename their extension m to mm via carthage install carthage add github tencent wcdb to your cartfile run carthage update drag wcdb framework from the appropriate platform directory in carthage build to the linked binary and libraries section of your xcode projects build phases settings on your application targets build phases settings tab click the icon and choose new run script phase create a run script with carthage copy frameworks and add the paths to the frameworks under input files srcroot carthage build ios wcdb framework or srcroot carthage build mac wcdb framework add import wcdb wcdb h at the top of your objective c source files and start your wcdb journey since wcdb is an objective c framework for those files in your project that includes wcdb you should rename their extension m to mm via dynamic framework note that dynamic frameworks are not compatible with ios 7 see “static framework” for ios 7 support getting source code from git repository and update the submodule of sqlcipher git clone https github com tencent wcdb git cd wcdb git submodule update init sqlcipher drag wcdb xcodeproj in wcdb apple into your project add wcdb framework to the enbedded binaries section of your xcode projects general settings note that there are two frameworks here and the dynamic one should be chosen you can check it at build phases target dependencies the right one is wcdb while wcdb ios static is used for static lib add import wcdb wcdb h at the top of your objective c source files and start your wcdb journey since wcdb is an objective c framework for those files in your project that includes wcdb you should rename their extension m to mm via static framework getting source code from git repository and update the submodule of sqlcipher git clone https github com tencent wcdb git cd wcdb git submodule update init sqlcipher drag wcdb xcodeproj in wcdb apple into your project add wcdb ios static to the target dependencies section of your xcode projects build phases settings add wcdb framework， libz tbd to the linked binary and libraries section of your xcode projects build phases settings note that there are two wcdb framework you should choose the one from wcdb ios static target add all load and objc to the other linker flags section of your xcode projects build settings add import wcdb wcdb h at the top of your objective c source files and start your wcdb journey since wcdb is an objective c framework for those files in your project that includes wcdb you should rename their extension m to mm tutorials tutorials can be found here documentations documentations can be found on our wiki api references for ios macos can be found here performence data can be found on our benchmark wcdb for android features database encryption via sqlcipher concurrent access via connection pooling from modern android framework repair toolkit for database corruption recovery database backup and recovery utility optimized for small backup size log redirection and various tracing facilities api 12 android 3 1 and above are supported getting started to include wcdb to your project choose either way import via maven or via aar package import via maven to import wcdb via maven repositories add the following lines to build gradle on your app module gradle dependencies compile com tencent wcdb wcdb android 1 0 5 replace 1 0 2 to any available version this will cause gradle to download aar package from jcenter while building your application import prebuilt aar package 1 download aar package from release page 2 import the aar as new module in android studio select file new new module menu and choose import jar aar package 3 add a dependency on the new module this can be done using file project structure in android studio or by adding following code to applications build gradle gradle dependencies change wcdb to the actual module name specified in step 2 compile project wcdb migrate from plain text sqlite databases wcdb has interfaces very similar to android sqlite database apis to migrate you application from aosp api change import path from android database to com tencent wcdb and android database sqlite to com tencent wcdb database after import path update your application links to wcdb instead of aosp api to open or create an encrypted database use with password versions of sqlitedatabase openorcreatedatabase sqliteopenhelper getwritabledatabase or context openorcreatedatabase note wcdb uses byte for password instead of string in sqlcipher android binding java string password mypassword sqlitedatabase db sqlitedatabase openorcreatedatabase path to database password getbytes null null see sample encryptdb for sample for transferring data between plain text and encrypted databases corruption recovery see sample repairdb for instructions how to recover corrupted databases using repairkit redirect log output by default wcdb prints its log message to system logcat you may want to change this behavior in order to for example save logs for troubleshooting wcdb can redirect all of its log outputs to user defined routine using log setlogger logcallback method build from sources build wcdb android with prebuilt dependencies wcdb itself can be built apart from its dependencies using gradle or android studio to build wcdb android library run gradle on android directory bash cd android gradlew build building wcdb requires android ndk installed if gradle failed to find your sdk and or ndk you may need to create a file named local properties on the android directory with content sdk dir path to sdk ndk dir path to ndk android studio will do this for you when the project is imported build dependencies from sources wcdb depends on openssl crypto library and sqlcipher you can rebuild all dependencies if you wish in this case a working c compiler on the host system perl 5 tcl and a bash environment is needed to be installed on your system to build dependencies checkout all submodules set android ndk root environment variable to your ndk path then run build depends android sh bash export android ndk root path to ndk build depends android sh this will build openssl crypto library and generate sqlcipher amalgamation sources and place them to proper locations suitable for wcdb library building documentations documentations can be found on our wiki api references for android can be found here